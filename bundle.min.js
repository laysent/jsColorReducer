!function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){"use strict";var r=e(1),i=e(4),o=e(5).select,s=e(6).EXIF,u=e(7).app,a=e(8).d3Palette,c=e(9),h=e(10).dragndrop,l=e(11).rotateHelper,f=function(){Array.prototype.slice.apply(document.querySelectorAll("canvas")).forEach(function(t){var n=t,e=n.getContext("2d");e.clearRect(0,0,n.width,n.height),n.width=n.height=0,n.style.display="origin"===n.id?"":"none"});var t=document.querySelector("svg g.selection");t&&document.querySelector("svg").removeChild(t),document.querySelector("div.viewport img")&&document.querySelector("div.viewport").removeChild(document.querySelector("div.viewport img")),document.querySelector(".loading").style.display="none";var n=document.querySelector("div.selection");n.style.width="0px",n.style.height="0px",n.style.top="0px",n.style.left="0px",document.querySelector("#dragndrop").style.display="none"},p=function(){var t=c.imageConverter(c.image2Canvas(u.preview)).range(u.range).selection(u.selection).convert(),n=document.querySelector("canvas#result");n.getContext("2d").drawImage(t,0,0),n.style.display="",u.previewer.canvas(n).range(u.range).selection(u.selection)};c.imageLoader(document.querySelector("input")).onchange(function(){f()}).onsuccess(function(t){s.getData(t,function(){u.range=[0,2*Math.PI],u.rotate=l(s.getTag(this,"Orientation")),u.preview=c.previewGenerator(t,u.size),u.preview.id="origin",u.preview.style.display="",u.origin=c.image2Canvas(t,u.rotate);var n=document.querySelector("canvas#origin");n.parentNode.replaceChild(u.preview,n);var e=document.querySelector("canvas#origin").getBoundingClientRect();u.rect=e,u.selection={x0:0,x1:e.width,y0:0,y1:e.height},document.querySelector("svg").style.display="";var r=document.querySelector("canvas#result");r.style.display="none",r.width=u.preview.width,r.height=u.preview.height,document.querySelector(".info-zoom").innerText=Math.floor(100/c.getRatio(u.size)(t.width,t.height))+"%",document.querySelector(".info-resolution").innerText=u.rotate.toString(t.width,t.height),u.previewer=c.imagePreviewer(r,u.preview.getBoundingClientRect(),u.origin,document.querySelector("canvas#preview"),u.rotate).start(),u.selectionUnsubscribe=o(document.querySelector("canvas#origin"),document.querySelector("div.selection"),function(t){t.debounce(100).subscribe(function(t){u.selection={x0:t.x0-u.rect.left,x1:t.x1-u.rect.left,y0:t.y0-u.rect.top,y1:t.y1-u.rect.top},p(),document.querySelector("canvas#origin").style.display="none"})})})}).onfailed(function(){console.log("failed!")}).regist();var d=a().radius(100).dom(document.querySelector("svg")).selectionChangedObservable(function(t){t.debounce(100).forEach(function(t){u.range=t,p(),document.querySelector("canvas#origin").style.display="none"})});i.select("svg").attr({width:200,height:200}).call(d),document.querySelector(".icon-export").onclick=function(){document.querySelector(".loading").style.display="block",setTimeout(function(){var t=c.getRatio(u.size)(u.origin.width,u.origin.height),n=c.imageConverter(c.image2Canvas(u.origin)).range(u.range).selection({x0:u.selection.x0*t,x1:u.selection.x1*t,y0:u.selection.y0*t,y1:u.selection.y1*t}).convert(),e=c.canvas2Image(n),r=document.querySelector(".viewport").getBoundingClientRect(),i=Math.max(1,n.width/r.width,n.height/r.height);e.style.width=n.width/i+"px",e.style.height=n.height/i+"px",e.style.marginTop="0px",e.style.marginLeft=(document.body.getBoundingClientRect().width-n.width/i)/2+"px",e.onload=function(){f(),document.querySelector("div.viewport").appendChild(e),document.querySelector("svg").style.display="none",u.selectionUnsubscribe()}},100)},Array.prototype.slice.apply(document.querySelectorAll("i")).forEach(function(t){var n=t;n.down=r.Observable.merge(r.Observable.fromEvent(t,"mousedown"),r.Observable.fromEvent(t,"touchstart")),n.down.forEach(function(){n.className=n.className.split(" ")[0]+" pressed"}),n.up=r.Observable.merge(r.Observable.fromEvent(t,"mouseup"),r.Observable.fromEvent(t,"touchend")),n.up.forEach(function(){n.className=n.className.split(" ")[0]})}),document.querySelector(".icon-import").onclick=function(){document.querySelector("input").click()};var v=document.querySelector(".icon-origin");v.down.forEach(function(t){t.stopPropagation(),t.preventDefault(),document.getElementById("origin").style.display="block",document.getElementById("result").style.display="none"}),v.up.forEach(function(t){t.stopPropagation(),t.preventDefault(),document.getElementById("origin").style.display="none",document.getElementById("result").style.display="block"}),h(document.querySelector(".viewport"),document.querySelector("#dragndrop"),document.querySelector("input")),document.body.addEventListener("touchmove",function(t){t.preventDefault()},!0),function(){var t=r.Observable.fromEvent(window,"resize");t.subscribe(function(){var t=document.querySelector("canvas#origin").getBoundingClientRect();(0===t.width||0===t.height)&&(t=document.querySelector("canvas#result").getBoundingClientRect()),0!==t.width&&0!==t.height&&(u.rect=t,u.previewer.rect(t))}),u.isMobile&&(document.querySelector(".icon-origin").style.display="none")}()},function(t,n,e){var r;(function(t,i,o){(function(s){function u(t){return t&&t.Object===Object?t:null}function a(t){for(var n=[],e=0,r=t.length;r>e;e++)n.push(t[e]);return n}function c(t){return function(){try{return t.apply(this,arguments)}catch(n){return rn.e=n,rn}}}function h(t){throw t}function l(t,n){if(sn&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(hn)){for(var e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack);var i=e.join("\n"+hn+"\n");t.stack=f(i)}}function f(t){for(var n=t.split("\n"),e=[],r=0,i=n.length;i>r;r++){var o=n[r];p(o)||d(o)||!o||e.push(o)}return e.join("\n")}function p(t){var n=g(t);if(!n)return!1;var e=n[0],r=n[1];return e===an&&r>=cn&&Rs>=r}function d(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function v(){if(sn)try{throw new Error}catch(t){var n=t.stack.split("\n"),e=n[0].indexOf("@")>0?n[1]:n[2],r=g(e);if(!r)return;return an=r[0],r[1]}}function g(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function m(t,n,e,r,i,o){var u=Jn(t),a=u.length,c=Jn(n),h=c.length;if(a!==h&&!r)return!1;for(var l,f=a;f--;)if(l=u[f],!(r?l in n:Xn.call(n,l)))return!1;for(var p=r;++f<a;){l=u[f];var d,v=t[l],g=n[l];if(!(d===s?e(v,g,r,i,o):d))return!1;p||(p="constructor"===l)}if(!p){var m=t.constructor,y=n.constructor;if(m!==y&&"constructor"in t&&"constructor"in n&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function y(t,n,e){switch(e){case Cn:case Sn:return+t===+n;case Nn:return t.name===n.name&&t.message===n.message;case kn:return t!==+t?n!==+n:t===+n;case On:case Rn:return t===n+""}return!1}function b(t){return!!t&&"object"==typeof t}function _(t){return"number"==typeof t&&t>-1&&t%1===0&&$n>=t}function w(t){return b(t)&&_(t.length)&&!!Gn[Zn.call(t)]}function x(t,n){for(var e=-1,r=t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}function E(t,n,e,r,i,o){var u=-1,a=t.length,c=n.length;if(a!==c&&!(r&&c>a))return!1;for(;++u<a;){var h,l=t[u],f=n[u];if(h!==s){if(h)continue;return!1}if(r){if(!x(n,function(t){return l===t||e(l,t,r,i,o)}))return!1}else if(l!==f&&!e(l,f,r,i,o))return!1}return!0}function M(t,n,e,r,i,o){var s=Qn(t),u=Qn(n),a=Mn,c=Mn;s||(a=Zn.call(t),a===En?a=qn:a!==qn&&(s=w(t))),u||(c=Zn.call(n),c===En&&(c=qn));var h=a===qn&&!Kn(t),l=c===qn&&!Kn(n),f=a===c;if(f&&!s&&!h)return y(t,n,a);if(!r){var p=h&&Xn.call(t,"__wrapped__"),d=l&&Xn.call(n,"__wrapped__");if(p||d)return e(p?t.value():t,d?n.value():n,r,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var v=i.length;v--;)if(i[v]===t)return o[v]===n;i.push(t),o.push(n);var g=(s?E:m)(t,n,e,r,i,o);return i.pop(),o.pop(),g}function C(t,n,e,r,i){return t===n?!0:null==t||null==n||!st(t)&&!b(n)?t!==t&&n!==n:M(t,n,C,e,r,i)}function S(t,n){for(var e=new Array(t),r=0;t>r;r++)e[r]=n();return e}function N(t,n){this.id=t,this.value=n}function A(t,n){this.scheduler=t,this.disposable=n,this.isDisposed=!1}function D(t,n){n.isDisposed||(n.isDisposed=!0,n.disposable.dispose())}function k(t){this._s=t,this.isDisposed=!1}function q(t){this._s=t}function O(t){this._s=t,this._l=t.length,this._i=0}function T(t){this._a=t}function R(t){this._a=t,this._l=L(t),this._i=0}function F(t){return"number"==typeof t&&Yt.isFinite(t)}function P(t){var n,e=t[mn];if(!e&&"string"==typeof t)return n=new q(t),n[mn]();if(!e&&t.length!==s)return n=new T(t),n[mn]();if(!e)throw new TypeError("Object is not iterable");return t[mn]()}function j(t){var n=+t;return 0===n?n:isNaN(n)?n:0>n?-1:1}function L(t){var n=+t.length;return isNaN(n)?0:0!==n&&F(n)?(n=j(n)*Math.floor(Math.abs(n)),0>=n?0:n>yr?yr:n):n}function I(t,n){return xe(t)||(t=De),new _r(n,t)}function z(t,n){this.observer=t,this.parent=n}function U(t,n){return t.amb(n)}function V(){return!1}function B(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return n}function V(){return!1}function B(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return n}function V(){return!1}function H(){return[]}function V(){return!1}function H(){return[]}function B(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return n}function W(t){return function(n){return t.subscribe(n)}}function G(t){return t.toArray()}function Y(t){return t.length>0}function X(t,n,e){var r=wn(n,e,3);return t.map(function(n,e){var i=r(n,e,t);return nn(i)&&(i=hr(i)),(_n(i)||bn(i))&&(i=br(i)),i}).concatAll()}function Z(t,n,e){for(var r=0,i=t.length;i>r;r++)if(e(t[r],n))return r;return-1}function $(t){this.comparer=t,this.set=[]}function J(t,n){return function(e){for(var r=e,i=0;n>i;i++){var o=r[t[i]];if("undefined"==typeof o)return s;r=o}return r}}function K(t){if(0===t.length)throw new ln;return t[0]}function Q(t,n,e,r){var i=wn(n,e,3);return new Cs(function(n){return t.subscribe(new lo(n,t,i,r))},t)}function tt(t){return t?Je.isObservable(t)?t:nn(t)?Je.fromPromise(t):ot(t)||it(t)?wo.call(this,t):en(t)?rt.call(this,t):_n(t)||bn(t)?nt.call(this,t):st(t)?et.call(this,t):t:t}function nt(t){return Je.from(t).concatMap(function(t){return Je.isObservable(t)||st(t)?tt.call(null,t):Xt.Observable.just(t)}).toArray()}function et(t){function n(t,n){e[n]=s,i.push(t.map(function(t){e[n]=t}))}for(var e=new t.constructor,r=Object.keys(t),i=[],o=0,u=r.length;u>o;o++){var a=r[o],c=tt.call(this,t[a]);c&&Je.isObservable(c)?n(c,a):e[a]=t[a]}return Je.forkJoin.apply(Je,i).map(function(){return e})}function rt(t){var n=this;return new Cs(function(e){t.call(n,function(){var t=arguments[0],n=arguments[1];if(t)return e.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;o>i;i++)r.push(arguments[i]);n=r}e.onNext(n),e.onCompleted()})})}function it(t){return en(t.next)&&en(t["throw"])}function ot(t){var n=t.constructor;return n?"GeneratorFunction"===n.name||"GeneratorFunction"===n.displayName?!0:it(n.prototype):!1}function st(t){return Object==t.constructor}function ut(t,n,e,r){var i=new ks;return r.push(at(i,n,e)),t.apply(n,r),i.asObservable()}function at(t,n,e){return function(){for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];if(en(e)){if(i=on(e).apply(n,i),i===rn)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function ct(t,n,e,r){var i=new ks;return r.push(ht(i,n,e)),t.apply(n,r),i.asObservable()}function ht(t,n,e){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;i>s;s++)o[s-1]=arguments[s];if(en(e)){var o=on(e).apply(n,o);if(o===rn)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function lt(t){return Yt.StaticNodeList?t instanceof Yt.StaticNodeList||t instanceof Yt.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function ft(t,n,e){this._e=t,this._n=n,this._fn=e,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function pt(t,n,e){var r=new se,i=Object.prototype.toString.call(t);if(lt(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;s>o;o++)r.add(pt(t.item(o),n,e));else t&&r.add(new ft(t,n,e));return r}function dt(t,n,e){return new Cs(function(r){function i(t,n){if(c[n]=t,s[n]=!0,u||(u=s.every($t))){if(o)return r.onError(o);var i=on(e).apply(null,c);if(i===rn)return r.onError(i.e);r.onNext(i)}a&&c[1]&&r.onCompleted()}var o,s=[!1,!1],u=!1,a=!1,c=new Array(2);return new ge(t.subscribe(function(t){i(t,0)},function(t){c[1]?r.onError(t):o=t},function(){a=!0,c[1]&&r.onCompleted()}),n.subscribe(function(t){i(t,1)},function(t){r.onError(t)},function(){a=!0,i(!0,1)}))},t)}function G(t){return t.toArray()}function vt(t,n){return t.groupJoin(this,n,gr,function(t,n){return n})}function gt(t){var n=this;return new Cs(function(e){var r=new Ds,i=new se,o=new ye(i);return e.onNext(re(r,o)),i.add(n.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),e.onError(t)},function(){r.onCompleted(),e.onCompleted()})),nn(t)&&(t=hr(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new Ds,e.onNext(re(r,o))},function(t){r.onError(t),e.onError(t)},function(){r.onCompleted(),e.onCompleted()})),o},n)}function mt(t){var n=this;return new Cs(function(e){function r(){var n;try{n=t()}catch(o){return void e.onError(o)}nn(n)&&(n=hr(n));var a=new de;i.setDisposable(a),a.setDisposable(n.take(1).subscribe(Zt,function(t){u.onError(t),e.onError(t)},function(){u.onCompleted(),u=new Ds,e.onNext(re(u,s)),r()}))}var i=new ve,o=new se(i),s=new ye(o),u=new Ds;return e.onNext(re(u,s)),o.add(n.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),e.onError(t)},function(){u.onCompleted(),e.onCompleted()})),r(),s},n)}function yt(t,n){return new Lo(t,n)}function B(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return n}function bt(t){this.patterns=t}function _t(t,n){this.expression=t,this.selector=n}function wt(t){return function(n){t.onError(n)}}function xt(t,n){return function(){var e=on(t.selector).apply(t,arguments);return e===rn?n.onError(e.e):void n.onNext(e)}}function Et(t,n,e){var r=t.get(n);if(!r){var i=new Go(n,e);return t.set(n,i),i}return r}function Mt(t,n,e){this.joinObserverArray=t,this.onNext=n,this.onCompleted=e,this.joinObservers=new Wo;for(var r=0,i=this.joinObserverArray.length;i>r;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}function Ct(t,n){return new Yo(t,n)}function St(t,n,e){return new Cs(function(r){var i=t,o=we(n);return e.scheduleRecursiveFuture(0,i,function(t,n){if(o>0){var s=e.now();i=new Date(i.getTime()+o),i.getTime()<=s&&(i=new Date(s+o))}r.onNext(t),n(t+1,new Date(i))})})}function Nt(t,n,e){return t===n?new Cs(function(t){return e.schedulePeriodic(0,n,function(n){return t.onNext(n),n+1})}):pr(function(){return St(new Date(e.now()+t),n,e)})}function At(t,n,e){return new Cs(function(r){var i,o=!1,s=new ve,u=null,a=[],c=!1;return i=t.materialize().timestamp(e).subscribe(function(t){var i,h;"E"===t.value.kind?(a=[],a.push(t),u=t.value.error,h=!c):(a.push({value:t.value,timestamp:t.timestamp+n}),h=!o,o=!0),h&&(null!==u?r.onError(u):(i=new de,s.setDisposable(i),i.setDisposable(e.scheduleRecursiveFuture(null,n,function(t,n){var i,s,h,l;if(null===u){c=!0;do h=null,a.length>0&&a[0].timestamp-e.now()<=0&&(h=a.shift().value),null!==h&&h.accept(r);while(null!==h);l=!1,s=0,a.length>0?(l=!0,s=Math.max(0,a[0].timestamp-e.now())):o=!1,i=u,c=!1,null!==i?r.onError(i):l&&n(null,s)}}))))}),new ge(i,s)},t)}function Dt(t,n,e){return pr(function(){return At(t,n-e.now(),e)})}function kt(t,n,e){var r,i;return en(n)?i=n:(r=n,i=e),new Cs(function(n){function e(){a.setDisposable(t.subscribe(function(t){var e=on(i)(t);if(e===rn)return n.onError(e.e);var r=new de;s.add(r),r.setDisposable(e.subscribe(function(){n.onNext(t),s.remove(r),o()},function(t){n.onError(t)},function(){n.onNext(t),s.remove(r),o()}))},function(t){n.onError(t)},function(){u=!0,a.dispose(),o()}))}function o(){u&&0===s.length&&n.onCompleted()}var s=new se,u=!1,a=new ve;return r?a.setDisposable(r.subscribe(e,function(t){n.onError(t)},e)):e(),new ge(a,s)},this)}function qt(t,n){return new Cs(function(e){var r,i=!1,o=new ve,s=0,u=t.subscribe(function(t){var u=on(n)(t);if(u===rn)return e.onError(u.e);nn(u)&&(u=hr(u)),i=!0,r=t,s++;var a=s,c=new de;o.setDisposable(c),c.setDisposable(u.subscribe(function(){i&&s===a&&e.onNext(r),i=!1,c.dispose()},function(t){e.onError(t)},function(){i&&s===a&&e.onNext(r),i=!1,c.dispose()}))},function(t){o.dispose(),e.onError(t),i=!1,s++},function(){o.dispose(),i&&e.onNext(r),e.onCompleted(),i=!1,s++});return new ge(u,o)},t)}function G(t){return t.toArray()}function G(t){return t.toArray()}function Ot(t,n){return new Cs(function(e){function r(){s&&(s=!1,e.onNext(i)),o&&e.onCompleted()}var i,o=!1,s=!1,u=new de;return u.setDisposable(t.subscribe(function(t){s=!0,i=t},function(t){e.onError(t)},function(){o=!0,u.dispose()})),new ge(u,n.subscribe(r,function(t){e.onError(t)},r))},t)}function Tt(t,n,e,r){return en(n)&&(r=e,e=n,n=Cr()),Je.isObservable(r)||(r=qr(new ns)),new Cs(function(i){function o(t){function n(){return l=e===h}var e=h,o=new de;a.setDisposable(o),o.setDisposable(t.subscribe(function(){n()&&u.setDisposable(r.subscribe(i)),o.dispose()},function(t){n()&&i.onError(t)},function(){n()&&u.setDisposable(r.subscribe(i))}))}function s(){var t=!l;return t&&h++,t}var u=new ve,a=new ve,c=new de;u.setDisposable(c);var h=0,l=!1;return o(n),c.setDisposable(t.subscribe(function(t){if(s()){i.onNext(t);var n=on(e)(t);if(n===rn)return i.onError(n.e);o(nn(n)?hr(n):n)}},function(t){s()&&i.onError(t)},function(){s()&&i.onCompleted()})),new ge(u,a)},t)}function Rt(t,n,e,r){return xe(e)&&(r=e,e=qr(new ns)),e instanceof Error&&(e=qr(e)),xe(r)||(r=Re),Je.isObservable(e)||(e=qr(new ns)),new Cs(function(i){function o(){var t=s;h.setDisposable(r.scheduleFuture(null,n,function(){c=s===t,c&&(nn(e)&&(e=hr(e)),a.setDisposable(e.subscribe(i)))}))}var s=0,u=new de,a=new ve,c=!1,h=new ve;return a.setDisposable(u),o(),u.setDisposable(t.subscribe(function(t){c||(s++,i.onNext(t),o())},function(t){c||(s++,i.onError(t))},function(){c||(s++,i.onCompleted())})),new ge(a,h)},t)}function Ft(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,n){return t.onNext(n)},"@@transducer/result":function(t){return t.onCompleted()}}}function Pt(t){this.predicate=t}function jt(t){this.predicate=t}function Lt(t,n){var e=this;this.scheduler=t,this.messages=n,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;i>r;r++){var o=this.messages[r],s=o.value;!function(n){t.scheduleAbsolute(null,o.time,function(){for(var t=e.observers.slice(0),r=0,i=t.length;i>r;r++)n.accept(t[r]);return he})}(s)}}var It={"function":!0,object:!0},zt=It[typeof n]&&n&&!n.nodeType?n:null,Ut=It[typeof t]&&t&&!t.nodeType?t:null,Vt=u(zt&&Ut&&"object"==typeof i&&i),Bt=u(It[typeof self]&&self),Ht=u(It[typeof window]&&window),Wt=Ut&&Ut.exports===zt?zt:null,Gt=u(It[typeof this]&&this),Yt=Vt||Ht!==(Gt&&Gt.window)&&Ht||Bt||Gt||Function("return this")(),Xt={internals:{},config:{Promise:Yt.Promise},helpers:{}},Zt=Xt.helpers.noop=function(){},$t=Xt.helpers.identity=function(t){return t},Jt=Xt.helpers.defaultNow=Date.now,Kt=Xt.helpers.defaultComparer=function(t,n){return te(t,n)},Qt=Xt.helpers.defaultSubComparer=function(t,n){return t>n?1:n>t?-1:0},tn=(Xt.helpers.defaultKeySerializer=function(t){return t.toString()},Xt.helpers.defaultError=function(t){throw t}),nn=Xt.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},en=Xt.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),rn={e:{}},on=Xt.internals.tryCatch=function(t){if(!en(t))throw new TypeError("fn must be a function");return c(t)};Xt.config.longStackSupport=!1;var sn=!1,un=on(function(){throw new Error})();sn=!!un.e&&!!un.e.stack;var an,cn=v(),hn="From previous event:",ln=Xt.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ln.prototype=Object.create(Error.prototype),ln.prototype.name="EmptyError";var fn=Xt.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};fn.prototype=Object.create(Error.prototype),fn.prototype.name="ObjectDisposedError";var pn=Xt.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};pn.prototype=Object.create(Error.prototype),pn.prototype.name="ArgumentOutOfRangeError";var dn=Xt.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};dn.prototype=Object.create(Error.prototype),dn.prototype.name="NotSupportedError";var vn=Xt.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};vn.prototype=Object.create(Error.prototype),vn.prototype.name="NotImplementedError";var gn=Xt.helpers.notImplemented=function(){throw new vn},mn=(Xt.helpers.notSupported=function(){throw new dn},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Yt.Set&&"function"==typeof(new Yt.Set)["@@iterator"]&&(mn="@@iterator");var yn=Xt.doneEnumerator={done:!0,value:s},bn=Xt.helpers.isIterable=function(t){return t&&t[mn]!==s},_n=Xt.helpers.isArrayLike=function(t){return t&&t.length!==s};Xt.helpers.iterator=mn;var wn=Xt.internals.bindCallback=function(t,n,e){if("undefined"==typeof n)return t;switch(e){case 0:return function(){return t.call(n)};case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}},xn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],En=(xn.length,"[object Arguments]"),Mn="[object Array]",Cn="[object Boolean]",Sn="[object Date]",Nn="[object Error]",An="[object Function]",Dn="[object Map]",kn="[object Number]",qn="[object Object]",On="[object RegExp]",Tn="[object Set]",Rn="[object String]",Fn="[object WeakMap]",Pn="[object ArrayBuffer]",jn="[object Float32Array]",Ln="[object Float64Array]",In="[object Int8Array]",zn="[object Int16Array]",Un="[object Int32Array]",Vn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",Hn="[object Uint16Array]",Wn="[object Uint32Array]",Gn={};Gn[jn]=Gn[Ln]=Gn[In]=Gn[zn]=Gn[Un]=Gn[Vn]=Gn[Bn]=Gn[Hn]=Gn[Wn]=!0,Gn[En]=Gn[Mn]=Gn[Pn]=Gn[Cn]=Gn[Sn]=Gn[Nn]=Gn[An]=Gn[Dn]=Gn[kn]=Gn[qn]=Gn[On]=Gn[Tn]=Gn[Rn]=Gn[Fn]=!1;var Yn=Object.prototype,Xn=Yn.hasOwnProperty,Zn=Yn.toString,$n=Math.pow(2,53)-1,Jn=Object.keys||function(){var t=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=e.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in i)t.call(i,o)&&u.push(o);if(n)for(s=0;r>s;s++)t.call(i,e[s])&&u.push(e[s]);return u}}(),st=Xt.internals.isObject=function(t){var n=typeof t;return!!t&&("object"===n||"function"===n)},Kn=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Qn=Array.isArray||function(t){return b(t)&&_(t.length)&&Zn.call(t)===Mn},te=Xt.internals.isEqual=function(t,n){return C(t,n)},ne=({}.hasOwnProperty,Array.prototype.slice,Xt.internals.inherits=function(t,n){function e(){this.constructor=t}e.prototype=n.prototype,t.prototype=new e}),ee=Xt.internals.addProperties=function(t){for(var n=[],e=1,r=arguments.length;r>e;e++)n.push(arguments[e]);for(var i=0,o=n.length;o>i;i++){var s=n[i];for(var u in s)t[u]=s[u]}},re=Xt.internals.addRef=function(t,n){return new Cs(function(e){return new ge(n.getDisposable(),t.subscribe(e))})};N.prototype.compareTo=function(t){var n=this.value.compareTo(t.value);return 0===n&&(n=this.id-t.id),n};var ie=Xt.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},oe=ie.prototype;oe.isHigherPriority=function(t,n){return this.items[t].compareTo(this.items[n])<0},oe.percolate=function(t){if(!(t>=this.length||0>t)){var n=t-1>>1;if(!(0>n||n===t)&&this.isHigherPriority(t,n)){var e=this.items[t];this.items[t]=this.items[n],this.items[n]=e,this.percolate(n)}}},oe.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var n=2*t+1,e=2*t+2,r=t;if(n<this.length&&this.isHigherPriority(n,r)&&(r=n),e<this.length&&this.isHigherPriority(e,r)&&(r=e),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},oe.peek=function(){return this.items[0].value},oe.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},oe.dequeue=function(){var t=this.peek();return this.removeAt(0),t},oe.enqueue=function(t){var n=this.length++;this.items[n]=new N(ie.count++,t),this.percolate(n)},oe.remove=function(t){for(var n=0;n<this.length;n++)if(this.items[n].value===t)return this.removeAt(n),!0;return!1},ie.count=0;var se=Xt.CompositeDisposable=function(){var t,n,e=[];if(Array.isArray(arguments[0]))e=arguments[0];else for(n=arguments.length,e=new Array(n),t=0;n>t;t++)e[t]=arguments[t];this.disposables=e,this.isDisposed=!1,this.length=e.length},ue=se.prototype;ue.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},ue.remove=function(t){var n=!1;if(!this.isDisposed){var e=this.disposables.indexOf(t);-1!==e&&(n=!0,this.disposables.splice(e,1),this.length--,t.dispose())}return n},ue.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,n=new Array(t),e=0;t>e;e++)n[e]=this.disposables[e];for(this.disposables=[],this.length=0,e=0;t>e;e++)n[e].dispose()}};var ae=Xt.Disposable=function(t){this.isDisposed=!1,this.action=t||Zt};ae.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var ce=ae.create=function(t){return new ae(t)},he=ae.empty={dispose:Zt},le=ae.isDisposable=function(t){return t&&en(t.dispose)},fe=ae.checkDisposed=function(t){if(t.isDisposed)throw new fn},pe=ae._fixup=function(t){return le(t)?t:he},de=Xt.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};de.prototype.getDisposable=function(){return this.current},de.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var n=this.isDisposed;!n&&(this.current=t),n&&t&&t.dispose()},de.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var ve=Xt.SerialDisposable=function(){this.isDisposed=!1,this.current=null};ve.prototype.getDisposable=function(){return this.current},ve.prototype.setDisposable=function(t){var n=this.isDisposed;if(!n){var e=this.current;this.current=t}e&&e.dispose(),n&&t&&t.dispose()},ve.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var ge=Xt.BinaryDisposable=function(t,n){this._first=t,this._second=n,this.isDisposed=!1};ge.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var n=this._second;this._second=null,n&&n.dispose()}};var me=Xt.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};me.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,n=this._disposables.length;n>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var ye=Xt.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function n(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},n.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},n.prototype.getDisposable=function(){return this.isDisposed?he:new t(this)},n}();A.prototype.dispose=function(){this.scheduler.schedule(this,D)};var be=Xt.internals.ScheduledItem=function(t,n,e,r,i){this.scheduler=t,this.state=n,this.action=e,this.dueTime=r,this.comparer=i||Qt,this.disposable=new de};be.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},be.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},be.prototype.isCancelled=function(){return this.disposable.isDisposed},be.prototype.invokeCore=function(){return pe(this.action(this.scheduler,this.state))};var _e=Xt.Scheduler=function(){function t(){}t.isScheduler=function(n){return n instanceof t};var n=t.prototype;return n.schedule=function(t,n){throw new vn},n.scheduleFuture=function(n,e,r){var i=e;return i instanceof Date&&(i-=this.now()),i=t.normalize(i),0===i?this.schedule(n,r):this._scheduleFuture(n,i,r)},n._scheduleFuture=function(t,n,e){throw new vn},t.now=Jt,t.prototype.now=Jt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),we=_e.normalize,xe=_e.isScheduler;!function(t){function n(t,n){function e(n){function r(t,n){return s?o.remove(a):u=!0,i(n,e),he}var s=!1,u=!1,a=t.schedule(n,r);u||(o.add(a),s=!0)}var r=n[0],i=n[1],o=new se;return i(r,e),o}function e(t,n){function e(n,r){function s(t,n){return u?o.remove(c):a=!0,i(n,e),he}var u=!1,a=!1,c=t.scheduleFuture(n,r,s);a||(o.add(c),u=!0)}var r=n[0],i=n[1],o=new se;return i(r,e),o}t.scheduleRecursive=function(t,e){return this.schedule([t,e],n)},t.scheduleRecursiveFuture=function(t,n,r){return this.scheduleFuture([t,r],n,e)}}(_e.prototype),function(t){t.schedulePeriodic=function(t,n,e){if("undefined"==typeof Yt.setInterval)throw new dn;n=we(n);var r=t,i=Yt.setInterval(function(){r=e(r)},n);return ce(function(){Yt.clearInterval(i)})}}(_e.prototype),function(t){t.catchError=t["catch"]=function(t){return new Fe(this,t)}}(_e.prototype);var Ee,Me,Ce=Xt.internals.SchedulePeriodicRecursive=function(){function t(t){return function(n,e){e(0,t._period);var r=on(t._action)(t._state);r===rn&&(t._cancel.dispose(),h(r.e)),t._state=r}}function n(t,n,e,r){this._scheduler=t,this._state=n,this._period=e,this._action=r}return n.prototype.start=function(){var n=new de;return this._cancel=n,n.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),n},n}(),Se=function(t){function n(){t.call(this)}return ne(n,t),n.prototype.schedule=function(t,n){return pe(n(this,t))},n}(_e),Ne=_e.immediate=new Se,Ae=function(t){function n(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function e(){t.call(this)}var r;return ne(e,t),e.prototype.schedule=function(t,e){var i=new be(this,t,e,this.now());if(r)r.enqueue(i);else{r=new ie(4),r.enqueue(i);var o=on(n)();r=null,o===rn&&h(o.e)}return i.disposable},e.prototype.scheduleRequired=function(){return!r},e}(_e),De=_e.currentThread=new Ae,ke=function(){var t,n=Zt;if(Yt.setTimeout)t=Yt.setTimeout,n=Yt.clearTimeout;else{if(!Yt.WScript)throw new dn;t=function(t,n){Yt.WScript.Sleep(n),t()}}return{setTimeout:t,clearTimeout:n}}(),qe=ke.setTimeout,Oe=ke.clearTimeout;!function(){function t(n){if(i)qe(function(){t(n)},0);else{var e=r[n];if(e){i=!0;var o=on(e)();Me(n),i=!1,o===rn&&h(o.e)}}}function n(){if(!Yt.postMessage||Yt.importScripts)return!1;var t=!1,n=Yt.onmessage;return Yt.onmessage=function(){t=!0},Yt.postMessage("","*"),Yt.onmessage=n,t}var e=1,r={},i=!1;Me=function(t){
delete r[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=Vt&&Wt&&Vt.setImmediate)&&!s.test(u)&&u;if(en(u))Ee=function(n){var i=e++;return r[i]=n,u(function(){t(i)}),i};else if("undefined"!=typeof o&&"[object process]"==={}.toString.call(o))Ee=function(n){var i=e++;return r[i]=n,o.nextTick(function(){t(i)}),i};else if(n()){var a="ms.rx.schedule"+Math.random(),c=function(n){"string"==typeof n.data&&n.data.substring(0,a.length)===a&&t(n.data.substring(a.length))};Yt.addEventListener("message",c,!1),Ee=function(t){var n=e++;return r[n]=t,Yt.postMessage(a+currentId,"*"),n}}else if(Yt.MessageChannel){var l=new Yt.MessageChannel;l.port1.onmessage=function(n){t(n.data)},Ee=function(t){var n=e++;return r[n]=t,l.port2.postMessage(n),n}}else Ee="document"in Yt&&"onreadystatechange"in Yt.document.createElement("script")?function(n){var i=Yt.document.createElement("script"),o=e++;return r[o]=n,i.onreadystatechange=function(){t(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},Yt.document.documentElement.appendChild(i),o}:function(n){var i=e++;return r[i]=n,qe(function(){t(i)},0),i}}();var Te=function(t){function n(){t.call(this)}function e(t,n,e,r){return function(){t.setDisposable(ae._fixup(n(e,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}return ne(n,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Me(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Oe(this._id))},n.prototype.schedule=function(t,n){var i=new de,o=Ee(e(i,n,this,t));return new ge(i,new r(o))},n.prototype._scheduleFuture=function(t,n,r){if(0===n)return this.schedule(t,r);var o=new de,s=qe(e(o,r,this,t),n);return new ge(o,new i(s))},n}(_e),Re=_e["default"]=_e.async=new Te,Fe=function(t){function n(n,e){this._scheduler=n,this._handler=e,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return ne(n,t),n.prototype.schedule=function(t,n){return this._scheduler.schedule(t,this._wrap(n))},n.prototype._scheduleFuture=function(t,n,e){return this._scheduler.schedule(t,n,this._wrap(e))},n.prototype.now=function(){return this._scheduler.now()},n.prototype._clone=function(t){return new n(t,this._handler)},n.prototype._wrap=function(t){var n=this;return function(e,r){var i=on(t)(n._getRecursiveWrapper(e),r);return i===rn?(n._handler(i.e)||h(i.e),he):pe(i)}},n.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var n=this._clone(t);n._recursiveOriginal=t,n._recursiveWrapper=n,this._recursiveWrapper=n}return this._recursiveWrapper},n.prototype.schedulePeriodic=function(t,n,e){var r=this,i=!1,o=new de;return o.setDisposable(this._scheduler.schedulePeriodic(t,n,function(t){if(i)return null;var n=on(e)(t);return n===rn?(i=!0,r._handler(n.e)||h(n.e),o.dispose(),null):n})),o},n}(_e),Pe=Xt.Notification=function(){function t(){}return t.prototype._accept=function(t,n,e){throw new vn},t.prototype._acceptObserver=function(t,n,e){throw new vn},t.prototype.accept=function(t,n,e){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,n,e)},t.prototype.toObservable=function(t){var n=this;return xe(t)||(t=Ne),new Cs(function(e){return t.schedule(n,function(t,n){n._acceptObserver(e),"N"===n.kind&&e.onCompleted()})})},t}(),je=function(t){function n(t){this.value=t,this.kind="N"}return ne(n,t),n.prototype._accept=function(t){return t(this.value)},n.prototype._acceptObserver=function(t){return t.onNext(this.value)},n.prototype.toString=function(){return"OnNext("+this.value+")"},n}(Pe),Le=function(t){function n(t){this.error=t,this.kind="E"}return ne(n,t),n.prototype._accept=function(t,n){return n(this.error)},n.prototype._acceptObserver=function(t){return t.onError(this.error)},n.prototype.toString=function(){return"OnError("+this.error+")"},n}(Pe),Ie=function(t){function n(){this.kind="C"}return ne(n,t),n.prototype._accept=function(t,n,e){return e()},n.prototype._acceptObserver=function(t){return t.onCompleted()},n.prototype.toString=function(){return"OnCompleted()"},n}(Pe),ze=Pe.createOnNext=function(t){return new je(t)},Ue=Pe.createOnError=function(t){return new Le(t)},Ve=Pe.createOnCompleted=function(){return new Ie},Be=Xt.Observer=function(){};Be.prototype.toNotifier=function(){var t=this;return function(n){return n.accept(t)}},Be.prototype.asObserver=function(){var t=this;return new Ye(function(n){t.onNext(n)},function(n){t.onError(n)},function(){t.onCompleted()})},Be.prototype.checked=function(){return new Xe(this)};var He=Be.create=function(t,n,e){return t||(t=Zt),n||(n=tn),e||(e=Zt),new Ye(t,n,e)};Be.fromNotifier=function(t,n){var e=wn(t,n,1);return new Ye(function(t){return e(ze(t))},function(t){return e(Ue(t))},function(){return e(Ve())})},Be.prototype.notifyOn=function(t){return new $e(t,this)},Be.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var We,Ge=Xt.internals.AbstractObserver=function(t){function n(){this.isStopped=!1}return ne(n,t),n.prototype.next=gn,n.prototype.error=gn,n.prototype.completed=gn,n.prototype.onNext=function(t){!this.isStopped&&this.next(t)},n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},n}(Be),Ye=Xt.AnonymousObserver=function(t){function n(n,e,r){t.call(this),this._onNext=n,this._onError=e,this._onCompleted=r}return ne(n,t),n.prototype.next=function(t){this._onNext(t)},n.prototype.error=function(t){this._onError(t)},n.prototype.completed=function(){this._onCompleted()},n}(Ge),Xe=function(t){function n(n){t.call(this),this._observer=n,this._state=0}ne(n,t);var e=n.prototype;return e.onNext=function(t){this.checkAccess();var n=on(this._observer.onNext).call(this._observer,t);this._state=0,n===rn&&h(n.e)},e.onError=function(t){this.checkAccess();var n=on(this._observer.onError).call(this._observer,t);this._state=2,n===rn&&h(n.e)},e.onCompleted=function(){this.checkAccess();var t=on(this._observer.onCompleted).call(this._observer);this._state=2,t===rn&&h(t.e)},e.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},n}(Be),Ze=Xt.internals.ScheduledObserver=function(t){function n(n,e){t.call(this),this.scheduler=n,this.observer=e,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new ve}function e(t,n){return function(){t.onNext(n)}}function r(t,n){return function(){t.onError(n)}}function i(t){return function(){t.onCompleted()}}function o(t,n){var e;if(!(t.queue.length>0))return void(t.isAcquired=!1);e=t.queue.shift();var r=on(e)();return r===rn?(t.queue=[],t.hasFaulted=!0,h(r.e)):void n(t)}return ne(n,t),n.prototype.next=function(t){this.queue.push(e(this.observer,t))},n.prototype.error=function(t){this.queue.push(r(this.observer,t))},n.prototype.completed=function(){this.queue.push(i(this.observer))},n.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,o))},n.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},n}(Ge),$e=function(t){function n(n,e,r){t.call(this,n,e),this._cancel=r}return ne(n,t),n.prototype.next=function(n){t.prototype.next.call(this,n),this.ensureActive()},n.prototype.error=function(n){t.prototype.error.call(this,n),this.ensureActive()},n.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},n.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},n}(Ze),Je=Xt.Observable=function(){function t(t,n){return function(e){var r=e.onError;return e.onError=function(n){l(n,t),r.call(e,n)},n.call(t,e)}}function n(){if(Xt.config.longStackSupport&&sn){var n=this._subscribe,e=on(h)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=t(this,n)}}return We=n.prototype,n.isObservable=function(t){return t&&en(t.subscribe)},We.subscribe=We.forEach=function(t,n,e){return this._subscribe("object"==typeof t?t:He(t,n,e))},We.subscribeOnNext=function(t,n){return this._subscribe(He("undefined"!=typeof n?function(e){t.call(n,e)}:t))},We.subscribeOnError=function(t,n){return this._subscribe(He(null,"undefined"!=typeof n?function(e){t.call(n,e)}:t))},We.subscribeOnCompleted=function(t,n){return this._subscribe(He(null,null,"undefined"!=typeof n?function(){t.call(n)}:t))},n}(),Ke=Xt.ObservableBase=function(t){function n(t){return t&&en(t.dispose)?t:en(t)?ce(t):he}function e(t,e){var r=e[0],i=e[1],o=on(i.subscribeCore).call(i,r);o!==rn||r.fail(rn.e)||h(rn.e),r.setDisposable(n(o))}function r(){t.call(this)}return ne(r,t),r.prototype._subscribe=function(t){var n=new Ss(t),r=[n,this];return De.scheduleRequired()?De.schedule(r,e):e(null,r),n},r.prototype.subscribeCore=gn,r}(Je),Qe=Xt.FlatMapObservable=function(t){function n(n,e,r,i){this.resultSelector=en(r)?r:null,this.selector=wn(en(e)?e:function(){return e},i,3),this.source=n,t.call(this)}function e(t,n,e,r){this.i=0,this.selector=n,this.resultSelector=e,this.source=r,this.o=t,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this.selector,this.resultSelector,this))},ne(e,Ge),e.prototype._wrapResult=function(t,n,e){return this.resultSelector?t.map(function(t,r){return this.resultSelector(n,t,e,r)},this):t},e.prototype.next=function(t){var n=this.i++,e=on(this.selector)(t,n,this.source);return e===rn?this.o.onError(e.e):(nn(e)&&(e=hr(e)),(_n(e)||bn(e))&&(e=Je.from(e)),void this.o.onNext(this._wrapResult(e,t,n)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},n}(Ke),tr=Xt.internals.Enumerable=function(){};k.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var nr=function(t){function n(n){this.sources=n,t.call(this)}function e(t,n){if(!t.isDisposed){var e=on(t.e.next).call(t.e);if(e===rn)return t.o.onError(e.e);if(e.done)return t.o.onCompleted();var i=e.value;nn(i)&&(i=hr(i));var o=new de;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,n)))}}function r(t,n){this._state=t,this._recurse=n,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve,r={isDisposed:!1,o:t,subscription:n,e:this.sources[mn]()},i=De.scheduleRecursive(r,e);return new me([n,i,new k(r)])},ne(r,Ge),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},n}(Ke);tr.prototype.concat=function(){return new nr(this)};var er=function(t){function n(n){this.sources=n,t.call(this)}function e(t,n){if(!t.isDisposed){var e=on(t.e.next).call(t.e);if(e===rn)return t.o.onError(e.e);if(e.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=e.value;nn(i)&&(i=hr(i));var o=new de;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,n)))}}function r(t,n){this._state=t,this._recurse=n,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve,r={isDisposed:!1,e:this.sources[mn](),subscription:n,lastError:null,o:t},i=De.scheduleRecursive(r,e);return new me([n,i,new k(r)])},ne(r,Ge),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},n}(Ke);tr.prototype.catchError=function(){return new er(this)},tr.prototype.catchErrorWhen=function(t){var n=this;return new Cs(function(e){var r,i=new Ds,o=new Ds,s=t(i),u=s.subscribe(o),a=n[mn](),c={isDisposed:!1},h=new ve,l=De.scheduleRecursive(null,function(t,n){if(!c.isDisposed){var s=on(a.next).call(a);if(s===rn)return e.onError(s.e);if(s.done)return void(r?e.onError(r):e.onCompleted());var u=s.value;nn(u)&&(u=hr(u));var l=new de,f=new de;h.setDisposable(new ge(f,l)),l.setDisposable(u.subscribe(function(t){e.onNext(t)},function(t){f.setDisposable(o.subscribe(n,function(t){e.onError(t)},function(){e.onCompleted()})),i.onNext(t)},function(){e.onCompleted()}))}});return new me([u,h,l,new k(c)])})};var rr=function(t){function n(t,n){this.v=t,this.c=null==n?-1:n}function e(t){this.v=t.v,this.l=t.c}return ne(n,t),n.prototype[mn]=function(){return new e(this)},e.prototype.next=function(){return 0===this.l?yn:(this.l>0&&this.l--,{done:!1,value:this.v})},n}(tr),ir=tr.repeat=function(t,n){return new rr(t,n)},or=function(t){function n(t,n,e){this.s=t,this.fn=n?wn(n,e,3):null}function e(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return ne(n,t),n.prototype[mn]=function(){return new e(this)},e.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:yn},n}(tr),sr=tr.of=function(t,n,e){return new or(t,n,e)},ur=function(t){function n(n,e){this.source=n,this._s=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new $e(this._s,t))},n}(Ke);We.observeOn=function(t){return new ur(this,t)};var ar=function(t){function n(n,e){this.source=n,this._s=e,t.call(this)}function e(t,n){var e=n[0],r=n[1],i=n[2];r.setDisposable(new A(t,e.subscribe(i)))}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new de,r=new ve;return r.setDisposable(n),n.setDisposable(this._s.schedule([this.source,r,t],e)),r},n}(Ke);We.subscribeOn=function(t){return new ar(this,t)};var cr=function(t){function n(n,e){this._p=n,this._s=e,t.call(this)}function e(t,n){var e=n[0],r=n[1];e.onNext(r),e.onCompleted()}function r(t,n){var e=n[0],r=n[1];e.onError(r)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new de,i=this;return this._p.then(function(r){n.setDisposable(i._s.schedule([t,r],e))},function(e){n.setDisposable(i._s.schedule([t,e],r))}),n},n}(Ke),hr=Je.fromPromise=function(t,n){return n||(n=Re),new cr(t,n)};We.toPromise=function(t){if(t||(t=Xt.config.Promise),!t)throw new dn("Promise type not provided nor in Rx.config.Promise");var n=this;return new t(function(t,e){var r;n.subscribe(function(t){r=t},e,function(){t(r)})})};var lr=function(t){function n(n){this.source=n,t.call(this)}function e(t){this.o=t,this.a=[],Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t))},ne(e,Ge),e.prototype.next=function(t){this.a.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},n}(Ke);We.toArray=function(){return new lr(this)},Je.create=function(t,n){return new Cs(t,n)};var fr=function(t){function n(n){this._f=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=on(this._f)();return n===rn?qr(n.e).subscribe(t):(nn(n)&&(n=hr(n)),n.subscribe(t))},n}(Ke),pr=Je.defer=function(t){return new fr(t)},dr=function(t){function n(n){this.scheduler=n,t.call(this)}function e(t,n){this.observer=t,this.scheduler=n}function r(t,n){return n.onCompleted(),he}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new e(t,this.scheduler);return n.run()},e.prototype.run=function(){var t=this.observer;return this.scheduler===Ne?r(null,t):this.scheduler.schedule(t,r)},n}(Ke),vr=new dr(Ne),gr=Je.empty=function(t){return xe(t)||(t=Ne),t===Ne?vr:new dr(t)},mr=function(t){function n(n,e,r){this._iterable=n,this._fn=e,this._scheduler=r,t.call(this)}function e(t,n,e){return function(r,i){var o=on(n.next).call(n);if(o===rn)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;return en(e)&&(s=on(e)(s,r),s===rn)?t.onError(s.e):(t.onNext(s),void i(r+1))}}return ne(n,t),n.prototype.subscribeCore=function(t){var n=Object(this._iterable),r=P(n);return this._scheduler.scheduleRecursive(0,e(t,r,this._fn))},n}(Ke),yr=Math.pow(2,53)-1;q.prototype[mn]=function(){return new O(this._s)},O.prototype[mn]=function(){return this},O.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:yn},T.prototype[mn]=function(){return new R(this._a)},R.prototype[mn]=function(){return this},R.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:yn};var br=Je.from=function(t,n,e,r){if(null==t)throw new Error("iterable cannot be null.");if(n&&!en(n))throw new Error("mapFn when provided must be a function");if(n)var i=wn(n,e,2);return xe(r)||(r=De),new mr(t,i,r)},_r=function(t){function n(n,e){this._args=n,this._scheduler=e,t.call(this)}function e(t,n){var e=n.length;return function(r,i){e>r?(t.onNext(n[r]),i(r+1)):t.onCompleted()}}return ne(n,t),n.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,e(t,this._args))},n}(Ke),wr=Je.fromArray=function(t,n){return xe(n)||(n=De),new _r(t,n)},xr=function(t){function n(n,e,r,i,o){this._state=n,this._cndFn=e,this._itrFn=r,this._resFn=i,this._s=o,this._first=!0,t.call(this)}function e(t,n){if(t._first)t._first=!1;else if(t._state=on(t._itrFn)(t._state),t._state===rn)return t._o.onError(t._state.e);var e=on(t._cndFn)(t._state);if(e===rn)return t._o.onError(e.e);if(e){var r=on(t._resFn)(t._state);if(r===rn)return t._o.onError(r.e);t._o.onNext(r),n(t)}else t._o.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){return this._o=t,this._s.scheduleRecursive(this,e)},n}(Ke);Je.generate=function(t,n,e,r,i){return xe(i)||(i=De),new xr(t,n,e,r,i)},Je.of=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return new _r(n,De)},Je.ofWithScheduler=function(t){for(var n=arguments.length,e=new Array(n-1),r=1;n>r;r++)e[r-1]=arguments[r];return new _r(e,t)},Je.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Cs(function(n){function e(t){for(var e=0,r=t.length;r>e;e++)n.onNext(t[e])}return Array.observe(t,e),function(){Array.unobserve(t,e)}})},Je.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Cs(function(n){function e(t){for(var e=0,r=t.length;r>e;e++)n.onNext(t[e])}return Object.observe(t,e),function(){Object.unobserve(t,e)}})};var Er=function(t){function n(){t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return he},n}(Ke),Mr=new Er,Cr=Je.never=function(){return Mr},Sr=function(t){function n(n,e){this._o=n,this._keys=Object.keys(n),this._scheduler=e,t.call(this)}function e(t,n,e){return function(r,i){if(r<e.length){var o=e[r];t.onNext([o,n[o]]),i(r+1)}else t.onCompleted()}}return ne(n,t),n.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,e(t,this._o,this._keys))},n}(Ke);Je.pairs=function(t,n){return n||(n=De),new Sr(t,n)};var Nr=function(t){function n(n,e,r){this.start=n,this.rangeCount=e,this.scheduler=r,t.call(this)}function e(t,n,e){return function(r,i){n>r?(e.onNext(t+r),i(r+1)):e.onCompleted()}}return ne(n,t),n.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,e(this.start,this.rangeCount,t))},n}(Ke);Je.range=function(t,n,e){return xe(e)||(e=De),new Nr(t,n,e)};var Ar=function(t){function n(n,e,r){this.value=n,this.repeatCount=null==e?-1:e,this.scheduler=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new z(t,this);return n.run()},n}(Ke);z.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(n.onNext(e),t>0&&t--),0===t?n.onCompleted():void r(t)}var n=this.observer,e=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Je.repeat=function(t,n,e){return xe(e)||(e=De),new Ar(t,n,e)};var Dr=function(t){function n(n,e){this._value=n,this._scheduler=e,t.call(this)}function e(t,n){var e=n[0],r=n[1];return r.onNext(e),r.onCompleted(),he}return ne(n,t),n.prototype.subscribeCore=function(t){var n=[this._value,t];return this._scheduler===Ne?e(null,n):this._scheduler.schedule(n,e)},n}(Ke),kr=(Je["return"]=Je.just=function(t,n){return xe(n)||(n=Ne),new Dr(t,n)},function(t){function n(n,e){this._error=n,this._scheduler=e,t.call(this)}function e(t,n){var e=n[0],r=n[1];return r.onError(e),he}return ne(n,t),n.prototype.subscribeCore=function(t){var n=[this._error,t];return this._scheduler===Ne?e(null,n):this._scheduler.schedule(n,e)},n}(Ke)),qr=Je["throw"]=function(t,n){return xe(n)||(n=Ne),new kr(t,n)},Or=function(t){function n(n,e){this._resFn=n,this._obsFn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=he,e=on(this._resFn)();if(e===rn)return new ge(qr(e.e).subscribe(t),n);e&&(n=e);var r=on(this._obsFn)(e);return r===rn?new ge(qr(r.e).subscribe(t),n):new ge(r.subscribe(t),n)},n}(Ke);Je.using=function(t,n){return new Or(t,n)},We.amb=function(t){var n=this;return new Cs(function(e){function r(){o||(o=s,c.dispose())}function i(){o||(o=u,a.dispose())}var o,s="L",u="R",a=new de,c=new de;nn(t)&&(t=hr(t));var h=He(function(t){r(),o===s&&e.onNext(t)},function(t){r(),o===s&&e.onError(t)},function(){r(),o===s&&e.onCompleted()}),l=He(function(t){i(),o===u&&e.onNext(t)},function(t){i(),o===u&&e.onError(t)},function(){i(),o===u&&e.onCompleted()});return a.setDisposable(n.subscribe(h)),c.setDisposable(t.subscribe(l)),new ge(a,c)})},Je.amb=function(){var t,n=Cr();if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(t);for(var r=0;e>r;r++)t[r]=arguments[r]}for(var r=0,e=t.length;e>r;r++)n=U(n,t[r]);return n};var Tr=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new de,e=new ve;return e.setDisposable(n),n.setDisposable(this.source.subscribe(new Rr(t,e,this._fn))),e},n}(Ke),Rr=function(t){function n(n,e,r){this._o=n,this._s=e,this._fn=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._o.onNext(t)},n.prototype.completed=function(){return this._o.onCompleted()},n.prototype.error=function(t){var n=on(this._fn)(t);if(n===rn)return this._o.onError(n.e);nn(n)&&(n=hr(n));var e=new de;this._s.setDisposable(e),e.setDisposable(n.subscribe(this._o))},n}(Ge);We["catch"]=function(t){return en(t)?new Tr(this,t):Fr([this,t])};var Fr=Je["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}return sr(t).catchError()};We.combineLatest=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),Lr.apply(this,n)};var Pr=function(t){function n(n,e){this._params=n,this._cb=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){for(var n=this._params.length,e=new Array(n),r={hasValue:S(n,V),hasValueAll:!1,isDone:S(n,V),values:new Array(n)},i=0;n>i;i++){var o=this._params[i],s=new de;e[i]=s,nn(o)&&(o=hr(o)),s.setDisposable(o.subscribe(new jr(t,i,this._cb,r)))}return new me(e)},n}(Ke),jr=function(t){function n(n,e,r,i){this._o=n,this._i=e,this._cb=r,this._state=i,t.call(this)}function e(t){return function(n,e){return e!==t}}return ne(n,t),n.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every($t))){var n=on(this._cb).apply(null,this._state.values);if(n===rn)return this._o.onError(n.e);this._o.onNext(n)}else this._state.isDone.filter(e(this._i)).every($t)&&this._o.onCompleted()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every($t)&&this._o.onCompleted()},n}(Ge),Lr=Je.combineLatest=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];var r=en(n[t-1])?n.pop():B;return Array.isArray(n[0])&&(n=n[0]),new Pr(n,r)};We.concat=function(){for(var t=[],n=0,e=arguments.length;e>n;n++)t.push(arguments[n]);return t.unshift(this),Ur.apply(null,t)};var Ir=function(t){function n(n,e){this._s=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.i++,this._fn(this._s)},n}(Ge),zr=function(t){function n(n){this._sources=n,t.call(this)}function e(t,n){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var e=t.sources[t.i];nn(e)&&(e=hr(e));var r=new de;t.subscription.setDisposable(r),r.setDisposable(e.subscribe(new Ir(t,n)))}}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve,r=ce(Zt),i={o:t,i:0,subscription:n,disposable:r,sources:this._sources},o=Ne.scheduleRecursive(i,e);return new me([n,r,o])},n}(Ke),Ur=Je.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var n=0,e=arguments.length;e>n;n++)t[n]=arguments[n]}return new zr(t)};We.concatAll=function(){return this.merge(1)};var Vr=function(t){function n(n,e){this.source=n,this.maxConcurrent=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new se;return n.add(this.source.subscribe(new Br(t,this.maxConcurrent,n))),n},n}(Ke),Br=function(t){function n(n,e,r){this.o=n,this.max=e,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function e(n,e){this.parent=n,this.sad=e,t.call(this)}return ne(n,t),n.prototype.handleSubscribe=function(t){var n=new de;this.g.add(n),nn(t)&&(t=hr(t)),n.setDisposable(t.subscribe(new e(this,n)))},n.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},ne(e,t),e.prototype.next=function(t){this.parent.o.onNext(t)},e.prototype.error=function(t){this.parent.o.onError(t)},e.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},n}(Ge);We.merge=function(t){return"number"!=typeof t?Hr(this,t):new Vr(this,t)};var Hr=Je.merge=function(){var t,n,e=[],r=arguments.length;if(arguments[0])if(xe(arguments[0]))for(t=arguments[0],n=1;r>n;n++)e.push(arguments[n]);else for(t=Ne,n=0;r>n;n++)e.push(arguments[n]);else for(t=Ne,n=1;r>n;n++)e.push(arguments[n]);return Array.isArray(e[0])&&(e=e[0]),I(t,e).mergeAll()},Wr=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new se,e=new de;return n.add(e),e.setDisposable(this.source.subscribe(new Gr(t,n))),n},n}(Ke),Gr=function(t){function n(n,e){this.o=n,this.g=e,this.done=!1,t.call(this)}function e(n,e){this.parent=n,this.sad=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=new de;this.g.add(n),nn(t)&&(t=hr(t)),n.setDisposable(t.subscribe(new e(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},ne(e,t),e.prototype.next=function(t){this.parent.o.onNext(t)},e.prototype.error=function(t){this.parent.o.onError(t)},e.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},n}(Ge);We.mergeAll=function(){return new Wr(this)};var Yr=Xt.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Yr.prototype=Object.create(Error.prototype),Yr.prototype.name="CompositeError";var Xr=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new se,e=new de,r={isStopped:!1,errors:[],o:t};return n.add(e),e.setDisposable(this.source.subscribe(new Zr(n,r))),n},n}(Ke),Zr=function(t){function n(n,e){this._group=n,this._state=e,t.call(this)}function e(t,n){0===n.length?t.onCompleted():1===n.length?t.onError(n[0]):t.onError(new Yr(n))}function r(n,e,r){this._inner=n,this._group=e,this._state=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=new de;this._group.add(n),nn(t)&&(t=hr(t)),n.setDisposable(t.subscribe(new r(n,this._group,this._state)))},n.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&e(this._state.o,this._state.errors)},n.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&e(this._state.o,this._state.errors)},ne(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&e(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&e(this._state.o,this._state.errors)},n}(Ge);Je.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}var r=I(null,t);return new Xr(r)},We.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Kr([this,t])};var $r=function(t){function n(n){this.sources=n,t.call(this)}function e(t,n){if(t.pos<t.sources.length){var e=t.sources[t.pos++];nn(e)&&(e=hr(e));var r=new de;t.subscription.setDisposable(r),r.setDisposable(e.subscribe(new Jr(t,n)))}else t.o.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve,r={pos:0,subscription:n,o:t,sources:this.sources},i=Ne.scheduleRecursive(r,e);return new ge(n,i)},n}(Ke),Jr=function(t){function n(n,e){this._state=n,this._recurse=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._state.o.onNext(t)},n.prototype.error=function(){this._recurse(this._state)},n.prototype.completed=function(){this._recurse(this._state)},n}(Ge),Kr=Je.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}return new $r(t)},Qr=function(t){function n(n,e){this._s=n,this._o=nn(e)?hr(e):e,this._open=!1,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new de;n.setDisposable(this._s.subscribe(new ti(t,this))),nn(this._o)&&(this._o=hr(this._o));var e=new de;return e.setDisposable(this._o.subscribe(new ni(t,this,e))),new ge(n,e)},n}(Ke),ti=function(t){function n(n,e){this._o=n,this._p=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._p._open&&this._o.onNext(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},n}(Ge),ni=function(t){function n(n,e,r){this._o=n,this._p=e,this._r=r,t.call(this)}return ne(n,t),n.prototype.next=function(){this._p._open=!0,this._r.dispose()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.onCompleted=function(){this._r.dispose()},n}(Ge);We.skipUntil=function(t){return new Qr(this,t)};var ei=function(t){function n(n){this.source=n,t.call(this)}function e(t,n){this.o=t,this.inner=n,this.stopped=!1,this.latest=0,this.hasLatest=!1,Ge.call(this)}function r(t,n){this.parent=t,this.id=n,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve,r=this.source.subscribe(new e(t,n));return new ge(r,n)},ne(e,Ge),e.prototype.next=function(t){var n=new de,e=++this.latest;this.hasLatest=!0,this.inner.setDisposable(n),nn(t)&&(t=hr(t)),n.setDisposable(t.subscribe(new r(this,e)));
},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},ne(r,Ge),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},n}(Ke);We["switch"]=We.switchLatest=function(){return new ei(this)};var ri=function(t){function n(n,e){this.source=n,this.other=nn(e)?hr(e):e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return new ge(this.source.subscribe(t),this.other.subscribe(new ii(t)))},n}(Ke),ii=function(t){function n(n){this._o=n,t.call(this)}return ne(n,t),n.prototype.next=function(){this._o.onCompleted()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.onCompleted=Zt,n}(Ge);We.takeUntil=function(t){return new ri(this,t)};var oi=function(t){function n(n,e,r){this._s=n,this._ss=e,this._cb=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){for(var n=this._ss.length,e={hasValue:S(n,V),hasValueAll:!1,values:new Array(n)},r=this._ss.length,i=new Array(r+1),o=0;r>o;o++){var s=this._ss[o],u=new de;nn(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new si(t,o,e))),i[o]=u}var a=new de;return a.setDisposable(this._s.subscribe(new ui(t,this._cb,e))),i[r]=a,new me(i)},n}(Ke),si=function(t){function n(n,e,r){this._o=n,this._i=e,this._state=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every($t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=Zt,n}(Ge),ui=function(t){function n(n,e,r){this._o=n,this._cb=e,this._state=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=[t].concat(this._state.values);if(this._state.hasValueAll){var e=on(this._cb).apply(null,n);return e===rn?this._o.onError(e.e):void this._o.onNext(e)}},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];var r=en(n[t-1])?n.pop():B;return Array.isArray(n[0])&&(n=n[0]),new oi(this,n,r)};var ai=function(t){function n(n,e){this._s=n,this._cb=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){for(var n=this._s.length,e=new Array(n),r=S(n,V),i=S(n,H),o=0;n>o;o++){var s=this._s[o],u=new de;e[o]=u,nn(s)&&(s=hr(s)),u.setDisposable(s.subscribe(new ci(t,o,this,i,r)))}return new me(e)},n}(Ke),ci=function(t){function n(n,e,r,i,o){this._o=n,this._i=e,this._p=r,this._q=i,this._d=o,t.call(this)}function e(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(n,e){return e!==t}}return ne(n,t),n.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(e)){var n=this._q.map(r),o=on(this._p._cb).apply(null,n);if(o===rn)return this._o.onError(o.e);this._o.onNext(o)}else this._d.filter(i(this._i)).every($t)&&this._o.onCompleted()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._d[this._i]=!0,this._d.every($t)&&this._o.onCompleted()},n}(Ge);We.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];var r=en(n[t-1])?n.pop():B;Array.isArray(n[0])&&(n=n[0]);var i=this;return n.unshift(i),new ai(n,r)},Je.zip=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];Array.isArray(n[0])&&(n=en(n[1])?n[0].concat(n[1]):n[0]);var r=n.shift();return r.zip.apply(r,n)};var hi=function(t){function n(n,e){this.sources=n,this._cb=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){for(var n=this.sources,e=n.length,r=new Array(e),i={q:S(e,H),done:S(e,V),cb:this._cb,o:t},o=0;e>o;o++)!function(t){var e=n[t],o=new de;(_n(e)||bn(e))&&(e=br(e)),r[t]=o,o.setDisposable(e.subscribe(new li(i,t)))}(o);return new me(r)},n}(Ke),li=function(t){function n(n,e){this._s=n,this._i=e,t.call(this)}function e(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(n,e){return e!==t}}return ne(n,t),n.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(e)){var n=this._s.q.map(r),o=on(this._s.cb).apply(null,n);if(o===rn)return this._s.o.onError(o.e);this._s.o.onNext(o)}else this._s.done.filter(i(this._i)).every($t)&&this._s.o.onCompleted()},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every($t)&&this._s.o.onCompleted()},n}(Ge);We.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];var r=en(n[t-1])?n.pop():B,i=this;return n.unshift(i),new hi(n,r)},We.asObservable=function(){return new Cs(W(this),this)},We.bufferWithCount=function(t,n){return"number"!=typeof n&&(n=t),this.windowWithCount(t,n).flatMap(G).filter(Y)};var fi=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new pi(t))},n}(Ke),pi=function(t){function n(n){this._o=n,t.call(this)}return ne(n,t),n.prototype.next=function(t){t.accept(this._o)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.dematerialize=function(){return new fi(this)};var di=function(t){function n(n,e,r){this.source=n,this.keyFn=e,this.comparer=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new vi(t,this.keyFn,this.comparer))},n}(Ke),vi=function(t){function n(n,e,r){this.o=n,this.keyFn=e,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n,e=t;return en(this.keyFn)&&(e=on(this.keyFn)(t),e===rn)?this.o.onError(e.e):this.hasCurrentKey&&(n=on(this.comparer)(this.currentKey,e),n===rn)?this.o.onError(n.e):void(this.hasCurrentKey&&n||(this.hasCurrentKey=!0,this.currentKey=e,this.o.onNext(t)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},n}(Ge);We.distinctUntilChanged=function(t,n){return n||(n=Kt),new di(this,t,n)};var gi=function(t){function n(n,e,r,i){this.source=n,this._oN=e,this._oE=r,this._oC=i,t.call(this)}function e(t,n){this.o=t,this.t=!n._oN||en(n._oN)?He(n._oN||Zt,n._oE||Zt,n._oC||Zt):n._oN,this.isStopped=!1,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this))},ne(e,Ge),e.prototype.next=function(t){var n=on(this.t.onNext).call(this.t,t);n===rn&&this.o.onError(n.e),this.o.onNext(t)},e.prototype.error=function(t){var n=on(this.t.onError).call(this.t,t);return n===rn?this.o.onError(n.e):void this.o.onError(t)},e.prototype.completed=function(){var t=on(this.t.onCompleted).call(this.t);return t===rn?this.o.onError(t.e):void this.o.onCompleted()},n}(Ke);We["do"]=We.tap=We.doAction=function(t,n,e){return new gi(this,t,n,e)},We.doOnNext=We.tapOnNext=function(t,n){return this.tap("undefined"!=typeof n?function(e){t.call(n,e)}:t)},We.doOnError=We.tapOnError=function(t,n){return this.tap(Zt,"undefined"!=typeof n?function(e){t.call(n,e)}:t)},We.doOnCompleted=We.tapOnCompleted=function(t,n){return this.tap(Zt,null,"undefined"!=typeof n?function(){t.call(n)}:t)};var mi=function(t){function n(n,e,r){this.source=n,this._fn=wn(e,r,0),t.call(this)}function e(t,n){this.isDisposed=!1,this._s=t,this._fn=n}return ne(n,t),n.prototype.subscribeCore=function(t){var n=on(this.source.subscribe).call(this.source,t);return n===rn&&(this._fn(),h(n.e)),new e(n,this._fn)},e.prototype.dispose=function(){if(!this.isDisposed){var t=on(this._s.dispose).call(this._s);this._fn(),t===rn&&h(t.e)}},n}(Ke);We["finally"]=function(t,n){return new mi(this,t,n)};var yi=function(t){function n(n){this.source=n,t.call(this)}function e(t){this.o=t,this.isStopped=!1}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t))},e.prototype.onNext=Zt,e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},n}(Ke);We.ignoreElements=function(){return new yi(this)};var bi=function(t){function n(n,e){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new _i(t))},n}(Ke),_i=function(t){function n(n){this._o=n,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._o.onNext(ze(t))},n.prototype.error=function(t){this._o.onNext(Ue(t)),this._o.onCompleted()},n.prototype.completed=function(){this._o.onNext(Ve()),this._o.onCompleted()},n}(Ge);We.materialize=function(){return new bi(this)},We.repeat=function(t){return ir(this,t).concat()},We.retry=function(t){return ir(this,t).catchError()},We.retryWhen=function(t){return ir(this).catchErrorWhen(t)};var wi=function(t){function n(n,e,r,i){this.source=n,this.accumulator=e,this.hasSeed=r,this.seed=i,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new xi(t,this))},n}(Ke),xi=function(t){function n(n,e){this._o=n,this._p=e,this._fn=e.accumulator,this._hs=e.hasSeed,this._s=e.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=on(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?on(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===rn?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},n}(Ge);We.scan=function(){var t,n=!1,e=arguments[0];return 2===arguments.length&&(n=!0,t=arguments[1]),new wi(this,e,n,t)};var Ei=function(t){function n(n,e){this.source=n,this._c=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Mi(t,this._c))},n}(Ke),Mi=function(t){function n(n,e){this._o=n,this._c=e,this._q=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.skipLast=function(t){if(0>t)throw new pn;return new Ei(this,t)},We.startWith=function(){var t,n=0;arguments.length&&xe(arguments[0])?(t=arguments[0],n=1):t=Ne;for(var e=[],r=n,i=arguments.length;i>r;r++)e.push(arguments[r]);return sr([wr(e,t),this]).concat()};var Ci=function(t){function n(n,e){this._o=n,this._c=e,this._q=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},n}(Ge);We.takeLast=function(t){if(0>t)throw new pn;var n=this;return new Cs(function(e){return n.subscribe(new Ci(e,t))},n)};var Si=function(t){function n(n,e){this._o=n,this._c=e,this._q=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},n}(Ge);We.takeLastBuffer=function(t){if(0>t)throw new pn;var n=this;return new Cs(function(e){return n.subscribe(new Si(e,t))},n)},We.windowWithCount=function(t,n){var e=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new pn;if(null==n&&(n=t),+n||(n=0),Math.abs(n)===1/0&&(n=0),0>=n)throw new pn;return new Cs(function(r){function i(){var t=new Ds;a.push(t),r.onNext(re(t,s))}var o=new de,s=new ye(o),u=0,a=[];return i(),o.setDisposable(e.subscribe(function(e){for(var r=0,o=a.length;o>r;r++)a[r].onNext(e);var s=u-t+1;s>=0&&s%n===0&&a.shift().onCompleted(),++u%n===0&&i()},function(t){for(;a.length>0;)a.shift().onError(t);r.onError(t)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),s},e)},We.selectConcat=We.concatMap=function(t,n,e){return en(t)&&en(n)?this.concatMap(function(e,r){var i=t(e,r);return nn(i)&&(i=hr(i)),(_n(i)||bn(i))&&(i=br(i)),i.map(function(t,i){return n(e,t,r,i)})}):en(t)?X(this,t,e):X(this,function(){return t})},We.concatMapObserver=We.selectConcatObserver=function(t,n,e,r){var i=this,o=wn(t,r,2),s=wn(n,r,1),u=wn(e,r,0);return new Cs(function(t){var n=0;return i.subscribe(function(e){var r;try{r=o(e,n++)}catch(i){return void t.onError(i)}nn(r)&&(r=hr(r)),t.onNext(r)},function(n){var e;try{e=s(n)}catch(r){return void t.onError(r)}nn(e)&&(e=hr(e)),t.onNext(e),t.onCompleted()},function(){var n;try{n=u()}catch(e){return void t.onError(e)}nn(n)&&(n=hr(n)),t.onNext(n),t.onCompleted()})},this).concatAll()};var Ni=function(t){function n(n,e){this._o=n,this._d=e,this._f=!1,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._f=!0,this._o.onNext(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},n}(Ge);We.defaultIfEmpty=function(t){var n=this;return t===s&&(t=null),new Cs(function(e){return n.subscribe(new Ni(e,t))},n)},$.prototype.push=function(t){var n=-1===Z(this.set,t,this.comparer);return n&&this.set.push(t),n};var Ai=function(t){function n(n,e,r){this.source=n,this._keyFn=e,this._cmpFn=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Di(t,this._keyFn,this._cmpFn))},n}(Ke),Di=function(t){function n(n,e,r){this._o=n,this._keyFn=e,this._h=new $(r),t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=t;return en(this._keyFn)&&(n=on(this._keyFn)(t),n===rn)?this._o.onError(n.e):void(this._h.push(n)&&this._o.onNext(t))},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.distinct=function(t,n){return n||(n=Kt),new Ai(this,t,n)},We.groupBy=function(t,n){return this.groupByUntil(t,n,Cr)},We.groupByUntil=function(t,n,e){var r=this;return new Cs(function(i){var o=new Wo,u=new se,a=new ye(u),c=function(t){return function(n){n.onError(t)}};return u.add(r.subscribe(function(r){var h=on(t)(r);if(h===rn)return o.forEach(c(h.e)),i.onError(h.e);var l=!1,f=o.get(h);if(f===s&&(f=new Ds,o.set(h,f),l=!0),l){var p=new As(h,f,a),d=new As(h,f),v=on(e)(d);if(v===rn)return o.forEach(c(v.e)),i.onError(v.e);i.onNext(p);var g=new de;u.add(g),g.setDisposable(v.take(1).subscribe(Zt,function(t){o.forEach(c(t)),i.onError(t)},function(){o["delete"](h)&&f.onCompleted(),u.remove(g)}))}var m=r;return en(n)&&(m=on(n)(r),m===rn)?(o.forEach(c(m.e)),i.onError(m.e)):void f.onNext(m)},function(t){o.forEach(c(t)),i.onError(t)},function(){o.forEach(function(t){t.onCompleted()}),i.onCompleted()})),a},r)};var ki=function(t){function n(n,e,r){this.source=n,this.selector=wn(e,r,3),t.call(this)}function e(t,n){return function(e,r,i){return t.call(this,n.selector(e,r,i),r,i)}}function r(t,n,e){this.o=t,this.selector=n,this.source=e,this.i=0,Ge.call(this)}return ne(n,t),n.prototype.internalMap=function(t,r){return new n(this.source,e(t,this),r)},n.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},ne(r,Ge),r.prototype.next=function(t){var n=on(this.selector)(t,this.i++,this.source);return n===rn?this.o.onError(n.e):void this.o.onNext(n)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},n}(Ke);We.map=We.select=function(t,n){var e="function"==typeof t?t:function(){return t};return this instanceof ki?this.internalMap(e,n):new ki(this,e,n)},We.pluck=function(){var t=arguments.length,n=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var e=0;t>e;e++)n[e]=arguments[e];return this.map(J(n,t))},We.flatMap=We.selectMany=function(t,n,e){return new Qe(this,t,n,e).mergeAll()},We.flatMapObserver=We.selectManyObserver=function(t,n,e,r){var i=this;return new Cs(function(o){var s=0;return i.subscribe(function(n){var e;try{e=t.call(r,n,s++)}catch(i){return void o.onError(i)}nn(e)&&(e=hr(e)),o.onNext(e)},function(t){var e;try{e=n.call(r,t)}catch(i){return void o.onError(i)}nn(e)&&(e=hr(e)),o.onNext(e),o.onCompleted()},function(){var t;try{t=e.call(r)}catch(n){return void o.onError(n)}nn(t)&&(t=hr(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},Xt.Observable.prototype.flatMapLatest=function(t,n,e){return new Qe(this,t,n,e).switchLatest()};var qi=function(t){function n(n,e){this.source=n,this._count=e,t.call(this)}function e(t,n){this._o=t,this._r=n,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},ne(e,Ge),e.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},n}(Ke);We.skip=function(t){if(0>t)throw new pn;return new qi(this,t)};var Oi=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Ti(t,this))},n}(Ke),Ti=function(t){function n(n,e){this._o=n,this._p=e,this._i=0,this._r=!1,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(!this._r){var n=on(this._p._fn)(t,this._i++,this._p);if(n===rn)return this._o.onError(n.e);this._r=!n}this._r&&this._o.onNext(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.skipWhile=function(t,n){var e=wn(t,n,3);return new Oi(this,e)};var Ri=function(t){function n(n,e){this.source=n,this._count=e,t.call(this)}function e(t,n){this._o=t,this._c=n,this._r=n,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new e(t,this._count))},ne(e,Ge),e.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},n}(Ke);We.take=function(t,n){if(0>t)throw new pn;return 0===t?gr(n):new Ri(this,t)};var Fi=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Pi(t,this))},n}(Ke),Pi=function(t){function n(n,e){this._o=n,this._p=e,this._i=0,this._r=!0,t.call(this)}return ne(n,t),n.prototype.next=function(t){return this._r&&(this._r=on(this._p._fn)(t,this._i++,this._p),this._r===rn)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.takeWhile=function(t,n){var e=wn(t,n,3);return new Fi(this,e)};var ji=function(t){function n(n,e,r){this.source=n,this.predicate=wn(e,r,3),t.call(this)}function e(t,n){return function(e,r,i){return n.predicate(e,r,i)&&t.call(this,e,r,i)}}function r(t,n,e){this.o=t,this.predicate=n,this.source=e,this.i=0,Ge.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},n.prototype.internalFilter=function(t,r){return new n(this.source,e(t,this),r)},ne(r,Ge),r.prototype.next=function(t){var n=on(this.predicate)(t,this.i++,this.source);return n===rn?this.o.onError(n.e):void(n&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},n}(Ke);We.filter=We.where=function(t,n){return this instanceof ji?this.internalFilter(t,n):new ji(this,t,n)};var Li=function(t){function n(n,e,r){this.source=n,this._k=e,this._c=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Ii(t,this._k,this._c))},n}(Ke),Ii=function(t){function n(n,e,r){this._o=n,this._k=e,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._k)(t);if(n===rn)return this._o.onError(n.e);var e=0;if(this._hv){if(e=on(this._c)(n,this._v),e===rn)return this._o.onError(e.e)}else this._hv=!0,this._v=n;e>0&&(this._v=n,this._l=[]),e>=0&&this._l.push(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},n}(Ge),zi=function(t){function n(n,e,r,i){this.source=n,this.accumulator=e,this.hasSeed=r,this.seed=i,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Ui(t,this))},n}(Ke),Ui=function(t){function n(n,e){this._o=n,this._p=e,this._fn=e.accumulator,this._hs=e.hasSeed,this._s=e.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=on(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?on(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===rn?this._o.onError(this._a.e):void this._i++},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new ln),this._o.onCompleted()},n}(Ge);We.reduce=function(){var t,n=!1,e=arguments[0];return 2===arguments.length&&(n=!0,t=arguments[1]),new zi(this,e,n,t)};var Vi=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Bi(t,this._fn,this.source))},n}(Ke),Bi=function(t){function n(n,e,r){this._o=n,this._fn=e,this._s=r,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._fn)(t,this._i++,this._s);return n===rn?this._o.onError(n.e):void(Boolean(n)&&(this._o.onNext(!0),this._o.onCompleted()))},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},n}(Ge);We.some=function(t,n){var e=wn(t,n,3);return new Vi(this,e)};var Hi=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Wi(t))},n}(Ke),Wi=function(t){function n(n){this._o=n,t.call(this)}return ne(n,t),n.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},n}(Ge);We.isEmpty=function(){return new Hi(this)};var Gi=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Yi(t,this._fn,this.source))},n}(Ke),Yi=function(t){function n(n,e,r){this._o=n,this._fn=e,this._s=r,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._fn)(t,this._i++,this._s);return n===rn?this._o.onError(n.e):void(Boolean(n)||(this._o.onNext(!1),this._o.onCompleted()))},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},n}(Ge);We.every=function(t,n){var e=wn(t,n,3);return new Gi(this,e)};var Xi=function(t){function n(n,e,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=n,this._elem=e,this._n=i,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),he):this.source.subscribe(new Zi(t,this._elem,this._n))},n}(Ke),Zi=function(t){function n(n,e,r){this._o=n,this._elem=e,this._n=r,this._i=0,t.call(this)}function e(t,n){return 0===t&&0===n||t===n||isNaN(t)&&isNaN(n)}return ne(n,t),n.prototype.next=function(t){this._i++>=this._n&&e(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},n}(Ge);We.includes=function(t,n){return new Xi(this,t,n)};var $i=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Ji(t,this._fn,this.source))},n}(Ke),Ji=function(t){function n(n,e,r){this._o=n,this._fn=e,this._s=r,this._i=0,this._c=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(this._fn){var n=on(this._fn)(t,this._i++,this._s);if(n===rn)return this._o.onError(n.e);Boolean(n)&&this._c++}else this._c++},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},n}(Ge);We.count=function(t,n){var e=wn(t,n,3);return new $i(this,e)};var Ki=function(t){function n(n,e,r){this.source=n,this._e=e,this._n=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),he):this.source.subscribe(new Qi(t,this._e,this._n))},n}(Ke),Qi=function(t){function n(n,e,r){this._o=n,this._e=e,this._n=r,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},n}(Ge);We.indexOf=function(t,n){var e=+n||0;return Math.abs(e)===1/0&&(e=0),new Ki(this,t,e)};var to=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new no(t,this._fn,this.source))},n}(Ke),no=function(t){function n(n,e,r){this._o=n,this._fn=e,this._s=r,this._i=0,this._c=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(this._fn){var n=on(this._fn)(t,this._i++,this._s);if(n===rn)return this._o.onError(n.e);this._c+=n}else this._c+=t},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},n}(Ge);We.sum=function(t,n){var e=wn(t,n,3);return new to(this,e)},We.minBy=function(t,n){return n||(n=Qt),new Li(this,t,function(t,e){return-1*n(t,e)})},We.min=function(t){return this.minBy($t,t).map(function(t){return K(t)})},We.maxBy=function(t,n){return n||(n=Qt),new Li(this,t,n)},We.max=function(t){return this.maxBy($t,t).map(function(t){return K(t)})};var eo=function(t){function n(n,e){this.source=n,this._fn=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new ro(t,this._fn,this.source))},n}(Ke),ro=function(t){function n(n,e,r){this._o=n,this._fn=e,this._s=r,this._c=0,this._t=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(this._fn){var n=on(this._fn)(t,this._c++,this._s);if(n===rn)return this._o.onError(n.e);this._t+=n}else this._c++,this._t+=t},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){return 0===this._c?this._o.onError(new ln):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},n}(Ge);We.average=function(t,n){var e,r=this;return en(t)&&(e=wn(t,n,3)),new eo(r,e)},We.sequenceEqual=function(t,n){var e=this;return n||(n=Kt),new Cs(function(r){var i=!1,o=!1,s=[],u=[],a=e.subscribe(function(t){if(u.length>0){var e=u.shift(),i=on(n)(e,t);if(i===rn)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(_n(t)||bn(t))&&(t=br(t)),nn(t)&&(t=hr(t));var c=t.subscribe(function(t){if(s.length>0){var e=s.shift(),o=on(n)(e,t);if(o===rn)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new ge(a,c)},e)};var io=function(t){function n(n,e,r){this.source=n,this._i=e,this._d=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new oo(t,this._i,this._d))},n}(Ke),oo=function(t){function n(n,e,r){this._o=n,this._i=e,this._d=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._d===s?this._o.onError(new pn):(this._o.onNext(this._d),this._o.onCompleted())},n}(Ge);We.elementAt=function(t,n){if(0>t)throw new pn;return new io(this,t,n)};var so=function(t){function n(n,e,r){this._o=n,this._obj=e,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=!1;if(this._obj.predicate){var e=on(this._obj.predicate)(t,this._i++,this._s);if(e===rn)return this._o.onError(e.e);Boolean(e)&&(n=!0)}else this._obj.predicate||(n=!0);if(n){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new ln):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Ge);We.single=function(t,n){var e={},r=this;if(e="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},en(e.predicate)){var i=e.predicate;e.predicate=wn(i,e.thisArg,3)}return new Cs(function(t){return r.subscribe(new so(t,e,r))},r)};var uo=function(t){function n(n,e){this.source=n,this._obj=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new ao(t,this._obj,this.source))},n}(Ke),ao=function(t){function n(n,e,r){this._o=n,this._obj=e,this._s=r,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(this._obj.predicate){var n=on(this._obj.predicate)(t,this._i++,this._s);if(n===rn)return this._o.onError(n.e);Boolean(n)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._obj.defaultValue===s?this._o.onError(new ln):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Ge);We.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},en(t.predicate)){var n=t.predicate;t.predicate=wn(n,t.thisArg,3)}return new uo(this,t)};var co=function(t){function n(n,e){this.source=n,this._obj=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new ho(t,this._obj,this.source))},n}(Ke),ho=function(t){function n(n,e,r){this._o=n,this._obj=e,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=!1;if(this._obj.predicate){var e=on(this._obj.predicate)(t,this._i++,this._s);if(e===rn)return this._o.onError(e.e);Boolean(e)&&(n=!0)}else this._obj.predicate||(n=!0);n&&(this._hv=!0,this._v=t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new ln):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Ge);We.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},en(t.predicate)){var n=t.predicate;t.predicate=wn(n,t.thisArg,3)}return new co(this,t)};var lo=function(t){function n(n,e,r,i){this._o=n,this._s=e,this._cb=r,this._y=i,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._cb)(t,this._i,this._s);
return n===rn?this._o.onError(n.e):void(n?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},n}(Ge);We.find=function(t,n){return Q(this,t,n,!1)},We.findIndex=function(t,n){return Q(this,t,n,!0)};var fo=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t))},n}(Ke),po=function(t){function n(n){this._o=n,this._s=new Yt.Set,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._s.add(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},n}(Ge);We.toSet=function(){if("undefined"==typeof Yt.Set)throw new TypeError;return new fo(this)};var vo=function(t){function n(n,e,r){this.source=n,this._k=e,this._e=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new go(t,this._k,this._e))},n}(Ke),go=function(t){function n(n,e,r){this._o=n,this._k=e,this._e=r,this._m=new Yt.Map,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._k)(t);if(n===rn)return this._o.onError(n.e);var e=t;return this._e&&(e=on(this._e)(t),e===rn)?this._o.onError(e.e):void this._m.set(n,e)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},n}(Ge);We.toMap=function(t,n){if("undefined"==typeof Yt.Map)throw new TypeError;return new vo(this,t,n)};var mo=function(t){function n(n,e,r){this.source=n,this._b=e,this._e=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new yo(t,this._b,this._e))},n}(Ke),yo=function(t){function n(n,e,r){this._o=n,this._b=e,this._e=r,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.slice=function(t,n){var e=t||0;if(0>e)throw new Xt.ArgumentOutOfRangeError;if("number"==typeof n&&e>n)throw new Xt.ArgumentOutOfRangeError;return new mo(this,e,n)};var bo=function(t){function n(n,e,r){this.source=n,this._e=e,this._n=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),he):this.source.subscribe(new _o(t,this._e,this._n))},n}(Ke),_o=function(t){function n(n,e,r){this._o=n,this._e=e,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},n}(Ge);We.lastIndexOf=function(t,n){var e=+n||0;return Math.abs(e)===1/0&&(e=0),new bo(this,t,e)},Je.wrap=function(t){function n(){return Je.spawn.call(this,t.apply(this,arguments))}return n.__generatorFunction__=t,n};var wo=Je.spawn=function(){for(var t=arguments[0],n=this,e=[],r=1,i=arguments.length;i>r;r++)e.push(arguments[r]);return new Cs(function(r){function i(n){var e=on(t.next).call(t,n);return e===rn?r.onError(e.e):void s(e)}function o(n){var e=on(t.next).call(t,n);return e===rn?r.onError(e.e):void s(e)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var e=tt.call(n,t.value),s=null,a=!1;Je.isObservable(e)?u.add(e.subscribe(function(t){a=!0,s=t},o,function(){a&&i(s)})):o(new TypeError("type not supported"))}var u=new se;return en(t)&&(t=t.apply(n,e)),t&&en(t.next)?(i(),u):(r.onNext(t),r.onCompleted())})};Je.start=function(t,n,e){return xo(t,n,e)()};var xo=Je.toAsync=function(t,n,e){return xe(e)||(e=Re),function(){var r=arguments,i=new ks;return e.schedule(null,function(){var e;try{e=t.apply(n,r)}catch(o){return void i.onError(o)}i.onNext(e),i.onCompleted()}),i.asObservable()}};Je.fromCallback=function(t,n,e){return function(){"undefined"==typeof n&&(n=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return ut(t,n,e,i)}},Je.fromNodeCallback=function(t,n,e){return function(){"undefined"==typeof n&&(n=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return ct(t,n,e,i)}},ft.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Xt.config.useNativeEvents=!1;var Eo=function(t){function n(n,e,r){this._el=n,this._n=e,this._fn=r,t.call(this)}function e(t,n){return function(){var e=arguments[0];return en(n)&&(e=on(n).apply(null,arguments),e===rn)?t.onError(e.e):void t.onNext(e)}}return ne(n,t),n.prototype.subscribeCore=function(t){return pt(this._el,this._n,e(t,this._fn))},n}(Ke);Je.fromEvent=function(t,n,e){return t.addListener?Co(function(e){t.addListener(n,e)},function(e){t.removeListener(n,e)},e):Xt.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Eo(t,n,e).publish().refCount():Co(function(e){t.on(n,e)},function(e){t.off(n,e)},e)};var Mo=function(t){function n(n,e,r){this._add=n,this._del=e,this._fn=r,t.call(this)}function e(t,n){return function(){var e=arguments[0];return en(n)&&(e=on(n).apply(null,arguments),e===rn)?t.onError(e.e):void t.onNext(e)}}function r(t,n,e){this._del=t,this._fn=n,this._ret=e,this.isDisposed=!1}return ne(n,t),n.prototype.subscribeCore=function(t){var n=e(t,this._fn),i=this._add(n);return new r(this._del,n,i)},r.prototype.dispose=function(){this.isDisposed||en(this._del)&&this._del(this._fn,this._ret)},n}(Ke),Co=Je.fromEventPattern=function(t,n,e){return new Mo(t,n,e).publish().refCount()};Je.startAsync=function(t){var n=on(t)();return n===rn?qr(n.e):hr(n)};var So=function(t){function n(n,e){this.source=n,this.controller=new Ds,e&&e.subscribe?this.pauser=this.controller.merge(e):this.pauser=this.controller,t.call(this)}return ne(n,t),n.prototype._subscribe=function(t){var n=this.source.publish(),e=n.subscribe(t),r=he,i=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=n.connect():(r.dispose(),r=he)});return new me([e,r,i])},n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(Je);We.pausable=function(t){return new So(this,t)};var No=function(t){function n(n,e){this.source=n,this.controller=new Ds,e&&e.subscribe?this.pauser=this.controller.merge(e):this.pauser=this.controller,t.call(this)}return ne(n,t),n.prototype._subscribe=function(t){function n(){for(;r.length>0;)t.onNext(r.shift())}var e,r=[],i=dt(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,n){return{data:t,shouldFire:n}}).subscribe(function(i){e!==s&&i.shouldFire!==e?(e=i.shouldFire,i.shouldFire&&n()):(e=i.shouldFire,i.shouldFire?t.onNext(i.data):r.push(i.data))},function(e){n(),t.onError(e)},function(){n(),t.onCompleted()});return i},n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(Je);We.pausableBuffered=function(t){return new No(this,t)};var Ao=function(t){function n(n,e,r){t.call(this),this.subject=new Do(e,r),this.source=n.multicast(this.subject).refCount()}return ne(n,t),n.prototype._subscribe=function(t){return this.source.subscribe(t)},n.prototype.request=function(t){return this.subject.request(null==t?-1:t)},n}(Je),Do=function(t){function n(n,e){null==n&&(n=!0),t.call(this),this.subject=new Ds,this.enableQueue=n,this.queue=n?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=e||De}return ne(n,t),ee(n.prototype,Be,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Pe.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Pe.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Pe.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var n=this.queue.shift();n.accept(this.subject),"N"===n.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var n=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,e){var r=n._processRequest(e),i=n.hasCompleted||n.hasFailed;return!i&&r>0?(n.requestedCount=r,ce(function(){n.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),n}(Je);We.controlled=function(t,n){return t&&xe(t)&&(n=t,t=!0),null==t&&(t=!0),new Ao(this,t,n)};var ko=function(t){function n(n){t.call(this),this.source=n}function e(t,n){n.source.request(1)}ne(n,t),n.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new ge(this.subscription,Re.schedule(this,e))};var r=function(t){function e(n,e,r){t.call(this),this.observer=n,this.observable=e,this.cancel=r,this.scheduleDisposable=null}function r(t,n){n.observable.source.request(1)}return ne(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Re.schedule(this,r)},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Ge);return n}(Je);Ao.prototype.stopAndWait=function(){return new ko(this)};var qo=function(t){function n(n,e){t.call(this),this.source=n,this.windowSize=e}function e(t,n){n.source.request(n.windowSize)}ne(n,t),n.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new ge(this.subscription,Re.schedule(this,e))};var r=function(t){function n(n,e,r){this.observer=n,this.observable=e,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function e(t,n){n.observable.source.request(n.observable.windowSize)}return ne(n,t),n.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},n.prototype.error=function(t){this.observer.onError(t),this.dispose()},n.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Re.schedule(this,e))},n.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},n}(Ge);return n}(Je);Ao.prototype.windowed=function(t){return new qo(this,t)},We.pipe=function(t){function n(){e.resume()}var e=this.pausableBuffered();return t.addListener("drain",n),e.subscribe(function(n){!t.write(String(n))&&e.pause()},function(n){t.emit("error",n)},function(){!t._isStdio&&t.end(),t.removeListener("drain",n)}),e.resume(),t};var Oo=function(t){function n(n,e,r){this.source=n,this._fn1=e,this._fn2=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=this.source.multicast(this._fn1());return new ge(this._fn2(n).subscribe(t),n.connect())},n}(Ke);We.multicast=function(t,n){return en(t)?new Oo(this,t,n):new Fo(this,t)},We.publish=function(t){return t&&en(t)?this.multicast(function(){return new Ds},t):this.multicast(new Ds)},We.share=function(){return this.publish().refCount()},We.publishLast=function(t){return t&&en(t)?this.multicast(function(){return new ks},t):this.multicast(new ks)},We.publishValue=function(t,n){return 2===arguments.length?this.multicast(function(){return new qs(n)},t):this.multicast(new qs(t))},We.shareValue=function(t){return this.publishValue(t).refCount()},We.replay=function(t,n,e,r){return t&&en(t)?this.multicast(function(){return new Os(n,e,r)},t):this.multicast(new Os(n,e,r))},We.shareReplay=function(t,n,e){return this.replay(null,t,n,e).refCount()};var To=function(t,n){this._s=t,this._o=n};To.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var Ro=function(t){function n(n){this.source=n,this._count=0,this._connectableSubscription=null,t.call(this)}function e(t,n){this._p=t,this._s=n,this.isDisposed=!1}return ne(n,t),n.prototype.subscribeCore=function(t){var n=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new e(this,n)},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},n}(Ke),Fo=Xt.ConnectableObservable=function(t){function n(n,e){this.source=n,this._connection=null,this._source=n.asObservable(),this._subject=e,t.call(this)}function e(t,n){this._p=t,this._s=n}return ne(n,t),e.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},n.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new e(this,t)}return this._connection},n.prototype._subscribe=function(t){return this._subject.subscribe(t)},n.prototype.refCount=function(){return new Ro(this)},n}(Je);We.singleInstance=function(){function t(){return r||(r=!0,n=e["finally"](function(){r=!1}).publish().refCount()),n}var n,e=this,r=!1;return new Cs(function(n){return t().subscribe(n)})},We.join=function(t,n,e,r){var i=this;return new Cs(function(o){var s=new se,u=!1,a=!1,c=0,h=0,l=new Wo,f=new Wo,p=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var e=c++,i=new de;l.set(e,t),s.add(i);var a=on(n)(t);return a===rn?o.onError(a.e):(i.setDisposable(a.take(1).subscribe(Zt,p,function(){l["delete"](e)&&0===l.size&&u&&o.onCompleted(),s.remove(i)})),void f.forEach(function(n){var e=on(r)(t,n);return e===rn?o.onError(e.e):void o.onNext(e)}))},p,function(){u=!0,(a||0===l.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var n=h++,i=new de;f.set(n,t),s.add(i);var u=on(e)(t);return u===rn?o.onError(u.e):(i.setDisposable(u.take(1).subscribe(Zt,p,function(){f["delete"](n)&&0===f.size&&a&&o.onCompleted(),s.remove(i)})),void l.forEach(function(n){var e=on(r)(n,t);return e===rn?o.onError(e.e):void o.onNext(e)}))},p,function(){a=!0,(u||0===f.size)&&o.onCompleted()})),s},i)},We.groupJoin=function(t,n,e,r){var i=this;return new Cs(function(o){function s(t){}var u=new se,a=new ye(u),c=new Wo,h=new Wo,l=0,f=0,s=function(t){return function(n){n.onError(t)}};return u.add(i.subscribe(function(t){var e=new Ds,i=l++;c.set(i,e);var f=on(r)(t,re(e,a));if(f===rn)return c.forEach(s(f.e)),o.onError(f.e);o.onNext(f),h.forEach(function(t){e.onNext(t)});var p=new de;u.add(p);var d=on(n)(t);return d===rn?(c.forEach(s(d.e)),o.onError(d.e)):void p.setDisposable(d.take(1).subscribe(Zt,function(t){c.forEach(s(t)),o.onError(t)},function(){c["delete"](i)&&e.onCompleted(),u.remove(p)}))},function(t){c.forEach(s(t)),o.onError(t)},function(){o.onCompleted()})),u.add(t.subscribe(function(t){var n=f++;h.set(n,t);var r=new de;u.add(r);var i=on(e)(t);return i===rn?(c.forEach(s(i.e)),o.onError(i.e)):(r.setDisposable(i.take(1).subscribe(Zt,function(t){c.forEach(s(t)),o.onError(t)},function(){h["delete"](n),u.remove(r)})),void c.forEach(function(n){n.onNext(t)}))},function(t){c.forEach(s(t)),o.onError(t)})),a},i)},We.buffer=function(){return this.window.apply(this,arguments).flatMap(G)},We.window=function(t,n){return 1===arguments.length&&"function"!=typeof arguments[0]?gt.call(this,t):"function"==typeof t?mt.call(this,t):vt.call(this,t,n)};var Po=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new jo(t))},n}(Ke),jo=function(t){function n(t){this._o=t,this._p=null,this._hp=!1}return ne(n,t),n.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.pairwise=function(){return new Po(this)},We.partition=function(t,n){var e=wn(t,n,3);return[this.filter(t,n),this.filter(function(t,n,r){return!e(t,n,r)})]};var Lo=function(t){function n(t,n){this.c=t,this.s=n}return ne(n,t),n.prototype[mn]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},n}(tr);We.letBind=We.let=function(t){return t(this)},Je["if"]=function(t,n,e){return pr(function(){return e||(e=gr()),nn(n)&&(n=hr(n)),nn(e)&&(e=hr(e)),"function"==typeof e.now&&(e=gr(e)),t()?n:e})},Je["for"]=Je.forIn=function(t,n,e){return sr(t,n,e).concat()};var Io=Je["while"]=Je.whileDo=function(t,n){return nn(n)&&(n=hr(n)),yt(t,n).concat()};We.doWhile=function(t){return Ur([this,Io(t,this)])},Je["case"]=function(t,n,e){return pr(function(){nn(e)&&(e=hr(e)),e||(e=gr()),xe(e)&&(e=gr(e));var r=n[t()];return nn(r)&&(r=hr(r)),r||e})};var zo=function(t){function n(n,e,r){this.source=n,this._fn=e,this._scheduler=r,t.call(this)}function e(t,n){var e,r=t[0],i=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);e=r.q.shift();var o=new de;r.d.add(o),o.setDisposable(e.subscribe(new Uo(r,i,o))),n([r,i])}return ne(n,t),n.prototype._ensureActive=function(t){var n=!1;t.q.length>0&&(n=!t.isAcquired,t.isAcquired=!0),n&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],e))},n.prototype.subscribeCore=function(t){var n=new ve,e=new se(n),r={q:[],m:n,d:e,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),e},n}(Ke),Uo=function(t){function n(n,e,r){this._s=n,this._p=e,this._m1=r,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._s.o.onNext(t);var n=on(this._p._fn)(t);return n===rn?this._s.o.onError(n.e):(this._s.q.push(n),this._s.activeCount++,void this._p._ensureActive(this._s))},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},n}(Ge);We.expand=function(t,n){return xe(n)||(n=De),new zo(this,t,n)};var Vo=function(t){function n(n,e){this._sources=n,this._cb=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),he;for(var n=this._sources.length,e={finished:!1,hasResults:new Array(n),hasCompleted:new Array(n),results:new Array(n)},r=new se,i=0,o=this._sources.length;o>i;i++){var s=this._sources[i];nn(s)&&(s=hr(s)),r.add(s.subscribe(new Bo(t,e,i,this._cb,r)))}return r},n}(Ke),Bo=function(t){function n(n,e,r,i,o){this._o=n,this._s=e,this._i=r,this._cb=i,this._subs=o,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},n.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},n.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var n=on(this._cb).apply(null,this._s.results);if(n===rn)return this._o.onError(n.e);this._o.onNext(n),this._o.onCompleted()}},n}(Ge);Je.forkJoin=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];var r=en(n[t-1])?n.pop():B;return Array.isArray(n[0])&&(n=n[0]),new Vo(n,r)},We.forkJoin=function(){for(var t=arguments.length,n=new Array(t),e=0;t>e;e++)n[e]=arguments[e];return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),Je.forkJoin.apply(null,n)},We.manySelect=We.extend=function(t,n){xe(n)||(n=Xt.Scheduler.immediate);var e=this;return pr(function(){var r;return e.map(function(t){var n=new Ho(t);return r&&r.onNext(t),r=n,n}).tap(Zt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(n).map(t)},e)};var Ho=function(t){function n(n){t.call(this),this.head=n,this.tail=new ks}return ne(n,t),ee(n.prototype,Be,{_subscribe:function(t){var n=new se;return n.add(De.schedule(this,function(e,r){t.onNext(r.head),n.add(r.tail.mergeAll().subscribe(t))})),n},onCompleted:function(){this.onNext(Je.empty())},onError:function(t){this.onNext(Je["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),n}(Je),Wo=Yt.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype["delete"]=function(t){var n=this._keys.indexOf(t);return-1===n?!1:(this._values.splice(n,1),this._keys.splice(n,1),this.size--,!0)},t.prototype.get=function(t){var n=this._keys.indexOf(t);return-1===n?s:this._values[n]},t.prototype.set=function(t,n){var e=this._keys.indexOf(t);return-1===e?(this._keys.push(t),this._values.push(n),this.size++):this._values[e]=n,this},t.prototype.forEach=function(t,n){for(var e=0;e<this.size;e++)t.call(n,this._values[e],this._keys[e])},t}();bt.prototype.and=function(t){return new bt(this.patterns.concat(t))},bt.prototype.thenDo=function(t){return new _t(this,t)},_t.prototype.activate=function(t,n,e){for(var r=[],i=wt(n),o=0,s=this.expression.patterns.length;s>o;o++)r.push(Et(t,this.expression.patterns[o],i));var u=new Mt(r,xt(this,n),function(){for(var t=0,n=r.length;n>t;t++)r[t].removeActivePlan(u);e(u)});for(o=0,s=r.length;s>o;o++)r[o].addActivePlan(u);return u},Mt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Mt.prototype.match=function(){var t,n,e=!0;for(t=0,n=this.joinObserverArray.length;n>t;t++)if(0===this.joinObserverArray[t].queue.length){e=!1;break}if(e){var r=[],i=!1;for(t=0,n=this.joinObserverArray.length;n>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,n=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Go=function(t){function n(n,e){t.call(this),this.source=n,this.onError=e,this.queue=[],this.activePlans=[],this.subscription=new de,this.isDisposed=!1}ne(n,t);var e=n.prototype;return e.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var n=this.activePlans.slice(0),e=0,r=n.length;r>e;e++)n[e].match()}},e.error=Zt,e.completed=Zt,e.addActivePlan=function(t){this.activePlans.push(t)},e.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},e.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},e.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},n}(Ge);We.and=function(t){return new bt([this,t])},We.thenDo=function(t){return new bt([this]).thenDo(t)},Je.when=function(){var t,n=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}return new Cs(function(n){var e=[],r=new Wo,i=He(function(t){n.onNext(t)},function(t){r.forEach(function(n){n.onError(t)}),n.onError(t)},function(t){n.onCompleted()});try{for(var o=0,s=t.length;s>o;o++)e.push(t[o].activate(r,i,function(t){var r=e.indexOf(t);e.splice(r,1),0===e.length&&n.onCompleted()}))}catch(u){qr(u).subscribe(n)}var a=new se;return r.forEach(function(t){t.subscribe(),a.add(t)}),a})};var Yo=function(t){function n(n,e){this._dt=n,this._s=e,t.call(this)}function e(t,n){n.onNext(0),n.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,e)},n}(Ke),Xo=Je.interval=function(t,n){return Nt(t,t,xe(n)?n:Re)};Je.timer=function(t,n,e){var r;return xe(e)||(e=Re),null!=n&&"number"==typeof n?r=n:xe(n)&&(e=n),(t instanceof Date||"number"==typeof t)&&r===s?Ct(t,e):t instanceof Date&&r!==s?St(t.getTime(),n,e):Nt(t,r,e)};We.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var n=t,e=arguments[1];return xe(e)||(e=Re),n instanceof Date?Dt(this,n,e):At(this,n,e)}if(Je.isObservable(t)||en(t))return kt(this,t,arguments[1]);throw new Error("Invalid arguments")};var Zo=function(t){function n(n,e,r){xe(r)||(r=Re),this.source=n,this._dt=e,this._s=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve;return new ge(this.source.subscribe(new $o(t,this.source,this._dt,this._s,n)),n)},n}(Ke),$o=function(t){function n(n,e,r,i,o){this._o=n,this._s=e,this._d=r,this._scheduler=i,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._hv=!0,this._v=t;var n=++this._id,e=new de;this._c.setDisposable(e),e.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(e,r){r._hv&&r._id===n&&r._o.onNext(t),r._hv=!1}))},n.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},n.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},n}(Ge);We.debounce=function(){if(en(arguments[0]))return qt(this,arguments[0]);if("number"==typeof arguments[0])return new Zo(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},We.windowWithTime=function(t,n,e){var r,i=this;return null==n&&(r=t),xe(e)||(e=Re),"number"==typeof n?r=n:xe(n)&&(r=t,e=n),new Cs(function(n){function o(){var t=new de,i=!1,s=!1;l.setDisposable(t),c===a?(i=!0,s=!0):a>c?i=!0:s=!0;var p=i?c:a,d=p-f;f=p,i&&(c+=r),s&&(a+=r),t.setDisposable(e.scheduleFuture(null,d,function(){if(s){var t=new Ds;h.push(t),n.onNext(re(t,u))}i&&h.shift().onCompleted(),o()}))}var s,u,a=r,c=t,h=[],l=new ve,f=0;return s=new se(l),u=new ye(s),h.push(new Ds),n.onNext(re(h[0],u)),o(),s.add(i.subscribe(function(t){for(var n=0,e=h.length;e>n;n++)h[n].onNext(t)},function(t){for(var e=0,r=h.length;r>e;e++)h[e].onError(t);n.onError(t)},function(){for(var t=0,e=h.length;e>t;t++)h[t].onCompleted();n.onCompleted()})),u},i)},We.windowWithTimeOrCount=function(t,n,e){var r=this;return xe(e)||(e=Re),new Cs(function(i){function o(n){var r=new de;s.setDisposable(r),r.setDisposable(e.scheduleFuture(null,t,function(){if(n===h){c=0;var t=++h;l.onCompleted(),l=new Ds,i.onNext(re(l,a)),o(t)}}))}var s=new ve,u=new se(s),a=new ye(u),c=0,h=0,l=new Ds;return i.onNext(re(l,a)),o(0),u.add(r.subscribe(function(t){var e=0,r=!1;l.onNext(t),++c===n&&(r=!0,c=0,e=++h,l.onCompleted(),l=new Ds,i.onNext(re(l,a))),r&&o(e)},function(t){l.onError(t),i.onError(t)},function(){l.onCompleted(),i.onCompleted()})),a},r)},We.bufferWithTime=function(t,n,e){return this.windowWithTime(t,n,e).flatMap(G)},We.bufferWithTimeOrCount=function(t,n,e){return this.windowWithTimeOrCount(t,n,e).flatMap(G)};var Jo=function(t){function n(n,e){this.source=n,this._s=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new Ko(t,this._s))},n}(Ke),Ko=function(t){function n(n,e){this._o=n,this._s=e,this._l=e.now(),t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=this._s.now(),e=n-this._l;this._l=n,this._o.onNext({value:t,interval:e})},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.timeInterval=function(t){return xe(t)||(t=Re),new Jo(this,t)};var Qo=function(t){function n(n,e){this.source=n,this._s=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new ts(t,this._s))},n}(Ke),ts=function(t){function n(n,e){this._o=n,this._s=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.timestamp=function(t){return xe(t)||(t=Re),new Qo(this,t)},We.sample=We.throttleLatest=function(t,n){return xe(n)||(n=Re),"number"==typeof t?Ot(this,Xo(t,n)):Ot(this,t)};var ns=Xt.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};ns.prototype=Object.create(Error.prototype),We.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Rt(this,t,arguments[1],arguments[2]);if(Je.isObservable(t)||en(t))return Tt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var es=function(t){function n(n,e,r,i,o,s){this._state=n,this._cndFn=e,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,this._first=!0,this._hasResult=!1,t.call(this)}function e(t,n){if(t._hasResult&&t._o.onNext(t._state),t._first)t._first=!1;else if(t._state=on(t._itrFn)(t._state),t._state===rn)return t._o.onError(t._state.e);if(t._hasResult=on(t._cndFn)(t._state),t._hasResult===rn)return t._o.onError(t._hasResult.e);if(t._hasResult){var e=on(t._resFn)(t._state);if(e===rn)return t._o.onError(e.e);var r=on(t._timeFn)(t._state);if(r===rn)return t._o.onError(r.e);n(t,r)}else t._o.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){return this._o=t,this._s.scheduleRecursiveFuture(this,new Date(this._s.now()),e)},n}(Ke);Je.generateWithAbsoluteTime=function(t,n,e,r,i,o){return xe(o)||(o=Re),new es(t,n,e,r,i,o)};var rs=function(t){function n(n,e,r,i,o,s){this._state=n,this._cndFn=e,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,this._first=!0,this._hasResult=!1,t.call(this)}function e(t,n){if(t._hasResult&&t._o.onNext(t._state),t._first)t._first=!1;else if(t._state=on(t._itrFn)(t._state),t._state===rn)return t._o.onError(t._state.e);if(t._hasResult=on(t._cndFn)(t._state),t._hasResult===rn)return t._o.onError(t._hasResult.e);if(t._hasResult){var e=on(t._resFn)(t._state);if(e===rn)return t._o.onError(e.e);var r=on(t._timeFn)(t._state);if(r===rn)return t._o.onError(r.e);n(t,r)}else t._o.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){return this._o=t,this._s.scheduleRecursiveFuture(this,0,e)},n}(Ke);Je.generateWithRelativeTime=function(t,n,e,r,i,o){return xe(o)||(o=Re),new rs(t,n,e,r,i,o)};var is=function(t){function n(n,e,r){this.source=n,this._dt=e,this._s=r,t.call(this)}function e(t,n){var e=n[0],r=n[1],i=n[2];i.setDisposable(e.subscribe(r))}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new ve;return n.setDisposable(this._s.scheduleFuture([this.source,t,n],this._dt,e)),n},n}(Ke);We.delaySubscription=function(t,n){return xe(n)||(n=Re),new is(this,t,n)};var os=function(t){function n(n,e,r){this.source=n,this._d=e,this._s=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new ss(t,this))},n}(Ke),ss=function(t){function n(n,e){this._o=n,this._s=e._s,this._d=e._d,this._q=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=this._s.now();for(this._q.push({interval:n,value:t});this._q.length>0&&n-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},n}(Ge);We.skipLastWithTime=function(t,n){return xe(n)||(n=Re),new os(this,t,n)};var us=function(t){function n(n,e,r){this.source=n,this._d=e,this._s=r,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return this.source.subscribe(new as(t,this._d,this._s))},n}(Ke),as=function(t){function n(n,e,r){this._o=n,this._d=e,this._s=r,this._q=[],t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=this._s.now();for(this._q.push({interval:n,value:t});this._q.length>0&&n-this._q[0].interval>=this._d;)this._q.shift()},n.prototype.error=function(t){this._o.onError(t);
},n.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var n=this._q.shift();t-n.interval<=this._d&&this._o.onNext(n.value)}this._o.onCompleted()},n}(Ge);We.takeLastWithTime=function(t,n){return xe(n)||(n=Re),new us(this,t,n)},We.takeLastBufferWithTime=function(t,n){var e=this;return xe(n)||(n=Re),new Cs(function(r){var i=[];return e.subscribe(function(e){var r=n.now();for(i.push({interval:r,value:e});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var e=n.now(),o=[];i.length>0;){var s=i.shift();e-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},e)};var cs=function(t){function n(n,e,r){this.source=n,this._d=e,this._s=r,t.call(this)}function e(t,n){n.onCompleted()}return ne(n,t),n.prototype.subscribeCore=function(t){return new ge(this._s.scheduleFuture(t,this._d,e),this.source.subscribe(t))},n}(Ke);We.takeWithTime=function(t,n){return xe(n)||(n=Re),new cs(this,t,n)};var hs=function(t){function n(n,e,r){this.source=n,this._d=e,this._s=r,this._open=!1,t.call(this)}function e(t,n){n._open=!0}return ne(n,t),n.prototype.subscribeCore=function(t){return new ge(this._s.scheduleFuture(this,this._d,e),this.source.subscribe(new ls(t,this)))},n}(Ke),ls=function(t){function n(n,e){this._o=n,this._p=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._p._open&&this._o.onNext(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.skipWithTime=function(t,n){return xe(n)||(n=Re),new hs(this,t,n)};var fs=function(t){function n(n,e,r){this.source=n,this._st=e,this._s=r,t.call(this)}function e(t,n){n._open=!0}return ne(n,t),n.prototype.subscribeCore=function(t){return this._open=!1,new ge(this._s.scheduleFuture(this,this._st,e),this.source.subscribe(new ps(t,this)))},n}(Ke),ps=function(t){function n(n,e){this._o=n,this._p=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){this._p._open&&this._o.onNext(t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},n}(Ge);We.skipUntilWithTime=function(t,n){return xe(n)||(n=Re),new fs(this,t,n)},We.takeUntilWithTime=function(t,n){xe(n)||(n=Re);var e=this;return new Cs(function(r){return new ge(n.scheduleFuture(r,t,function(t,n){n.onCompleted()}),e.subscribe(r))},e)},We.throttle=function(t,n){xe(n)||(n=Re);var e=+t||0;if(0>=e)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Cs(function(t){var i=0;return r.subscribe(function(r){var o=n.now();(0===i||o-i>=e)&&(i=o,t.onNext(r))},function(n){t.onError(n)},function(){t.onCompleted()})},r)};var ds=function(t){function n(n,e){this._o=n,this._xform=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){var n=on(this._xform["@@transducer/step"]).call(this._xform,this._o,t);n===rn&&this._o.onError(n.e)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},n}(Ge);We.transduce=function(t){var n=this;return new Cs(function(e){var r=t(Ft(e));return n.subscribe(new ds(e,r))},n)};var vs=function(t){function n(n){this.source=n,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){var n=new de,e=new se,r={hasCurrent:!1,isStopped:!1,o:t,g:e};return e.add(n),n.setDisposable(this.source.subscribe(new gs(r))),e},n}(Ke),gs=function(t){function n(n){this._s=n,t.call(this)}function e(n,e){this._s=n,this._i=e,t.call(this)}return ne(n,t),n.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,nn(t)&&(t=hr(t));var n=new de;this._s.g.add(n),n.setDisposable(t.subscribe(new e(this._s,n)))}},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},ne(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},n}(Ge);We.switchFirst=function(){return new vs(this)},We.flatMapFirst=We.selectManyFirst=function(t,n,e){return new Qe(this,t,n,e).switchFirst()},Xt.Observable.prototype.flatMapWithMaxConcurrent=function(t,n,e,r){return new Qe(this,n,e,r).merge(t)};var ms=Xt.VirtualTimeScheduler=function(t){function n(n,e){this.clock=n,this.comparer=e,this.isEnabled=!1,this.queue=new ie(1024),t.call(this)}ne(n,t);var e=n.prototype;return e.now=function(){return this.toAbsoluteTime(this.clock)},e.schedule=function(t,n){return this.scheduleAbsolute(t,this.clock,n)},e.scheduleFuture=function(t,n,e){var r=n instanceof Date?this.toRelativeTime(n-this.now()):this.toRelativeTime(n);return this.scheduleRelative(t,r,e)},e.add=gn,e.toAbsoluteTime=gn,e.toRelativeTime=gn,e.schedulePeriodic=function(t,n,e){var r=new Ce(this,t,n,e);return r.start()},e.scheduleRelative=function(t,n,e){var r=this.add(this.clock,n);return this.scheduleAbsolute(t,r,e)},e.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},e.stop=function(){this.isEnabled=!1},e.advanceTo=function(t){var n=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new pn;if(0!==n&&!this.isEnabled){this.isEnabled=!0;do{var e=this.getNext();null!==e&&this.comparer(e.dueTime,t)<=0?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},e.advanceBy=function(t){var n=this.add(this.clock,t),e=this.comparer(this.clock,n);if(e>0)throw new pn;0!==e&&this.advanceTo(n)},e.sleep=function(t){var n=this.add(this.clock,t);if(this.comparer(this.clock,n)>=0)throw new pn;this.clock=n},e.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},e.scheduleAbsolute=function(t,n,e){function r(t,n){return i.queue.remove(o),e(t,n)}var i=this,o=new be(this,t,r,n,this.comparer);return this.queue.enqueue(o),o.disposable},n}(_e);Xt.HistoricalScheduler=function(t){function n(n,e){var r=null==n?0:n,i=e||Qt;t.call(this,r,i)}ne(n,t);var e=n.prototype;return e.add=function(t,n){return t+n},e.toAbsoluteTime=function(t){return new Date(t).getTime()},e.toRelativeTime=function(t){return t},n}(Xt.VirtualTimeScheduler),Pt.prototype.equals=function(t){return t===this?!0:null==t?!1:"N"!==t.kind?!1:this.predicate(t.value)},jt.prototype.equals=function(t){return t===this?!0:null==t?!1:"E"!==t.kind?!1:this.predicate(t.error)};var ys=Xt.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,n){return"function"==typeof n?new bs(t,new Pt(n)):new bs(t,Pe.createOnNext(n))},onError:function(t,n){return"function"==typeof n?new bs(t,new jt(n)):new bs(t,Pe.createOnError(n))},onCompleted:function(t){return new bs(t,Pe.createOnCompleted())},subscribe:function(t,n){return new _s(t,n)}},bs=Xt.Recorded=function(t,n,e){this.time=t,this.value=n,this.comparer=e||Kt};bs.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},bs.prototype.toString=function(){return this.value.toString()+"@"+this.time};var _s=Xt.Subscription=function(t,n){this.subscribe=t,this.unsubscribe=n||Number.MAX_VALUE};_s.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},_s.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var ws=Xt.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};ws.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var xs=function(t){function n(n){t.call(this),this.scheduler=n,this.messages=[]}ne(n,t);var e=n.prototype;return e.onNext=function(t){this.messages.push(new bs(this.scheduler.clock,Pe.createOnNext(t)))},e.onError=function(t){this.messages.push(new bs(this.scheduler.clock,Pe.createOnError(t)))},e.onCompleted=function(){this.messages.push(new bs(this.scheduler.clock,Pe.createOnCompleted()))},n}(Be);Lt.prototype.then=function(t,n){var e=this;this.subscriptions.push(new _s(this.scheduler.clock));var r,i=this.subscriptions.length-1,o=Xt.Observer.create(function(n){var u=t(n);if(u&&"function"==typeof u.then)r=u;else{var a=e.scheduler.clock;r=new Lt(e.scheduler,[Xt.ReactiveTest.onNext(a,s),Xt.ReactiveTest.onCompleted(a)])}var c=e.observers.indexOf(o);e.observers.splice(c,1),e.subscriptions[i]=new _s(e.subscriptions[i].subscribe,e.scheduler.clock)},function(t){n(t);var r=e.observers.indexOf(o);e.observers.splice(r,1),e.subscriptions[i]=new _s(e.subscriptions[i].subscribe,e.scheduler.clock)});return this.observers.push(o),r||new Lt(this.scheduler,this.messages)};var Es=function(t){function n(n,e){t.call(this);var r,i,o=this;this.scheduler=n,this.messages=e,this.subscriptions=[],this.observers=[];for(var s=0,u=this.messages.length;u>s;s++)r=this.messages[s],i=r.value,function(t){n.scheduleAbsolute(null,r.time,function(){for(var n=o.observers.slice(0),e=0,r=n.length;r>e;e++)t.accept(n[e]);return he})}(i)}return ne(n,t),n.prototype._subscribe=function(t){var n=this;this.observers.push(t),this.subscriptions.push(new _s(this.scheduler.clock));var e=this.subscriptions.length-1;return ce(function(){var r=n.observers.indexOf(t);n.observers.splice(r,1),n.subscriptions[e]=new _s(n.subscriptions[e].subscribe,n.scheduler.clock)})},n}(Je),Ms=function(t){function n(n,e){t.call(this),this.scheduler=n,this.messages=e,this.subscriptions=[]}return ne(n,t),n.prototype._subscribe=function(t){var n,e,r=this;this.subscriptions.push(new _s(this.scheduler.clock));for(var i=this.subscriptions.length-1,o=new se,s=0,u=this.messages.length;u>s;s++)n=this.messages[s],e=n.value,function(e){o.add(r.scheduler.scheduleRelative(null,n.time,function(){return e.accept(t),he}))}(e);return ce(function(){r.subscriptions[i]=new _s(r.subscriptions[i].subscribe,r.scheduler.clock),o.dispose()})},n}(Je);Xt.TestScheduler=function(t){function n(t,n){return t>n?1:n>t?-1:0}function e(){t.call(this,0,n)}return ne(e,t),e.prototype.scheduleAbsolute=function(n,e,r){return e<=this.clock&&(e=this.clock+1),t.prototype.scheduleAbsolute.call(this,n,e,r)},e.prototype.add=function(t,n){return t+n},e.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},e.prototype.toRelativeTime=function(t){return t},e.prototype.startScheduler=function(t,n){n||(n={}),null==n.created&&(n.created=ys.created),null==n.subscribed&&(n.subscribed=ys.subscribed),null==n.disposed&&(n.disposed=ys.disposed);var e,r,i=this.createObserver();return this.scheduleAbsolute(null,n.created,function(){return e=t(),he}),this.scheduleAbsolute(null,n.subscribed,function(){return r=e.subscribe(i),he}),this.scheduleAbsolute(null,n.disposed,function(){return r.dispose(),he}),this.start(),i},e.prototype.createHotObservable=function(){var t,n=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}return new Es(this,t)},e.prototype.createColdObservable=function(){var t,n=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(n);for(var e=0;n>e;e++)t[e]=arguments[e]}return new Ms(this,t)},e.prototype.createResolvedPromise=function(t,n){return new Lt(this,[Xt.ReactiveTest.onNext(t,n),Xt.ReactiveTest.onCompleted(t)])},e.prototype.createRejectedPromise=function(t,n){return new Lt(this,[Xt.ReactiveTest.onError(t,n)])},e.prototype.createObserver=function(){return new xs(this)},e}(ms);var Cs=Xt.AnonymousObservable=function(t){function n(t){return t&&en(t.dispose)?t:en(t)?ce(t):he}function e(t,e){var r=e[0],i=e[1],o=on(i.__subscribe).call(i,r);o!==rn||r.fail(rn.e)||h(rn.e),r.setDisposable(n(o))}function r(n,e){this.source=e,this.__subscribe=n,t.call(this)}return ne(r,t),r.prototype._subscribe=function(t){var n=new Ss(t),r=[n,this];return De.scheduleRequired()?De.schedule(r,e):e(null,r),n},r}(Je),Ss=function(t){function n(n){t.call(this),this.observer=n,this.m=new de}ne(n,t);var e=n.prototype;return e.next=function(t){var n=on(this.observer.onNext).call(this.observer,t);n===rn&&(this.dispose(),h(n.e))},e.error=function(t){var n=on(this.observer.onError).call(this.observer,t);this.dispose(),n===rn&&h(n.e)},e.completed=function(){var t=on(this.observer.onCompleted).call(this.observer);this.dispose(),t===rn&&h(t.e)},e.setDisposable=function(t){this.m.setDisposable(t)},e.getDisposable=function(){return this.m.getDisposable()},e.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},n}(Ge),Ns=function(t){function n(n,e){this._m=n,this._u=e,t.call(this)}return ne(n,t),n.prototype.subscribeCore=function(t){return new ge(this._m.getDisposable(),this._u.subscribe(t))},n}(Ke),As=function(t){function n(n,e,r){t.call(this),this.key=n,this.underlyingObservable=r?new Ns(r,e):e}return ne(n,t),n.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},n}(Je),Ds=Xt.Subject=function(t){function n(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return ne(n,t),ee(n.prototype,Be.prototype,{_subscribe:function(t){return fe(this),this.isStopped?this.hasError?(t.onError(this.error),he):(t.onCompleted(),he):(this.observers.push(t),new To(this,t))},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,n=a(this.observers),e=n.length;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var n=0,e=a(this.observers),r=e.length;r>n;n++)e[n].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped)for(var n=0,e=a(this.observers),r=e.length;r>n;n++)e[n].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),n.create=function(t,n){return new Ts(t,n)},n}(Je),ks=Xt.AsyncSubject=function(t){function n(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return ne(n,t),ee(n.prototype,Be.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),he):(this.observers.push(t),new To(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){var t,n;if(fe(this),!this.isStopped){this.isStopped=!0;var e=a(this.observers),n=e.length;if(this.hasValue)for(t=0;n>t;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;n>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var n=0,e=a(this.observers),r=e.length;r>n;n++)e[n].onError(t);this.observers.length=0}},onNext:function(t){fe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),n}(Je),qs=Xt.BehaviorSubject=function(t){function n(n){t.call(this),this.value=n,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return ne(n,t),ee(n.prototype,Be.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),he):(this.observers.push(t),t.onNext(this.value),new To(this,t))},getValue:function(){return fe(this),this.hasError&&h(this.error),this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,n=a(this.observers),e=n.length;e>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var n=0,e=a(this.observers),r=e.length;r>n;n++)e[n].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped){this.value=t;for(var n=0,e=a(this.observers),r=e.length;r>n;n++)e[n].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),n}(Je),Os=Xt.ReplaySubject=function(t){function n(t,n){return ce(function(){n.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(n),1)})}function e(n,e,i){this.bufferSize=null==n?r:n,this.windowSize=null==e?r:e,this.scheduler=i||De,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return ne(e,t),ee(e.prototype,Be.prototype,{_subscribe:function(t){fe(this);var e=new Ze(this.scheduler,t),r=n(this,e);this._trim(this.scheduler.now()),this.observers.push(e);for(var i=0,o=this.q.length;o>i;i++)e.onNext(this.q[i].value);return this.hasError?e.onError(this.error):this.isStopped&&e.onCompleted(),e.ensureActive(),r},hasObservers:function(){return this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(fe(this),!this.isStopped){var n=this.scheduler.now();this.q.push({interval:n,value:t}),this._trim(n);for(var e=0,r=a(this.observers),i=r.length;i>e;e++){var o=r[e];o.onNext(t),o.ensureActive()}}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var n=this.scheduler.now();this._trim(n);for(var e=0,r=a(this.observers),i=r.length;i>e;e++){var o=r[e];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var n=0,e=a(this.observers),r=e.length;r>n;n++){var i=e[n];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),e}(Je),Ts=Xt.AnonymousSubject=function(t){function n(n,e){this.observer=n,this.observable=e,t.call(this)}return ne(n,t),ee(n.prototype,Be.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),n}(Je);Xt.Pauser=function(t){function n(){t.call(this)}return ne(n,t),n.prototype.pause=function(){this.onNext(!1)},n.prototype.resume=function(){this.onNext(!0)},n}(Ds),Yt.Rx=Xt,r=function(){return Xt}.call(n,e,n,t),!(r!==s&&(t.exports=r));var Rs=v()}).call(this)}).call(n,e(2)(t),function(){return this}(),e(3))},function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,n){function e(){c=!1,s.length?a=s.concat(a):h=-1,a.length&&r()}function r(){if(!c){var t=setTimeout(e);c=!0;for(var n=a.length;n;){for(s=a,a=[];++h<n;)s&&s[h].run();h=-1,n=a.length}s=null,c=!1,clearTimeout(t)}}function i(t,n){this.fun=t,this.array=n}function o(){}var s,u=t.exports={},a=[],c=!1,h=-1;u.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];a.push(new i(t,n)),1!==a.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,n,e){var r,i;!function(){function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function s(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function u(t,n){return n>t?-1:t>n?1:t>=n?0:NaN}function a(t){return null===t?NaN:+t}function c(t){return!isNaN(t)}function h(t){return{left:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);i>r;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=n.length);i>r;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}function l(t){return t.length}function f(t){for(var n=1;t*n%1;)n*=10;return n}function p(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function d(){this._=Object.create(null)}function v(t){return(t+="")===Ss||t[0]===Ns?Ns+t:t}function g(t){return(t+="")[0]===Ns?t.slice(1):t}function m(t){return v(t)in this._}function y(t){return(t=v(t))in this._&&delete this._[t]}function b(){var t=[];for(var n in this._)t.push(g(n));return t}function _(){var t=0;for(var n in this._)++t;return t}function w(){for(var t in this._)return!1;return!0}function x(){this._=Object.create(null)}function E(t){return t}function M(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function C(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=As.length;r>e;++e){var i=As[e]+n;if(i in t)return i}}function S(){}function N(){}function A(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new d;return n.on=function(n,i){var o,s=r.get(n);return arguments.length<2?s&&s.on:(s&&(s.on=null,e=e.slice(0,o=e.indexOf(s)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function D(){ps.event.preventDefault()}function k(){for(var t,n=ps.event;t=n.sourceEvent;)n=t;return n}function q(t){for(var n=new N,e=0,r=arguments.length;++e<r;)n[arguments[e]]=A(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=ps.event;i.target=t,ps.event=i,n[i.type].apply(e,r)}finally{ps.event=o}}},n}function O(t){return ks(t,Rs),t}function T(t){return"function"==typeof t?t:function(){return qs(t,this)}}function R(t){return"function"==typeof t?t:function(){return Os(t,this)}}function F(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function s(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=ps.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?u:s:t.local?o:i}function P(t){return t.trim().replace(/\s+/g," ")}function j(t){return new RegExp("(?:^|\\s+)"+ps.requote(t)+"(?:\\s+|$)","g")}function L(t){return(t+"").trim().split(/^|\s+/)}function I(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=L(t).map(z);var i=t.length;return"function"==typeof n?r:e}function z(t){var n=j(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",P(i+" "+t))):e.setAttribute("class",P(i.replace(n," ")))}}function U(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function V(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function B(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e?n.createElementNS(e,t):n.createElement(t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ps.ns.qualify(t)).local?e:n}function H(){var t=this.parentNode;t&&t.removeChild(this)}function W(t){return{__data__:t}}function G(t){return function(){return Ts(this,t)}}function Y(t){return arguments.length||(t=u),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function X(t,n){for(var e=0,r=t.length;r>e;e++)for(var i,o=t[e],s=0,u=o.length;u>s;s++)(i=o[s])&&n(i,s,e);return t}function Z(t){return ks(t,Ps),t}function $(t){var n,e;return function(r,i,o){var s,u=t[o].update,a=u.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(s=u[n])&&++n<a;);return s}}function J(t,n,e){function r(){var n=this[s];n&&(this.removeEventListener(t,n,n.$),delete this[s])}function i(){var i=a(n,vs(arguments));r.call(this),this.addEventListener(t,this[s]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+ps.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var s="__on"+t,u=t.indexOf("."),a=K;u>0&&(t=t.slice(0,u));var c=js.get(t);return c&&(t=c,a=Q),u?n?i:r:n?S:o}function K(t,n){return function(e){var r=ps.event;ps.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{ps.event=r}}}function Q(t,n){var e=K(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function tt(t){var n=".dragsuppress-"+ ++Is,e="click"+n,r=ps.select(s(t)).on("touchmove"+n,D).on("dragstart"+n,D).on("selectstart"+n,D);if(null==Ls&&(Ls="onselectstart"in t?!1:C(t.style,"userSelect")),Ls){var i=o(t).style,u=i[Ls];i[Ls]="none"}return function(t){if(r.on(n,null),Ls&&(i[Ls]=u),t){var o=function(){r.on(e,null)};r.on(e,function(){D(),o()},!0),setTimeout(o,0)}}}function nt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>zs){var i=s(t);if(i.scrollX||i.scrollY){e=ps.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=e[0][0].getScreenCTM();zs=!(o.f||o.e),e.remove()}}return zs?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function et(){return ps.event.changedTouches[0].identifier}function rt(t){return t>0?1:0>t?-1:0}function it(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function ot(t){return t>1?0:-1>t?Bs:Math.acos(t)}function st(t){return t>1?Gs:-1>t?-Gs:Math.asin(t)}function ut(t){return((t=Math.exp(t))-1/t)/2}function at(t){return((t=Math.exp(t))+1/t)/2}function ct(t){return((t=Math.exp(2*t))-1)/(t+1)}function ht(t){return(t=Math.sin(t/2))*t}function lt(){}function ft(t,n,e){return this instanceof ft?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof ft?new ft(t.h,t.s,t.l):St(""+t,Nt,ft):new ft(t,n,e)}function pt(t,n,e){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(s-o)*t/60:180>t?s:240>t?o+(s-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,s;return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:0>n?0:n>1?1:n,e=0>e?0:e>1?1:e,s=.5>=e?e*(1+n):e+n-e*n,o=2*e-s,new xt(i(t+120),i(t),i(t-120))}function dt(t,n,e){return this instanceof dt?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof dt?new dt(t.h,t.c,t.l):t instanceof gt?yt(t.l,t.a,t.b):yt((t=At((t=ps.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new dt(t,n,e)}function vt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new gt(e,Math.cos(t*=Ys)*n,Math.sin(t)*n)}function gt(t,n,e){return this instanceof gt?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof gt?new gt(t.l,t.a,t.b):t instanceof dt?vt(t.h,t.c,t.l):At((t=xt(t)).r,t.g,t.b):new gt(t,n,e)}function mt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return i=bt(i)*iu,r=bt(r)*ou,o=bt(o)*su,new xt(wt(3.2404542*i-1.5371385*r-.4985314*o),wt(-.969266*i+1.8760108*r+.041556*o),wt(.0556434*i-.2040259*r+1.0572252*o))}function yt(t,n,e){return t>0?new dt(Math.atan2(e,n)*Xs,Math.sqrt(n*n+e*e),t):new dt(NaN,NaN,t)}function bt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function _t(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function wt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function xt(t,n,e){return this instanceof xt?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof xt?new xt(t.r,t.g,t.b):St(""+t,xt,pt):new xt(t,n,e)}function Et(t){return new xt(t>>16,t>>8&255,255&t)}function Mt(t){return Et(t)+""}function Ct(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function St(t,n,e){var r,i,o,s=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(kt(i[0]),kt(i[1]),kt(i[2]))}return(o=cu.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(s=(3840&o)>>4,s=s>>4|s,u=240&o,u=u>>4|u,a=15&o,a=a<<4|a):7===t.length&&(s=(16711680&o)>>16,u=(65280&o)>>8,a=255&o)),n(s,u,a))}function Nt(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),s=Math.max(t,n,e),u=s-o,a=(s+o)/2;return u?(i=.5>a?u/(s+o):u/(2-s-o),r=t==s?(n-e)/u+(e>n?6:0):n==s?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=a>0&&1>a?0:r),new ft(r,i,a)}function At(t,n,e){t=Dt(t),n=Dt(n),e=Dt(e);var r=_t((.4124564*t+.3575761*n+.1804375*e)/iu),i=_t((.2126729*t+.7151522*n+.072175*e)/ou),o=_t((.0193339*t+.119192*n+.9503041*e)/su);return gt(116*i-16,500*(r-i),200*(i-o))}function Dt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kt(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}function qt(t){return"function"==typeof t?t:function(){return t}}function Ot(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Tt(n,e,t,r)}}function Tt(t,n,e,r){function i(){var t,n=a.status;if(!n&&Ft(a)||n>=200&&300>n||304===n){try{t=e.call(o,a)}catch(r){return void s.error.call(o,r)}s.load.call(o,t)}else s.error.call(o,a)}var o={},s=ps.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(t)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(t){var n=ps.event;ps.event=t;try{s.progress.call(o,a)}finally{ps.event=n}},o.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==n?delete u[t]:u[t]=n+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return e=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(vs(arguments)))}}),o.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(e,t,!0),null==n||"accept"in u||(u.accept=n+",*/*"),a.setRequestHeader)for(var h in u)a.setRequestHeader(h,u[h]);return null!=n&&a.overrideMimeType&&a.overrideMimeType(n),null!=c&&(a.responseType=c),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(o,a),a.send(null==r?null:r),o},o.abort=function(){return a.abort(),o},ps.rebind(o,s,"on"),null==r?o:o.get(Rt(r))}function Rt(t){return 1===t.length?function(n,e){t(null==n?e:null)}:t}function Ft(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}function Pt(t,n,e){var r=arguments.length;2>r&&(n=0),3>r&&(e=Date.now());var i=e+n,o={c:t,t:i,n:null};return lu?lu.n=o:hu=o,lu=o,fu||(pu=clearTimeout(pu),fu=1,du(jt)),o}function jt(){var t=Lt(),n=It()-t;n>24?(isFinite(n)&&(clearTimeout(pu),pu=setTimeout(jt,n)),fu=0):(fu=1,du(jt))}function Lt(){for(var t=Date.now(),n=hu;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function It(){for(var t,n=hu,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:hu=n.n;return lu=t,e}function zt(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Ut(t,n){var e=Math.pow(10,3*Cs(8-n));return{scale:n>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function Vt(t){var n=t.decimal,e=t.thousands,r=t.grouping,i=t.currency,o=r&&e?function(t,n){for(var i=t.length,o=[],s=0,u=r[0],a=0;i>0&&u>0&&(a+u+1>n&&(u=Math.max(1,n-a)),o.push(t.substring(i-=u,i+u)),
!((a+=u+1)>n));)u=r[s=(s+1)%r.length];return o.reverse().join(e)}:E;return function(t){var e=gu.exec(t),r=e[1]||" ",s=e[2]||">",u=e[3]||"-",a=e[4]||"",c=e[5],h=+e[6],l=e[7],f=e[8],p=e[9],d=1,v="",g="",m=!1,y=!0;switch(f&&(f=+f.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),p){case"n":l=!0,p="g";break;case"%":d=100,g="%",p="f";break;case"p":d=100,g="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":y=!1;case"d":m=!0,f=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],g=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):("e"==p||"f"==p)&&(f=Math.max(0,Math.min(20,f)))),p=mu.get(p)||Bt;var b=c&&l;return function(t){var e=g;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>d){var a=ps.formatPrefix(t,f);t=a.scale(t),e=a.symbol+g}else t*=d;t=p(t,f);var _,w,x=t.lastIndexOf(".");if(0>x){var E=y?t.lastIndexOf("e"):-1;0>E?(_=t,w=""):(_=t.substring(0,E),w=t.substring(E))}else _=t.substring(0,x),w=n+t.substring(x+1);!c&&l&&(_=o(_,1/0));var M=v.length+_.length+w.length+(b?0:i.length),C=h>M?new Array(M=h-M+1).join(r):"";return b&&(_=o(C+_,C.length?h-w.length:1/0)),i+=v,t=_+w,("<"===s?i+t+C:">"===s?C+i+t:"^"===s?C.substring(0,M>>=1)+i+t+C.substring(M):i+(b?t:C+t))+e}}}function Bt(t){return t+""}function Ht(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Wt(t,n,e){function r(n){var e=t(n),r=o(e,1);return r-n>n-e?e:r}function i(e){return n(e=t(new bu(e-1)),1),e}function o(t,e){return n(t=new bu(+t),e),t}function s(t,r,o){var s=i(t),u=[];if(o>1)for(;r>s;)e(s)%o||u.push(new Date(+s)),n(s,1);else for(;r>s;)u.push(new Date(+s)),n(s,1);return u}function u(t,n,e){try{bu=Ht;var r=new Ht;return r._=t,s(r,n,e)}finally{bu=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=s;var a=t.utc=Gt(t);return a.floor=a,a.round=Gt(r),a.ceil=Gt(i),a.offset=Gt(o),a.range=u,t}function Gt(t){return function(n,e){try{bu=Ht;var r=new Ht;return r._=n,t(r,e)._}finally{bu=Date}}}function Yt(t){function n(t){function n(n){for(var e,i,o,s=[],u=-1,a=0;++u<r;)37===t.charCodeAt(u)&&(s.push(t.slice(a,u)),null!=(i=wu[e=t.charAt(++u)])&&(e=t.charAt(++u)),(o=A[e])&&(e=o(n,null==i?"e"===e?" ":"0":i)),s.push(e),a=u+1);return s.push(t.slice(a,u)),s.join("")}var r=t.length;return n.parse=function(n){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=e(r,t,n,0);if(i!=n.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&bu!==Ht,s=new(o?Ht:bu);return"j"in r?s.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),s.setFullYear(r.y,0,1),s.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(s.getDay()+5)%7:r.w+7*r.U-(s.getDay()+6)%7)):s.setFullYear(r.y,r.m,r.d),s.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?s._:s},n.toString=function(){return t},n}function e(t,n,e,r){for(var i,o,s,u=0,a=n.length,c=e.length;a>u;){if(r>=c)return-1;if(i=n.charCodeAt(u++),37===i){if(s=n.charAt(u++),o=D[s in wu?n.charAt(u++):s],!o||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(t,n,e){x.lastIndex=0;var r=x.exec(n.slice(e));return r?(t.w=E.get(r[0].toLowerCase()),e+r[0].length):-1}function i(t,n,e){_.lastIndex=0;var r=_.exec(n.slice(e));return r?(t.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function o(t,n,e){S.lastIndex=0;var r=S.exec(n.slice(e));return r?(t.m=N.get(r[0].toLowerCase()),e+r[0].length):-1}function s(t,n,e){M.lastIndex=0;var r=M.exec(n.slice(e));return r?(t.m=C.get(r[0].toLowerCase()),e+r[0].length):-1}function u(t,n,r){return e(t,A.c.toString(),n,r)}function a(t,n,r){return e(t,A.x.toString(),n,r)}function c(t,n,r){return e(t,A.X.toString(),n,r)}function h(t,n,e){var r=b.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)}var l=t.dateTime,f=t.date,p=t.time,d=t.periods,v=t.days,g=t.shortDays,m=t.months,y=t.shortMonths;n.utc=function(t){function e(t){try{bu=Ht;var n=new bu;return n._=t,r(n)}finally{bu=Date}}var r=n(t);return e.parse=function(t){try{bu=Ht;var n=r.parse(t);return n&&n._}finally{bu=Date}},e.toString=r.toString,e},n.multi=n.utc.multi=dn;var b=ps.map(),_=Zt(v),w=$t(v),x=Zt(g),E=$t(g),M=Zt(m),C=$t(m),S=Zt(y),N=$t(y);d.forEach(function(t,n){b.set(t.toLowerCase(),n)});var A={a:function(t){return g[t.getDay()]},A:function(t){return v[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:n(l),d:function(t,n){return Xt(t.getDate(),n,2)},e:function(t,n){return Xt(t.getDate(),n,2)},H:function(t,n){return Xt(t.getHours(),n,2)},I:function(t,n){return Xt(t.getHours()%12||12,n,2)},j:function(t,n){return Xt(1+yu.dayOfYear(t),n,3)},L:function(t,n){return Xt(t.getMilliseconds(),n,3)},m:function(t,n){return Xt(t.getMonth()+1,n,2)},M:function(t,n){return Xt(t.getMinutes(),n,2)},p:function(t){return d[+(t.getHours()>=12)]},S:function(t,n){return Xt(t.getSeconds(),n,2)},U:function(t,n){return Xt(yu.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return Xt(yu.mondayOfYear(t),n,2)},x:n(f),X:n(p),y:function(t,n){return Xt(t.getFullYear()%100,n,2)},Y:function(t,n){return Xt(t.getFullYear()%1e4,n,4)},Z:fn,"%":function(){return"%"}},D={a:r,A:i,b:o,B:s,c:u,d:sn,e:sn,H:an,I:an,j:un,L:ln,m:on,M:cn,p:h,S:hn,U:Kt,w:Jt,W:Qt,x:a,X:c,y:nn,Y:tn,Z:en,"%":pn};return n}function Xt(t,n,e){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(e>o?new Array(e-o+1).join(n)+i:i)}function Zt(t){return new RegExp("^(?:"+t.map(ps.requote).join("|")+")","i")}function $t(t){for(var n=new d,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Jt(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Kt(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function Qt(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function tn(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function nn(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.y=rn(+r[0]),e+r[0].length):-1}function en(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function rn(t){return t+(t>68?1900:2e3)}function on(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function sn(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function un(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function an(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function cn(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function hn(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function ln(t,n,e){xu.lastIndex=0;var r=xu.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function fn(t){var n=t.getTimezoneOffset(),e=n>0?"-":"+",r=Cs(n)/60|0,i=Cs(n)%60;return e+Xt(r,"0",2)+Xt(i,"0",2)}function pn(t,n,e){Eu.lastIndex=0;var r=Eu.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function dn(t){for(var n=t.length,e=-1;++e<n;)t[e][0]=this(t[e][0]);return function(n){for(var e=0,r=t[e];!r[1](n);)r=t[++e];return r[0](n)}}function vn(){}function gn(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function mn(t,n){t&&Nu.hasOwnProperty(t.type)&&Nu[t.type](t,n)}function yn(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function bn(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)yn(t[e],n,1);n.polygonEnd()}function _n(){function t(t,n){t*=Ys,n=n*Ys/2+Bs/4;var e=t-r,s=e>=0?1:-1,u=s*e,a=Math.cos(n),c=Math.sin(n),h=o*c,l=i*a+h*Math.cos(u),f=h*s*Math.sin(u);Du.add(Math.atan2(f,l)),r=t,i=a,o=c}var n,e,r,i,o;ku.point=function(s,u){ku.point=t,r=(n=s)*Ys,i=Math.cos(u=(e=u)*Ys/2+Bs/4),o=Math.sin(u)},ku.lineEnd=function(){t(n,e)}}function wn(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function xn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function En(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Mn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Cn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Sn(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Nn(t){return[Math.atan2(t[1],t[0]),st(t[2])]}function An(t,n){return Cs(t[0]-n[0])<Us&&Cs(t[1]-n[1])<Us}function Dn(t,n){t*=Ys;var e=Math.cos(n*=Ys);kn(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function kn(t,n,e){++qu,Tu+=(t-Tu)/qu,Ru+=(n-Ru)/qu,Fu+=(e-Fu)/qu}function qn(){function t(t,i){t*=Ys;var o=Math.cos(i*=Ys),s=o*Math.cos(t),u=o*Math.sin(t),a=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*a-r*u)*c+(c=r*s-n*a)*c+(c=n*u-e*s)*c),n*s+e*u+r*a);Ou+=c,Pu+=c*(n+(n=s)),ju+=c*(e+(e=u)),Lu+=c*(r+(r=a)),kn(n,e,r)}var n,e,r;Vu.point=function(i,o){i*=Ys;var s=Math.cos(o*=Ys);n=s*Math.cos(i),e=s*Math.sin(i),r=Math.sin(o),Vu.point=t,kn(n,e,r)}}function On(){Vu.point=Dn}function Tn(){function t(t,n){t*=Ys;var e=Math.cos(n*=Ys),s=e*Math.cos(t),u=e*Math.sin(t),a=Math.sin(n),c=i*a-o*u,h=o*s-r*a,l=r*u-i*s,f=Math.sqrt(c*c+h*h+l*l),p=r*s+i*u+o*a,d=f&&-ot(p)/f,v=Math.atan2(f,p);Iu+=d*c,zu+=d*h,Uu+=d*l,Ou+=v,Pu+=v*(r+(r=s)),ju+=v*(i+(i=u)),Lu+=v*(o+(o=a)),kn(r,i,o)}var n,e,r,i,o;Vu.point=function(s,u){n=s,e=u,Vu.point=t,s*=Ys;var a=Math.cos(u*=Ys);r=a*Math.cos(s),i=a*Math.sin(s),o=Math.sin(u),kn(r,i,o)},Vu.lineEnd=function(){t(n,e),Vu.lineEnd=On,Vu.point=Dn}}function Rn(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),e}function Fn(){return!0}function Pn(t,n,e,r,i){var o=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(An(e,r)){i.lineStart();for(var u=0;n>u;++u)i.point((e=t[u])[0],e[1]);return void i.lineEnd()}var a=new Ln(e,t,null,!0),c=new Ln(e,null,a,!1);a.o=c,o.push(a),s.push(c),a=new Ln(r,t,null,!1),c=new Ln(r,null,a,!0),a.o=c,o.push(a),s.push(c)}}),s.sort(n),jn(o),jn(s),o.length){for(var u=0,a=e,c=s.length;c>u;++u)s[u].e=a=!a;for(var h,l,f=o[0];;){for(var p=f,d=!0;p.v;)if((p=p.n)===f)return;h=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,c=h.length;c>u;++u)i.point((l=h[u])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){h=p.p.z;for(var u=h.length-1;u>=0;--u)i.point((l=h[u])[0],l[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,h=p.z,d=!d}while(!p.v);i.lineEnd()}}}function jn(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Ln(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function In(t,n,e,r){return function(i,o){function s(n,e){var r=i(n,e);t(n=r[0],e=r[1])&&o.point(n,e)}function u(t,n){var e=i(t,n);g.point(e[0],e[1])}function a(){y.point=u,g.lineStart()}function c(){y.point=s,g.lineEnd()}function h(t,n){v.push([t,n]);var e=i(t,n);_.point(e[0],e[1])}function l(){_.lineStart(),v=[]}function f(){h(v[0][0],v[0][1]),_.lineEnd();var t,n=_.clean(),e=b.buffer(),r=e.length;if(v.pop(),d.push(v),v=null,r)if(1&n){t=e[0];var i,r=t.length-1,s=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++s<r;)o.point((i=t[s])[0],i[1]);o.lineEnd()}}else r>1&&2&n&&e.push(e.pop().concat(e.shift())),p.push(e.filter(zn))}var p,d,v,g=n(o),m=i.invert(r[0],r[1]),y={point:s,lineStart:a,lineEnd:c,polygonStart:function(){y.point=h,y.lineStart=l,y.lineEnd=f,p=[],d=[]},polygonEnd:function(){y.point=s,y.lineStart=a,y.lineEnd=c,p=ps.merge(p);var t=Gn(m,d);p.length?(w||(o.polygonStart(),w=!0),Pn(p,Vn,t,e,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),p=d=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Un(),_=n(b),w=!1;return y}}function zn(t){return t.length>1}function Un(){var t,n=[];return{lineStart:function(){n.push(t=[])},point:function(n,e){t.push([n,e])},lineEnd:S,buffer:function(){var e=n;return n=[],t=null,e},rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))}}}function Vn(t,n){return((t=t.x)[0]<0?t[1]-Gs-Us:Gs-t[1])-((n=n.x)[0]<0?n[1]-Gs-Us:Gs-n[1])}function Bn(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,s){var u=o>0?Bs:-Bs,a=Cs(o-e);Cs(a-Bs)<Us?(t.point(e,r=(r+s)/2>0?Gs:-Gs),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&a>=Bs&&(Cs(e-i)<Us&&(e-=i*Us),Cs(o-u)<Us&&(o-=u*Us),r=Hn(e,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=s),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}function Hn(t,n,e,r){var i,o,s=Math.sin(t-e);return Cs(s)>Us?Math.atan((Math.sin(n)*(o=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(n))*Math.sin(t))/(i*o*s)):(n+r)/2}function Wn(t,n,e,r){var i;if(null==t)i=e*Gs,r.point(-Bs,i),r.point(0,i),r.point(Bs,i),r.point(Bs,0),r.point(Bs,-i),r.point(0,-i),r.point(-Bs,-i),r.point(-Bs,0),r.point(-Bs,i);else if(Cs(t[0]-n[0])>Us){var o=t[0]<n[0]?Bs:-Bs;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}function Gn(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,s=0;Du.reset();for(var u=0,a=n.length;a>u;++u){var c=n[u],h=c.length;if(h)for(var l=c[0],f=l[0],p=l[1]/2+Bs/4,d=Math.sin(p),v=Math.cos(p),g=1;;){g===h&&(g=0),t=c[g];var m=t[0],y=t[1]/2+Bs/4,b=Math.sin(y),_=Math.cos(y),w=m-f,x=w>=0?1:-1,E=x*w,M=E>Bs,C=d*b;if(Du.add(Math.atan2(C*x*Math.sin(E),v*_+C*Math.cos(E))),o+=M?w+x*Hs:w,M^f>=e^m>=e){var S=En(wn(l),wn(t));Sn(S);var N=En(i,S);Sn(N);var A=(M^w>=0?-1:1)*st(N[2]);(r>A||r===A&&(S[0]||S[1]))&&(s+=M^w>=0?1:-1)}if(!g++)break;f=m,d=b,v=_,l=t}}return(-Us>o||Us>o&&0>Du)^1&s}function Yn(t){function n(t,n){return Math.cos(t)*Math.cos(n)>o}function e(t){var e,o,a,c,h;return{lineStart:function(){c=a=!1,h=1},point:function(l,f){var p,d=[l,f],v=n(l,f),g=s?v?0:i(l,f):v?i(l+(0>l?Bs:-Bs),f):0;if(!e&&(c=a=v)&&t.lineStart(),v!==a&&(p=r(e,d),(An(e,p)||An(d,p))&&(d[0]+=Us,d[1]+=Us,v=n(d[0],d[1]))),v!==a)h=0,v?(t.lineStart(),p=r(d,e),t.point(p[0],p[1])):(p=r(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(u&&e&&s^v){var m;g&o||!(m=r(d,e,!0))||(h=0,s?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||e&&An(e,d)||t.point(d[0],d[1]),e=d,a=v,o=g},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return h|(c&&a)<<1}}}function r(t,n,e){var r=wn(t),i=wn(n),s=[1,0,0],u=En(r,i),a=xn(u,u),c=u[0],h=a-c*c;if(!h)return!e&&t;var l=o*a/h,f=-o*c/h,p=En(s,u),d=Cn(s,l),v=Cn(u,f);Mn(d,v);var g=p,m=xn(d,g),y=xn(g,g),b=m*m-y*(xn(d,d)-1);if(!(0>b)){var _=Math.sqrt(b),w=Cn(g,(-m-_)/y);if(Mn(w,d),w=Nn(w),!e)return w;var x,E=t[0],M=n[0],C=t[1],S=n[1];E>M&&(x=E,E=M,M=x);var N=M-E,A=Cs(N-Bs)<Us,D=A||Us>N;if(!A&&C>S&&(x=C,C=S,S=x),D?A?C+S>0^w[1]<(Cs(w[0]-E)<Us?C:S):C<=w[1]&&w[1]<=S:N>Bs^(E<=w[0]&&w[0]<=M)){var k=Cn(g,(-m+_)/y);return Mn(k,d),[w,Nn(k)]}}}function i(n,e){var r=s?t:Bs-t,i=0;return-r>n?i|=1:n>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var o=Math.cos(t),s=o>0,u=Cs(o)>Us,a=_e(t,6*Ys);return In(n,e,a,s?[0,-t]:[-Bs,t-Bs])}function Xn(t,n,e,r){return function(i){var o,s=i.a,u=i.b,a=s.x,c=s.y,h=u.x,l=u.y,f=0,p=1,d=h-a,v=l-c;if(o=t-a,d||!(o>0)){if(o/=d,0>d){if(f>o)return;p>o&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=e-a,d||!(0>o)){if(o/=d,0>d){if(o>p)return;o>f&&(f=o)}else if(d>0){if(f>o)return;p>o&&(p=o)}if(o=n-c,v||!(o>0)){if(o/=v,0>v){if(f>o)return;p>o&&(p=o)}else if(v>0){if(o>p)return;o>f&&(f=o)}if(o=r-c,v||!(0>o)){if(o/=v,0>v){if(o>p)return;o>f&&(f=o)}else if(v>0){if(f>o)return;p>o&&(p=o)}return f>0&&(i.a={x:a+f*d,y:c+f*v}),1>p&&(i.b={x:a+p*d,y:c+p*v}),i}}}}}}function Zn(t,n,e,r){function i(r,i){return Cs(r[0]-t)<Us?i>0?0:3:Cs(r[0]-e)<Us?i>0?2:1:Cs(r[1]-n)<Us?i>0?1:0:i>0?3:2}function o(t,n){return s(t.x,n.x)}function s(t,n){var e=i(t,1),r=i(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(u){function a(t){for(var n=0,e=g.length,r=t[1],i=0;e>i;++i)for(var o,s=1,u=g[i],a=u.length,c=u[0];a>s;++s)o=u[s],c[1]<=r?o[1]>r&&it(c,o,t)>0&&++n:o[1]<=r&&it(c,o,t)<0&&--n,c=o;return 0!==n}function c(o,u,a,c){var h=0,l=0;if(null==o||(h=i(o,a))!==(l=i(u,a))||s(o,u)<0^a>0){do c.point(0===h||3===h?t:e,h>1?r:n);while((h=(h+a+4)%4)!==l)}else c.point(u[0],u[1])}function h(i,o){return i>=t&&e>=i&&o>=n&&r>=o}function l(t,n){h(t,n)&&u.point(t,n)}function f(){D.point=d,g&&g.push(m=[]),M=!0,E=!1,w=x=NaN}function p(){v&&(d(y,b),_&&E&&N.rejoin(),v.push(N.buffer())),D.point=l,E&&u.lineEnd()}function d(t,n){t=Math.max(-Hu,Math.min(Hu,t)),n=Math.max(-Hu,Math.min(Hu,n));var e=h(t,n);if(g&&m.push([t,n]),M)y=t,b=n,_=e,M=!1,e&&(u.lineStart(),u.point(t,n));else if(e&&E)u.point(t,n);else{var r={a:{x:w,y:x},b:{x:t,y:n}};A(r)?(E||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),e||u.lineEnd(),C=!1):e&&(u.lineStart(),u.point(t,n),C=!1)}w=t,x=n,E=e}var v,g,m,y,b,_,w,x,E,M,C,S=u,N=Un(),A=Xn(t,n,e,r),D={point:l,lineStart:f,lineEnd:p,polygonStart:function(){u=N,v=[],g=[],C=!0},polygonEnd:function(){u=S,v=ps.merge(v);var n=a([t,r]),e=C&&n,i=v.length;(e||i)&&(u.polygonStart(),e&&(u.lineStart(),c(null,null,1,u),u.lineEnd()),i&&Pn(v,o,n,c,u),u.polygonEnd()),v=g=m=null}};return D}}function $n(t){var n=0,e=Bs/3,r=fe(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*Bs/180,e=t[1]*Bs/180):[n/Bs*180,e/Bs*180]},i}function Jn(t,n){function e(t,n){var e=Math.sqrt(o-2*i*Math.sin(n))/i;return[e*Math.sin(t*=i),s-e*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(n))/2,o=1+r*(2*i-r),s=Math.sqrt(o)/i;return e.invert=function(t,n){var e=s-n;return[Math.atan2(t,e)/i,st((o-(t*t+e*e)*i*i)/(2*i))]},e}function Kn(){function t(t,n){Gu+=i*t-r*n,r=t,i=n}var n,e,r,i;Ju.point=function(o,s){Ju.point=t,n=r=o,e=i=s},Ju.lineEnd=function(){t(n,e)}}function Qn(t,n){Yu>t&&(Yu=t),t>Zu&&(Zu=t),Xu>n&&(Xu=n),n>$u&&($u=n)}function te(){function t(t,n){s.push("M",t,",",n,o)}function n(t,n){s.push("M",t,",",n),u.point=e}function e(t,n){s.push("L",t,",",n)}function r(){u.point=t}function i(){s.push("Z")}var o=ne(4.5),s=[],u={point:t,lineStart:function(){u.point=n},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=ne(t),u},result:function(){if(s.length){var t=s.join("");return s=[],t}}};return u}function ne(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ee(t,n){Tu+=t,Ru+=n,++Fu}function re(){function t(t,r){var i=t-n,o=r-e,s=Math.sqrt(i*i+o*o);Pu+=s*(n+t)/2,ju+=s*(e+r)/2,Lu+=s,ee(n=t,e=r)}var n,e;Qu.point=function(r,i){Qu.point=t,ee(n=r,e=i)}}function ie(){Qu.point=ee}function oe(){function t(t,n){var e=t-r,o=n-i,s=Math.sqrt(e*e+o*o);Pu+=s*(r+t)/2,ju+=s*(i+n)/2,Lu+=s,s=i*t-r*n,Iu+=s*(r+t),zu+=s*(i+n),Uu+=3*s,ee(r=t,i=n)}var n,e,r,i;Qu.point=function(o,s){Qu.point=t,ee(n=r=o,e=i=s)},Qu.lineEnd=function(){t(n,e)}}function se(t){function n(n,e){t.moveTo(n+s,e),t.arc(n,e,s,0,Hs)}function e(n,e){t.moveTo(n,e),u.point=r}function r(n,e){t.lineTo(n,e)}function i(){u.point=n}function o(){t.closePath()}var s=4.5,u={point:n,lineStart:function(){u.point=e},lineEnd:i,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=i,u.point=n},pointRadius:function(t){return s=t,u},result:S};return u}function ue(t){function n(t){return(u?r:e)(t)}function e(n){return he(n,function(e,r){e=t(e,r),n.point(e[0],e[1])})}function r(n){function e(e,r){e=t(e,r),n.point(e[0],e[1])}function r(){b=NaN,M.point=o,n.lineStart()}function o(e,r){var o=wn([e,r]),s=t(e,r);i(b,_,y,w,x,E,b=s[0],_=s[1],y=e,w=o[0],x=o[1],E=o[2],u,n),n.point(b,_)}function s(){M.point=e,n.lineEnd()}function a(){r(),M.point=c,M.lineEnd=h}function c(t,n){o(l=t,f=n),p=b,d=_,v=w,g=x,m=E,M.point=o}function h(){i(b,_,y,w,x,E,p,d,l,v,g,m,u,n),M.lineEnd=s,s()}var l,f,p,d,v,g,m,y,b,_,w,x,E,M={point:e,lineStart:r,lineEnd:s,polygonStart:function(){n.polygonStart(),M.lineStart=a},polygonEnd:function(){n.polygonEnd(),M.lineStart=r}};return M}function i(n,e,r,u,a,c,h,l,f,p,d,v,g,m){var y=h-n,b=l-e,_=y*y+b*b;if(_>4*o&&g--){var w=u+p,x=a+d,E=c+v,M=Math.sqrt(w*w+x*x+E*E),C=Math.asin(E/=M),S=Cs(Cs(E)-1)<Us||Cs(r-f)<Us?(r+f)/2:Math.atan2(x,w),N=t(S,C),A=N[0],D=N[1],k=A-n,q=D-e,O=b*k-y*q;(O*O/_>o||Cs((y*k+b*q)/_-.5)>.3||s>u*p+a*d+c*v)&&(i(n,e,r,u,a,c,A,D,S,w/=M,x/=M,E,g,m),m.point(A,D),i(A,D,S,w,x,E,h,l,f,p,d,v,g,m))}}var o=.5,s=Math.cos(30*Ys),u=16;return n.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,n):Math.sqrt(o)},n}function ae(t){var n=ue(function(n,e){return t([n*Xs,e*Xs])});return function(t){return pe(n(t))}}function ce(t){this.stream=t}function he(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function le(t){return fe(function(){return t})()}function fe(t){function n(t){return t=u(t[0]*Ys,t[1]*Ys),[t[0]*f+a,c-t[1]*f]}function e(t){return t=u.invert((t[0]-a)/f,(c-t[1])/f),t&&[t[0]*Xs,t[1]*Xs]}function r(){u=Rn(s=ge(m,y,b),o);var t=o(v,g);return a=p-t[0]*f,c=d+t[1]*f,i()}function i(){return h&&(h.valid=!1,h=null),n}var o,s,u,a,c,h,l=ue(function(t,n){return t=o(t,n),[t[0]*f+a,c-t[1]*f]}),f=150,p=480,d=250,v=0,g=0,m=0,y=0,b=0,_=Bu,w=E,x=null,M=null;return n.stream=function(t){return h&&(h.valid=!1),h=pe(_(s,l(w(t)))),h.valid=!0,h},n.clipAngle=function(t){return arguments.length?(_=null==t?(x=t,Bu):Yn((x=+t)*Ys),i()):x},n.clipExtent=function(t){return arguments.length?(M=t,w=t?Zn(t[0][0],t[0][1],t[1][0],t[1][1]):E,i()):M},n.scale=function(t){return arguments.length?(f=+t,r()):f},n.translate=function(t){return arguments.length?(p=+t[0],d=+t[1],r()):[p,d]},n.center=function(t){return arguments.length?(v=t[0]%360*Ys,g=t[1]%360*Ys,r()):[v*Xs,g*Xs]},n.rotate=function(t){return arguments.length?(m=t[0]%360*Ys,y=t[1]%360*Ys,b=t.length>2?t[2]%360*Ys:0,r()):[m*Xs,y*Xs,b*Xs]},ps.rebind(n,l,"precision"),function(){return o=t.apply(this,arguments),n.invert=o.invert&&e,r()}}function pe(t){return he(t,function(n,e){t.point(n*Ys,e*Ys)})}function de(t,n){return[t,n]}function ve(t,n){return[t>Bs?t-Hs:-Bs>t?t+Hs:t,n]}function ge(t,n,e){return t?n||e?Rn(ye(t),be(n,e)):ye(t):n||e?be(n,e):ve}function me(t){return function(n,e){return n+=t,[n>Bs?n-Hs:-Bs>n?n+Hs:n,e]}}function ye(t){var n=me(t);return n.invert=me(-t),n}function be(t,n){function e(t,n){var e=Math.cos(n),u=Math.cos(t)*e,a=Math.sin(t)*e,c=Math.sin(n),h=c*r+u*i;return[Math.atan2(a*o-h*s,u*r-c*i),st(h*o+a*s)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(n),s=Math.sin(n);return e.invert=function(t,n){var e=Math.cos(n),u=Math.cos(t)*e,a=Math.sin(t)*e,c=Math.sin(n),h=c*o-a*s;return[Math.atan2(a*o+c*s,u*r+h*i),st(h*r-u*i)]},e}function _e(t,n){var e=Math.cos(t),r=Math.sin(t);return function(i,o,s,u){var a=s*n;null!=i?(i=we(e,i),o=we(e,o),(s>0?o>i:i>o)&&(i+=s*Hs)):(i=t+s*Hs,o=t-.5*a);for(var c,h=i;s>0?h>o:o>h;h-=a)u.point((c=Nn([e,-r*Math.cos(h),-r*Math.sin(h)]))[0],c[1])}}function we(t,n){var e=wn(n);e[0]-=t,Sn(e);var r=ot(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Us)%(2*Math.PI)}function xe(t,n,e){var r=ps.range(t,n-Us,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function Ee(t,n,e){var r=ps.range(t,n-Us,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function Me(t){return t.source}function Ce(t){return t.target}function Se(t,n,e,r){var i=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),a=i*Math.cos(t),c=i*Math.sin(t),h=s*Math.cos(e),l=s*Math.sin(e),f=2*Math.asin(Math.sqrt(ht(r-n)+i*s*ht(e-t))),p=1/Math.sin(f),d=f?function(t){var n=Math.sin(t*=f)*p,e=Math.sin(f-t)*p,r=e*a+n*h,i=e*c+n*l,s=e*o+n*u;return[Math.atan2(i,r)*Xs,Math.atan2(s,Math.sqrt(r*r+i*i))*Xs]}:function(){return[t*Xs,n*Xs]};return d.distance=f,d}function Ne(){function t(t,i){var o=Math.sin(i*=Ys),s=Math.cos(i),u=Cs((t*=Ys)-n),a=Math.cos(u);ta+=Math.atan2(Math.sqrt((u=s*Math.sin(u))*u+(u=r*o-e*s*a)*u),e*o+r*s*a),n=t,e=o,r=s}var n,e,r;na.point=function(i,o){n=i*Ys,e=Math.sin(o*=Ys),r=Math.cos(o),na.point=t},na.lineEnd=function(){na.point=na.lineEnd=S}}function Ae(t,n){function e(n,e){var r=Math.cos(n),i=Math.cos(e),o=t(r*i);return[o*i*Math.sin(n),o*Math.sin(e)]}return e.invert=function(t,e){var r=Math.sqrt(t*t+e*e),i=n(r),o=Math.sin(i),s=Math.cos(i);return[Math.atan2(t*o,r*s),Math.asin(r&&e*o/r)]},e}function De(t,n){function e(t,n){s>0?-Gs+Us>n&&(n=-Gs+Us):n>Gs-Us&&(n=Gs-Us);var e=s/Math.pow(i(n),o);return[e*Math.sin(o*t),s-e*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Bs/4+t/2)},o=t===n?Math.sin(t):Math.log(r/Math.cos(n))/Math.log(i(n)/i(t)),s=r*Math.pow(i(t),o)/o;return o?(e.invert=function(t,n){var e=s-n,r=rt(o)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/o,2*Math.atan(Math.pow(s/r,1/o))-Gs]},e):qe}function ke(t,n){function e(t,n){var e=o-n;return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}var r=Math.cos(t),i=t===n?Math.sin(t):(r-Math.cos(n))/(n-t),o=r/i+t;return Cs(i)<Us?de:(e.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/i,o-rt(i)*Math.sqrt(t*t+e*e)]},e)}function qe(t,n){return[t,Math.log(Math.tan(Bs/4+n/2))]}function Oe(t){var n,e=le(t),r=e.scale,i=e.translate,o=e.clipExtent;return e.scale=function(){var t=r.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.translate=function(){var t=i.apply(e,arguments);return t===e?n?e.clipExtent(null):e:t},e.clipExtent=function(t){var s=o.apply(e,arguments);if(s===e){if(n=null==t){var u=Bs*r(),a=i();o([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else n&&(s=null);return s},e.clipExtent(null)}function Te(t,n){return[Math.log(Math.tan(Bs/4+n/2)),-t]}function Re(t){return t[0]}function Fe(t){return t[1]}function Pe(t){for(var n=t.length,e=[0,1],r=2,i=2;n>i;i++){for(;r>1&&it(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function je(t,n){return t[0]-n[0]||t[1]-n[1]}function Le(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function Ie(t,n,e,r){var i=t[0],o=e[0],s=n[0]-i,u=r[0]-o,a=t[1],c=e[1],h=n[1]-a,l=r[1]-c,f=(u*(a-c)-l*(i-o))/(l*s-u*h);return[i+f*s,a+f*h]}function ze(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}function Ue(){ar(this),this.edge=this.site=this.circle=null}function Ve(t){var n=pa.pop()||new Ue;return n.site=t,n}function Be(t){Qe(t),ha.remove(t),pa.push(t),ar(t)}function He(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,s=t.N,u=[t];Be(t);for(var a=o;a.circle&&Cs(e-a.circle.x)<Us&&Cs(r-a.circle.cy)<Us;)o=a.P,u.unshift(a),Be(a),a=o;u.unshift(a),Qe(a);for(var c=s;c.circle&&Cs(e-c.circle.x)<Us&&Cs(r-c.circle.cy)<Us;)s=c.N,u.push(c),Be(c),c=s;u.push(c),Qe(c);var h,l=u.length;for(h=1;l>h;++h)c=u[h],a=u[h-1],or(c.edge,a.site,c.site,i);a=u[0],c=u[l-1],c.edge=rr(a.site,c.site,null,i),Ke(a),Ke(c)}function We(t){for(var n,e,r,i,o=t.x,s=t.y,u=ha._;u;)if(r=Ge(u,s)-o,r>Us)u=u.L;else{if(i=o-Ye(u,s),!(i>Us)){r>-Us?(n=u.P,e=u):i>-Us?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}var a=Ve(t);if(ha.insert(n,a),n||e){if(n===e)return Qe(n),e=Ve(n.site),ha.insert(a,e),a.edge=e.edge=rr(n.site,a.site),Ke(n),void Ke(e);if(!e)return void(a.edge=rr(n.site,a.site));Qe(n),Qe(e);var c=n.site,h=c.x,l=c.y,f=t.x-h,p=t.y-l,d=e.site,v=d.x-h,g=d.y-l,m=2*(f*g-p*v),y=f*f+p*p,b=v*v+g*g,_={x:(g*y-p*b)/m+h,y:(f*b-v*y)/m+l};or(e.edge,c,d,_),a.edge=rr(c,t,null,_),e.edge=rr(t,d,null,_),Ke(n),Ke(e)}}function Ge(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var s=t.P;if(!s)return-(1/0);e=s.site;var u=e.x,a=e.y,c=a-n;if(!c)return u;var h=u-r,l=1/o-1/c,f=h/c;return l?(-f+Math.sqrt(f*f-2*l*(h*h/(-2*c)-a+c/2+i-o/2)))/l+r:(r+u)/2}function Ye(t,n){var e=t.N;if(e)return Ge(e,n);var r=t.site;return r.y===n?r.x:1/0}function Xe(t){this.site=t,this.edges=[]}function Ze(t){for(var n,e,r,i,o,s,u,a,c,h,l=t[0][0],f=t[1][0],p=t[0][1],d=t[1][1],v=ca,g=v.length;g--;)if(o=v[g],o&&o.prepare())for(u=o.edges,a=u.length,s=0;a>s;)h=u[s].end(),r=h.x,i=h.y,c=u[++s%a].start(),n=c.x,e=c.y,(Cs(r-n)>Us||Cs(i-e)>Us)&&(u.splice(s,0,new sr(ir(o.site,h,Cs(r-l)<Us&&d-i>Us?{x:l,y:Cs(n-l)<Us?e:d}:Cs(i-d)<Us&&f-r>Us?{x:Cs(e-d)<Us?n:f,y:d}:Cs(r-f)<Us&&i-p>Us?{x:f,y:Cs(n-f)<Us?e:p}:Cs(i-p)<Us&&r-l>Us?{x:Cs(e-p)<Us?n:l,y:p}:null),o.site,null)),++a)}function $e(t,n){return n.angle-t.angle}function Je(){ar(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ke(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var s=i.x,u=i.y,a=r.x-s,c=r.y-u,h=o.x-s,l=o.y-u,f=2*(a*l-c*h);if(!(f>=-Vs)){var p=a*a+c*c,d=h*h+l*l,v=(l*p-c*d)/f,g=(a*d-h*p)/f,l=g+u,m=da.pop()||new Je;m.arc=t,m.site=i,m.x=v+s,m.y=l+Math.sqrt(v*v+g*g),m.cy=l,t.circle=m;for(var y=null,b=fa._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}fa.insert(y,m),y||(la=m)}}}}function Qe(t){var n=t.circle;n&&(n.P||(la=n.N),fa.remove(n),da.push(n),ar(n),t.circle=null)}function tr(t){for(var n,e=aa,r=Xn(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)n=e[i],(!nr(n,t)||!r(n)||Cs(n.a.x-n.b.x)<Us&&Cs(n.a.y-n.b.y)<Us)&&(n.a=n.b=null,e.splice(i,1))}function nr(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,s=n[0][0],u=n[1][0],a=n[0][1],c=n[1][1],h=t.l,l=t.r,f=h.x,p=h.y,d=l.x,v=l.y,g=(f+d)/2,m=(p+v)/2;if(v===p){if(s>g||g>=u)return;if(f>d){if(o){if(o.y>=c)return}else o={x:g,y:a};e={x:g,y:c}}else{if(o){if(o.y<a)return}else o={x:g,y:c};e={x:g,y:a}}}else if(r=(f-d)/(v-p),i=m-r*g,-1>r||r>1)if(f>d){if(o){if(o.y>=c)return}else o={x:(a-i)/r,y:a};e={x:(c-i)/r,y:c}}else{if(o){if(o.y<a)return}else o={x:(c-i)/r,y:c};e={x:(a-i)/r,y:a}}else if(v>p){if(o){if(o.x>=u)return}else o={x:s,y:r*s+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<s)return}else o={x:u,y:r*u+i};e={x:s,y:r*s+i}}return t.a=o,t.b=e,!0}function er(t,n){this.l=t,this.r=n,this.a=this.b=null}function rr(t,n,e,r){var i=new er(t,n);return aa.push(i),e&&or(i,t,n,e),r&&or(i,n,t,r),ca[t.i].edges.push(new sr(i,t,n)),ca[n.i].edges.push(new sr(i,n,t)),i}function ir(t,n,e){var r=new er(t,null);return r.a=n,r.b=e,aa.push(r),r}function or(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function sr(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ur(){this._=null}function ar(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function cr(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function hr(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function lr(t){for(;t.L;)t=t.L;return t}function fr(t,n){var e,r,i,o=t.sort(pr).pop();for(aa=[],ca=new Array(t.length),ha=new ur,fa=new ur;;)if(i=la,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==e||o.y!==r)&&(ca[o.i]=new Xe(o),We(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;He(i.arc)}n&&(tr(n),Ze(n));var s={cells:ca,edges:aa};return ha=fa=aa=ca=null,s}function pr(t,n){return n.y-t.y||n.x-t.x}function dr(t,n,e){return(t.x-e.x)*(n.y-t.y)-(t.x-n.x)*(e.y-t.y)}function vr(t){return t.x}function gr(t){return t.y}function mr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function yr(t,n,e,r,i,o){if(!t(n,e,r,i,o)){var s=.5*(e+i),u=.5*(r+o),a=n.nodes;a[0]&&yr(t,a[0],e,r,s,u),a[1]&&yr(t,a[1],s,r,i,u),a[2]&&yr(t,a[2],e,u,s,o),a[3]&&yr(t,a[3],s,u,i,o)}}function br(t,n,e,r,i,o,s){var u,a=1/0;return function c(t,h,l,f,p){if(!(h>o||l>s||r>f||i>p)){if(d=t.point){var d,v=n-t.x,g=e-t.y,m=v*v+g*g;if(a>m){var y=Math.sqrt(a=m);r=n-y,i=e-y,o=n+y,s=e+y,u=d}}for(var b=t.nodes,_=.5*(h+f),w=.5*(l+p),x=n>=_,E=e>=w,M=E<<1|x,C=M+4;C>M;++M)if(t=b[3&M])switch(3&M){case 0:c(t,h,l,_,w);break;case 1:c(t,_,l,f,w);break;case 2:c(t,h,w,_,p);break;case 3:c(t,_,w,f,p)}}}(t,r,i,o,s),u}function _r(t,n){t=ps.rgb(t),n=ps.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,s=n.g-r,u=n.b-i;return function(t){return"#"+Ct(Math.round(e+o*t))+Ct(Math.round(r+s*t))+Ct(Math.round(i+u*t))}}function wr(t,n){var e,r={},i={};for(e in t)e in n?r[e]=Mr(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function xr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Er(t,n){var e,r,i,o=ga.lastIndex=ma.lastIndex=0,s=-1,u=[],a=[];for(t+="",n+="";(e=ga.exec(t))&&(r=ma.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),
u[s]?u[s]+=i:u[++s]=i),(e=e[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,a.push({i:s,x:xr(e,r)})),o=ma.lastIndex;return o<n.length&&(i=n.slice(o),u[s]?u[s]+=i:u[++s]=i),u.length<2?a[0]?(n=a[0].x,function(t){return n(t)+""}):function(){return n}:(n=a.length,function(t){for(var e,r=0;n>r;++r)u[(e=a[r]).i]=e.x(t);return u.join("")})}function Mr(t,n){for(var e,r=ps.interpolators.length;--r>=0&&!(e=ps.interpolators[r](t,n)););return e}function Cr(t,n){var e,r=[],i=[],o=t.length,s=n.length,u=Math.min(t.length,n.length);for(e=0;u>e;++e)r.push(Mr(t[e],n[e]));for(;o>e;++e)i[e]=t[e];for(;s>e;++e)i[e]=n[e];return function(t){for(e=0;u>e;++e)i[e]=r[e](t);return i}}function Sr(t){return function(n){return 0>=n?0:n>=1?1:t(n)}}function Nr(t){return function(n){return 1-t(1-n)}}function Ar(t){return function(n){return.5*(.5>n?t(2*n):2-t(2-2*n))}}function Dr(t){return t*t}function kr(t){return t*t*t}function qr(t){if(0>=t)return 0;if(t>=1)return 1;var n=t*t,e=n*t;return 4*(.5>t?e:3*(t-n)+e-.75)}function Or(t){return function(n){return Math.pow(n,t)}}function Tr(t){return 1-Math.cos(t*Gs)}function Rr(t){return Math.pow(2,10*(t-1))}function Fr(t){return 1-Math.sqrt(1-t*t)}function Pr(t,n){var e;return arguments.length<2&&(n=.45),arguments.length?e=n/Hs*Math.asin(1/t):(t=1,e=n/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-e)*Hs/n)}}function jr(t){return t||(t=1.70158),function(n){return n*n*((t+1)*n-t)}}function Lr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Ir(t,n){t=ps.hcl(t),n=ps.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,s=n.c-r,u=n.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?n.c:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return vt(e+o*t,r+s*t,i+u*t)+""}}function zr(t,n){t=ps.hsl(t),n=ps.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,s=n.s-r,u=n.l-i;return isNaN(s)&&(s=0,r=isNaN(r)?n.s:r),isNaN(o)?(o=0,e=isNaN(e)?n.h:e):o>180?o-=360:-180>o&&(o+=360),function(t){return pt(e+o*t,r+s*t,i+u*t)+""}}function Ur(t,n){t=ps.lab(t),n=ps.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,s=n.a-r,u=n.b-i;return function(t){return mt(e+o*t,r+s*t,i+u*t)+""}}function Vr(t,n){return n-=t,function(e){return Math.round(t+n*e)}}function Br(t){var n=[t.a,t.b],e=[t.c,t.d],r=Wr(n),i=Hr(n,e),o=Wr(Gr(e,n,-i))||0;n[0]*e[1]<e[0]*n[1]&&(n[0]*=-1,n[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(n[1],n[0]):Math.atan2(-e[0],e[1]))*Xs,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Xs:0}function Hr(t,n){return t[0]*n[0]+t[1]*n[1]}function Wr(t){var n=Math.sqrt(Hr(t,t));return n&&(t[0]/=n,t[1]/=n),n}function Gr(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function Yr(t){return t.length?t.pop()+",":""}function Xr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function Zr(t,n,e,r){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),r.push({i:e.push(Yr(e)+"rotate(",null,")")-2,x:xr(t,n)})):n&&e.push(Yr(e)+"rotate("+n+")")}function $r(t,n,e,r){t!==n?r.push({i:e.push(Yr(e)+"skewX(",null,")")-2,x:xr(t,n)}):n&&e.push(Yr(e)+"skewX("+n+")")}function Jr(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(Yr(e)+"scale(",null,",",null,")");r.push({i:i-4,x:xr(t[0],n[0])},{i:i-2,x:xr(t[1],n[1])})}else(1!==n[0]||1!==n[1])&&e.push(Yr(e)+"scale("+n+")")}function Kr(t,n){var e=[],r=[];return t=ps.transform(t),n=ps.transform(n),Xr(t.translate,n.translate,e,r),Zr(t.rotate,n.rotate,e,r),$r(t.skew,n.skew,e,r),Jr(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,i=-1,o=r.length;++i<o;)e[(n=r[i]).i]=n.x(t);return e.join("")}}function Qr(t,n){return n=(n-=t=+t)||1/n,function(e){return(e-t)/n}}function ti(t,n){return n=(n-=t=+t)||1/n,function(e){return Math.max(0,Math.min(1,(e-t)/n))}}function ni(t){for(var n=t.source,e=t.target,r=ri(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function ei(t){for(var n=[],e=t.parent;null!=e;)n.push(t),t=e,e=e.parent;return n.push(t),n}function ri(t,n){if(t===n)return t;for(var e=ei(t),r=ei(n),i=e.pop(),o=r.pop(),s=null;i===o;)s=i,i=e.pop(),o=r.pop();return s}function ii(t){t.fixed|=2}function oi(t){t.fixed&=-7}function si(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ui(t){t.fixed&=-5}function ai(t,n,e){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,s=t.nodes,u=s.length,a=-1;++a<u;)o=s[a],null!=o&&(ai(o,n,e),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var c=n*e[t.point.index];t.charge+=t.pointCharge=c,r+=c*t.point.x,i+=c*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ci(t,n){return ps.rebind(t,n,"sort","children","value"),t.nodes=t,t.links=vi,t}function hi(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function li(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,s=-1;++s<i;)e.push(o[s]);for(;null!=(t=r.pop());)n(t)}function fi(t){return t.children}function pi(t){return t.value}function di(t,n){return n.value-t.value}function vi(t){return ps.merge(t.map(function(t){return(t.children||[]).map(function(n){return{source:t,target:n}})}))}function gi(t){return t.x}function mi(t){return t.y}function yi(t,n,e){t.y0=n,t.y=e}function bi(t){return ps.range(t.length)}function _i(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function wi(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;o>e;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function xi(t){return t.reduce(Ei,0)}function Ei(t,n){return t+n[1]}function Mi(t,n){return Ci(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Ci(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function Si(t){return[ps.min(t),ps.max(t)]}function Ni(t,n){return t.value-n.value}function Ai(t,n){var e=t._pack_next;t._pack_next=n,n._pack_prev=t,n._pack_next=e,e._pack_prev=n}function Di(t,n){t._pack_next=n,n._pack_prev=t}function ki(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return.999*i*i>e*e+r*r}function qi(t){function n(t){h=Math.min(t.x-t.r,h),l=Math.max(t.x+t.r,l),f=Math.min(t.y-t.r,f),p=Math.max(t.y+t.r,p)}if((e=t.children)&&(c=e.length)){var e,r,i,o,s,u,a,c,h=1/0,l=-(1/0),f=1/0,p=-(1/0);if(e.forEach(Oi),r=e[0],r.x=-r.r,r.y=0,n(r),c>1&&(i=e[1],i.x=i.r,i.y=0,n(i),c>2))for(o=e[2],Fi(r,i,o),n(o),Ai(r,o),r._pack_prev=o,Ai(o,i),i=r._pack_next,s=3;c>s;s++){Fi(r,i,o=e[s]);var d=0,v=1,g=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(ki(u,o)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!ki(a,o);a=a._pack_prev,g++);d?(g>v||v==g&&i.r<r.r?Di(r,i=u):Di(r=a,i),s--):(Ai(r,o),i=o,n(o))}var m=(h+l)/2,y=(f+p)/2,b=0;for(s=0;c>s;s++)o=e[s],o.x-=m,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,e.forEach(Ti)}}function Oi(t){t._pack_next=t._pack_prev=t}function Ti(t){delete t._pack_next,delete t._pack_prev}function Ri(t,n,e,r){var i=t.children;if(t.x=n+=r*t.x,t.y=e+=r*t.y,t.r*=r,i)for(var o=-1,s=i.length;++o<s;)Ri(i[o],n,e,r)}function Fi(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var s=n.r+e.r,u=i*i+o*o;s*=s,r*=r;var a=.5+(r-s)/(2*u),c=Math.sqrt(Math.max(0,2*s*(r+u)-(r-=u)*r-s*s))/(2*u);e.x=t.x+a*i+c*o,e.y=t.y+a*o-c*i}else e.x=t.x+r,e.y=t.y}function Pi(t,n){return t.parent==n.parent?1:2}function ji(t){var n=t.children;return n.length?n[0]:t.t}function Li(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function Ii(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function zi(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)n=i[o],n.z+=e,n.m+=e,e+=n.s+(r+=n.c)}function Ui(t,n,e){return t.a.parent===n.parent?t.a:e}function Vi(t){return 1+ps.max(t,function(t){return t.y})}function Bi(t){return t.reduce(function(t,n){return t+n.x},0)/t.length}function Hi(t){var n=t.children;return n&&n.length?Hi(n[0]):t}function Wi(t){var n,e=t.children;return e&&(n=e.length)?Wi(e[n-1]):t}function Gi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Yi(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return 0>i&&(e+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function Xi(t){var n=t[0],e=t[t.length-1];return e>n?[n,e]:[e,n]}function Zi(t){return t.rangeExtent?t.rangeExtent():Xi(t.range())}function $i(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function Ji(t,n){var e,r=0,i=t.length-1,o=t[r],s=t[i];return o>s&&(e=r,r=i,i=e,e=o,o=s,s=e),t[r]=n.floor(o),t[i]=n.ceil(s),t}function Ki(t){return t?{floor:function(n){return Math.floor(n/t)*t},ceil:function(n){return Math.ceil(n/t)*t}}:Aa}function Qi(t,n,e,r){var i=[],o=[],s=0,u=Math.min(t.length,n.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<=u;)i.push(e(t[s-1],t[s])),o.push(r(n[s-1],n[s]));return function(n){var e=ps.bisect(t,n,1,u)-1;return o[e](i[e](n))}}function to(t,n,e,r){function i(){var i=Math.min(t.length,n.length)>2?Qi:$i,a=r?ti:Qr;return s=i(t,n,a,e),u=i(n,t,a,Mr),o}function o(t){return s(t)}var s,u;return o.invert=function(t){return u(t)},o.domain=function(n){return arguments.length?(t=n.map(Number),i()):t},o.range=function(t){return arguments.length?(n=t,i()):n},o.rangeRound=function(t){return o.range(t).interpolate(Vr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(e=t,i()):e},o.ticks=function(n){return io(t,n)},o.tickFormat=function(n,e){return oo(t,n,e)},o.nice=function(n){return eo(t,n),i()},o.copy=function(){return to(t,n,e,r)},i()}function no(t,n){return ps.rebind(t,n,"range","rangeRound","interpolate","clamp")}function eo(t,n){return Ji(t,Ki(ro(t,n)[2])),Ji(t,Ki(ro(t,n)[2])),t}function ro(t,n){null==n&&(n=10);var e=Xi(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function io(t,n){return ps.range.apply(ps,ro(t,n))}function oo(t,n,e){var r=ro(t,n);if(e){var i=gu.exec(e);if(i.shift(),"s"===i[8]){var o=ps.formatPrefix(Math.max(Cs(r[0]),Cs(r[1])));return i[7]||(i[7]="."+so(o.scale(r[2]))),i[8]="f",e=ps.format(i.join("")),function(t){return e(o.scale(t))+o.symbol}}i[7]||(i[7]="."+uo(i[8],r)),e=i.join("")}else e=",."+so(r[2])+"f";return ps.format(e)}function so(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function uo(t,n){var e=so(n[2]);return t in Da?Math.abs(e-so(Math.max(Cs(n[0]),Cs(n[1]))))+ +("e"!==t):e-2*("%"===t)}function ao(t,n,e,r){function i(t){return(e?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function o(t){return e?Math.pow(n,t):-Math.pow(n,-t)}function s(n){return t(i(n))}return s.invert=function(n){return o(t.invert(n))},s.domain=function(n){return arguments.length?(e=n[0]>=0,t.domain((r=n.map(Number)).map(i)),s):r},s.base=function(e){return arguments.length?(n=+e,t.domain(r.map(i)),s):n},s.nice=function(){var n=Ji(r.map(i),e?Math:qa);return t.domain(n),r=n.map(o),s},s.ticks=function(){var t=Xi(r),s=[],u=t[0],a=t[1],c=Math.floor(i(u)),h=Math.ceil(i(a)),l=n%1?2:n;if(isFinite(h-c)){if(e){for(;h>c;c++)for(var f=1;l>f;f++)s.push(o(c)*f);s.push(o(c))}else for(s.push(o(c));c++<h;)for(var f=l-1;f>0;f--)s.push(o(c)*f);for(c=0;s[c]<u;c++);for(h=s.length;s[h-1]>a;h--);s=s.slice(c,h)}return s},s.tickFormat=function(t,e){if(!arguments.length)return ka;arguments.length<2?e=ka:"function"!=typeof e&&(e=ps.format(e));var r=Math.max(1,n*t/s.ticks().length);return function(t){var s=t/o(Math.round(i(t)));return n-.5>s*n&&(s*=n),r>=s?e(t):""}},s.copy=function(){return ao(t.copy(),n,e,r)},no(s,t)}function co(t,n,e){function r(n){return t(i(n))}var i=ho(n),o=ho(1/n);return r.invert=function(n){return o(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain((e=n.map(Number)).map(i)),r):e},r.ticks=function(t){return io(e,t)},r.tickFormat=function(t,n){return oo(e,t,n)},r.nice=function(t){return r.domain(eo(e,t))},r.exponent=function(s){return arguments.length?(i=ho(n=s),o=ho(1/n),t.domain(e.map(i)),r):n},r.copy=function(){return co(t.copy(),n,e)},no(r,t)}function ho(t){return function(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}}function lo(t,n){function e(e){return o[((i.get(e)||("range"===n.t?i.set(e,t.push(e)):NaN))-1)%o.length]}function r(n,e){return ps.range(t.length).map(function(t){return n+e*t})}var i,o,s;return e.domain=function(r){if(!arguments.length)return t;t=[],i=new d;for(var o,s=-1,u=r.length;++s<u;)i.has(o=r[s])||i.set(o,t.push(o));return e[n.t].apply(e,n.a)},e.range=function(t){return arguments.length?(o=t,s=0,n={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],c=i[1],h=t.length<2?(a=(a+c)/2,0):(c-a)/(t.length-1+u);return o=r(a+h*u/2,h),s=0,n={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],c=i[1],h=t.length<2?(a=c=Math.round((a+c)/2),0):(c-a)/(t.length-1+u)|0;return o=r(a+Math.round(h*u/2+(c-a-(t.length-1+u)*h)/2),h),s=0,n={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var c=i[1]<i[0],h=i[c-0],l=i[1-c],f=(l-h)/(t.length-u+2*a);return o=r(h+f*a,f),c&&o.reverse(),s=f*(1-u),n={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var c=i[1]<i[0],h=i[c-0],l=i[1-c],f=Math.floor((l-h)/(t.length-u+2*a));return o=r(h+Math.round((l-h-(t.length-u)*f)/2),f),c&&o.reverse(),s=Math.round(f*(1-u)),n={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return s},e.rangeExtent=function(){return Xi(n.a[0])},e.copy=function(){return lo(t,n)},e.domain(t)}function fo(t,n){function e(){var e=0,o=n.length;for(i=[];++e<o;)i[e-1]=ps.quantile(t,e/o);return r}function r(t){return isNaN(t=+t)?void 0:n[ps.bisect(i,t)]}var i;return r.domain=function(n){return arguments.length?(t=n.map(a).filter(c).sort(u),e()):t},r.range=function(t){return arguments.length?(n=t,e()):n},r.quantiles=function(){return i},r.invertExtent=function(e){return e=n.indexOf(e),0>e?[NaN,NaN]:[e>0?i[e-1]:t[0],e<i.length?i[e]:t[t.length-1]]},r.copy=function(){return fo(t,n)},e()}function po(t,n,e){function r(n){return e[Math.max(0,Math.min(s,Math.floor(o*(n-t))))]}function i(){return o=e.length/(n-t),s=e.length-1,r}var o,s;return r.domain=function(e){return arguments.length?(t=+e[0],n=+e[e.length-1],i()):[t,n]},r.range=function(t){return arguments.length?(e=t,i()):e},r.invertExtent=function(n){return n=e.indexOf(n),n=0>n?NaN:n/o+t,[n,n+1/o]},r.copy=function(){return po(t,n,e)},i()}function vo(t,n){function e(e){return e>=e?n[ps.bisect(t,e)]:void 0}return e.domain=function(n){return arguments.length?(t=n,e):t},e.range=function(t){return arguments.length?(n=t,e):n},e.invertExtent=function(e){return e=n.indexOf(e),[t[e-1],t[e]]},e.copy=function(){return vo(t,n)},e}function go(t){function n(t){return+t}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=e.map(n),n):t},n.ticks=function(n){return io(t,n)},n.tickFormat=function(n,e){return oo(t,n,e)},n.copy=function(){return go(t)},n}function mo(){return 0}function yo(t){return t.innerRadius}function bo(t){return t.outerRadius}function _o(t){return t.startAngle}function wo(t){return t.endAngle}function xo(t){return t&&t.padAngle}function Eo(t,n,e,r){return(t-e)*n-(n-r)*t>0?0:1}function Mo(t,n,e,r,i){var o=t[0]-n[0],s=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+s*s),a=u*s,c=-u*o,h=t[0]+a,l=t[1]+c,f=n[0]+a,p=n[1]+c,d=(h+f)/2,v=(l+p)/2,g=f-h,m=p-l,y=g*g+m*m,b=e-r,_=h*p-f*l,w=(0>m?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),x=(_*m-g*w)/y,E=(-_*g-m*w)/y,M=(_*m+g*w)/y,C=(-_*g+m*w)/y,S=x-d,N=E-v,A=M-d,D=C-v;return S*S+N*N>A*A+D*D&&(x=M,E=C),[[x-a,E-c],[x*e/b,E*e/b]]}function Co(t){function n(n){function s(){c.push("M",o(t(h),u))}for(var a,c=[],h=[],l=-1,f=n.length,p=qt(e),d=qt(r);++l<f;)i.call(this,a=n[l],l)?h.push([+p.call(this,a,l),+d.call(this,a,l)]):h.length&&(s(),h=[]);return h.length&&s(),c.length?c.join(""):null}var e=Re,r=Fe,i=Fn,o=So,s=o.key,u=.7;return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n.defined=function(t){return arguments.length?(i=t,n):i},n.interpolate=function(t){return arguments.length?(s="function"==typeof t?o=t:(o=ja.get(t)||So).key,n):s},n.tension=function(t){return arguments.length?(u=t,n):u},n}function So(t){return t.length>1?t.join("L"):t+"Z"}function No(t){return t.join("L")+"Z"}function Ao(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function Do(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function ko(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function qo(t,n){return t.length<4?So(t):t[1]+Ro(t.slice(1,-1),Fo(t,n))}function Oo(t,n){return t.length<3?No(t):t[0]+Ro((t.push(t[0]),t),Fo([t[t.length-2]].concat(t,[t[1]]),n))}function To(t,n){return t.length<3?So(t):t[0]+Ro(t,Fo(t,n))}function Ro(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return So(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],s=n[0],u=s,a=1;if(e&&(r+="Q"+(o[0]-2*s[0]/3)+","+(o[1]-2*s[1]/3)+","+o[0]+","+o[1],i=t[1],a=2),n.length>1){u=n[1],o=t[a],a++,r+="C"+(i[0]+s[0])+","+(i[1]+s[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var c=2;c<n.length;c++,a++)o=t[a],u=n[c],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var h=t[a];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+h[0]+","+h[1]}return r}function Fo(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],s=t[1],u=1,a=t.length;++u<a;)e=o,o=s,s=t[u],r.push([i*(s[0]-e[0]),i*(s[1]-e[1])]);return r}function Po(t){if(t.length<3)return So(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],s=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],a=[i,",",o,"L",zo(za,s),",",zo(za,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],s.shift(),s.push(r[0]),u.shift(),u.push(r[1]),Uo(a,s,u);return t.pop(),a.push("L",r),a.join("")}function jo(t){if(t.length<4)return So(t);for(var n,e=[],r=-1,i=t.length,o=[0],s=[0];++r<3;)n=t[r],o.push(n[0]),s.push(n[1]);for(e.push(zo(za,o)+","+zo(za,s)),--r;++r<i;)n=t[r],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Uo(e,o,s);return e.join("")}function Lo(t){for(var n,e,r=-1,i=t.length,o=i+4,s=[],u=[];++r<4;)e=t[r%i],s.push(e[0]),u.push(e[1]);for(n=[zo(za,s),",",zo(za,u)],--r;++r<o;)e=t[r%i],s.shift(),s.push(e[0]),u.shift(),u.push(e[1]),Uo(n,s,u);return n.join("")}function Io(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],s=t[0][1],u=t[e][0]-o,a=t[e][1]-s,c=-1;++c<=e;)r=t[c],i=c/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(s+i*a);return Po(t)}function zo(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function Uo(t,n,e){t.push("C",zo(La,n),",",zo(La,e),",",zo(Ia,n),",",zo(Ia,e),",",zo(za,n),",",zo(za,e))}function Vo(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Bo(t){for(var n=0,e=t.length-1,r=[],i=t[0],o=t[1],s=r[0]=Vo(i,o);++n<e;)r[n]=(s+(s=Vo(i=o,o=t[n+1])))/2;return r[n]=s,r}function Ho(t){for(var n,e,r,i,o=[],s=Bo(t),u=-1,a=t.length-1;++u<a;)n=Vo(t[u],t[u+1]),Cs(n)<Us?s[u]=s[u+1]=0:(e=s[u]/n,r=s[u+1]/n,i=e*e+r*r,i>9&&(i=3*n/Math.sqrt(i),s[u]=i*e,s[u+1]=i*r));for(u=-1;++u<=a;)i=(t[Math.min(a,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+s[u]*s[u])),o.push([i||0,s[u]*i||0]);return o}function Wo(t){return t.length<3?So(t):t[0]+Ro(t,Ho(t))}function Go(t){for(var n,e,r,i=-1,o=t.length;++i<o;)n=t[i],e=n[0],r=n[1]-Gs,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function Yo(t){function n(n){function a(){v.push("M",u(t(m),l),h,c(t(g.reverse()),l),"Z")}for(var f,p,d,v=[],g=[],m=[],y=-1,b=n.length,_=qt(e),w=qt(i),x=e===r?function(){return p}:qt(r),E=i===o?function(){return d}:qt(o);++y<b;)s.call(this,f=n[y],y)?(g.push([p=+_.call(this,f,y),d=+w.call(this,f,y)]),m.push([+x.call(this,f,y),+E.call(this,f,y)])):g.length&&(a(),g=[],m=[]);return g.length&&a(),v.length?v.join(""):null}var e=Re,r=Re,i=0,o=Fe,s=Fn,u=So,a=u.key,c=u,h="L",l=.7;return n.x=function(t){return arguments.length?(e=r=t,n):r},n.x0=function(t){return arguments.length?(e=t,n):e},n.x1=function(t){return arguments.length?(r=t,n):r},n.y=function(t){return arguments.length?(i=o=t,n):o},n.y0=function(t){return arguments.length?(i=t,n):i},n.y1=function(t){return arguments.length?(o=t,n):o},n.defined=function(t){return arguments.length?(s=t,n):s},n.interpolate=function(t){return arguments.length?(a="function"==typeof t?u=t:(u=ja.get(t)||So).key,c=u.reverse||u,h=u.closed?"M":"L",n):a},n.tension=function(t){return arguments.length?(l=t,n):l},n}function Xo(t){return t.radius}function Zo(t){return[t.x,t.y]}function $o(t){return function(){var n=t.apply(this,arguments),e=n[0],r=n[1]-Gs;return[e*Math.cos(r),e*Math.sin(r)]}}function Jo(){return 64}function Ko(){return"circle"}function Qo(t){var n=Math.sqrt(t/Bs);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}function ts(t){return function(){var n,e,r;(n=this[t])&&(r=n[e=n.active])&&(r.timer.c=null,r.timer.t=NaN,--n.count?delete n[e]:delete this[t],n.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ns(t,n,e){return ks(t,Ya),t.namespace=n,t.id=e,t}function es(t,n,e,r){var i=t.id,o=t.namespace;return X(t,"function"==typeof e?function(t,s,u){t[o][i].tween.set(n,r(e.call(t,t.__data__,s,u)))}:(e=r(e),function(t){t[o][i].tween.set(n,e)}))}function rs(t){return null==t&&(t=""),function(){this.textContent=t}}function is(t){return null==t?"__transition__":"__transition_"+t+"__"}function os(t,n,e,r,i){function o(t){var n=v.delay;return c.t=n+a,t>=n?s(t-n):void(c.c=s)}function s(e){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var s in p)if(r>+s){var d=p[s];d.timer.c=null,d.timer.t=NaN,--p.count,delete p[s]}c.c=u,Pt(function(){return c.c&&u(e||1)&&(c.c=null,c.t=NaN),1},0,a),p.active=r,v.event&&v.event.start.call(t,t.__data__,n),f=[],v.tween.forEach(function(e,r){(r=r.call(t,t.__data__,n))&&f.push(r)}),l=v.ease,h=v.duration}function u(i){for(var o=i/h,s=l(o),u=f.length;u>0;)f[--u].call(t,s);return o>=1?(v.event&&v.event.end.call(t,t.__data__,n),--p.count?delete p[r]:delete t[e],1):void 0}var a,c,h,l,f,p=t[e]||(t[e]={active:0,count:0}),v=p[r];v||(a=i.time,c=Pt(o,0,a),v=p[r]={tween:new d,time:a,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:n},i=null,++p.count)}function ss(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate("+(isFinite(r)?r:e(t))+",0)"})}function us(t,n,e){t.attr("transform",function(t){var r=n(t);return"translate(0,"+(isFinite(r)?r:e(t))+")"})}function as(t){return t.toISOString()}function cs(t,n,e){function r(n){return t(n)}function i(t,e){var r=t[1]-t[0],i=r/e,o=ps.bisect(ec,i);return o==ec.length?[n.year,ro(t.map(function(t){return t/31536e6}),e)[2]]:o?n[i/ec[o-1]<ec[o]/i?o-1:o]:[oc,ro(t,e)[2]]}return r.invert=function(n){return hs(t.invert(n))},r.domain=function(n){return arguments.length?(t.domain(n),r):t.domain().map(hs)},r.nice=function(t,n){function e(e){return!isNaN(e)&&!t.range(e,hs(+e+1),n).length}var o=r.domain(),s=Xi(o),u=null==t?i(s,10):"number"==typeof t&&i(s,t);return u&&(t=u[0],n=u[1]),r.domain(Ji(o,n>1?{floor:function(n){for(;e(n=t.floor(n));)n=hs(n-1);return n},ceil:function(n){for(;e(n=t.ceil(n));)n=hs(+n+1);return n}}:t))},r.ticks=function(t,n){var e=Xi(r.domain()),o=null==t?i(e,10):"number"==typeof t?i(e,t):!t.range&&[{range:t},n];return o&&(t=o[0],n=o[1]),t.range(e[0],hs(+e[1]+1),1>n?1:n)},r.tickFormat=function(){return e},r.copy=function(){return cs(t.copy(),n,e)},no(r,t)}function hs(t){return new Date(t)}function ls(t){return JSON.parse(t.responseText)}function fs(t){var n=gs.createRange();return n.selectNode(gs.body),n.createContextualFragment(t.responseText)}var ps={version:"3.5.13"},ds=[].slice,vs=function(t){return ds.call(t)},gs=this.document;if(gs)try{vs(gs.documentElement.childNodes)[0].nodeType}catch(ms){vs=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),gs)try{gs.createElement("DIV").style.setProperty("opacity",0,"")}catch(ys){var bs=this.Element.prototype,_s=bs.setAttribute,ws=bs.setAttributeNS,xs=this.CSSStyleDeclaration.prototype,Es=xs.setProperty;bs.setAttribute=function(t,n){_s.call(this,t,n+"")},bs.setAttributeNS=function(t,n,e){ws.call(this,t,n,e+"")},xs.setProperty=function(t,n,e){Es.call(this,t,n+"",e)}}ps.ascending=u,ps.descending=function(t,n){return t>n?-1:n>t?1:n>=t?0:NaN},ps.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e>r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e>r&&(e=r)}return e},ps.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r>e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r>=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r>e&&(e=r)}return e},ps.extent=function(t,n){var e,r,i,o=-1,s=t.length;if(1===arguments.length){for(;++o<s;)if(null!=(r=t[o])&&r>=r){e=i=r;break}for(;++o<s;)null!=(r=t[o])&&(e>r&&(e=r),r>i&&(i=r))}else{for(;++o<s;)if(null!=(r=n.call(t,t[o],o))&&r>=r){e=i=r;break}for(;++o<s;)null!=(r=n.call(t,t[o],o))&&(e>r&&(e=r),r>i&&(i=r))}return[e,i]},ps.sum=function(t,n){var e,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(e=+t[o])&&(r+=e);else for(;++o<i;)c(e=+n.call(t,t[o],o))&&(r+=e);return r},ps.mean=function(t,n){var e,r=0,i=t.length,o=-1,s=i;if(1===arguments.length)for(;++o<i;)c(e=a(t[o]))?r+=e:--s;else for(;++o<i;)c(e=a(n.call(t,t[o],o)))?r+=e:--s;return s?r/s:void 0},ps.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},ps.median=function(t,n){var e,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)c(e=a(t[o]))&&r.push(e);else for(;++o<i;)c(e=a(n.call(t,t[o],o)))&&r.push(e);return r.length?ps.quantile(r.sort(u),.5):void 0},ps.variance=function(t,n){var e,r,i=t.length,o=0,s=0,u=-1,h=0;if(1===arguments.length)for(;++u<i;)c(e=a(t[u]))&&(r=e-o,o+=r/++h,s+=r*(e-o));else for(;++u<i;)c(e=a(n.call(t,t[u],u)))&&(r=e-o,o+=r/++h,s+=r*(e-o));return h>1?s/(h-1):void 0},ps.deviation=function(){var t=ps.variance.apply(this,arguments);return t?Math.sqrt(t):t};var Ms=h(u);ps.bisectLeft=Ms.left,ps.bisect=ps.bisectRight=Ms.right,ps.bisector=function(t){return h(1===t.length?function(n,e){return u(t(n),e)}:t)},ps.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,2>o&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},ps.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},ps.pairs=function(t){for(var n,e=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>e;)o[e]=[n=i,i=t[++e]];return o},ps.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,n=ps.min(arguments,l),e=new Array(n);++t<n;)for(var r,i=-1,o=e[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return e},ps.transpose=function(t){return ps.zip.apply(ps,t)},ps.keys=function(t){var n=[];for(var e in t)n.push(e);return n},ps.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},ps.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},ps.merge=function(t){for(var n,e,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(e=new Array(s);--i>=0;)for(r=t[i],n=r.length;--n>=0;)e[--s]=r[n];return e};var Cs=Math.abs;ps.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e===1/0)throw new Error("infinite range");var r,i=[],o=f(Cs(e)),s=-1;if(t*=o,n*=o,e*=o,0>e)for(;(r=t+e*++s)>n;)i.push(r/o);else for(;(r=t+e*++s)<n;)i.push(r/o);return i},ps.map=function(t,n){var e=new d;if(t instanceof d)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var s in t)e.set(s,t[s]);return e};var Ss="__proto__",Ns="\x00";p(d,{has:m,get:function(t){return this._[v(t)]},set:function(t,n){return this._[v(t)]=n},remove:y,keys:b,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:g(n),value:this._[n]});return t},size:_,empty:w,forEach:function(t){for(var n in this._)t.call(this,g(n),this._[n])}}),ps.nest=function(){function t(n,s,u){if(u>=o.length)return r?r.call(i,s):e?s.sort(e):s;for(var a,c,h,l,f=-1,p=s.length,v=o[u++],g=new d;++f<p;)(l=g.get(a=v(c=s[f])))?l.push(c):g.set(a,[c]);return n?(c=n(),h=function(e,r){c.set(e,t(n,r,u))}):(c={},h=function(e,r){c[e]=t(n,r,u)}),g.forEach(h),c}function n(t,e){if(e>=o.length)return t;var r=[],i=s[e++];return t.forEach(function(t,i){r.push({key:t,values:n(i,e)})}),i?r.sort(function(t,n){return i(t.key,n.key)}):r}var e,r,i={},o=[],s=[];return i.map=function(n,e){return t(e,n,0)},i.entries=function(e){return n(t(ps.map,e,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return s[o.length-1]=t,i},i.sortValues=function(t){return e=t,i},i.rollup=function(t){return r=t,i},i},ps.set=function(t){var n=new x;if(t)for(var e=0,r=t.length;r>e;++e)n.add(t[e]);return n},p(x,{has:m,add:function(t){return this._[v(t+="")]=!0,t},remove:y,values:b,size:_,empty:w,forEach:function(t){for(var n in this._)t.call(this,g(n))}}),ps.behavior={},ps.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=M(t,n,n[e]);return t};var As=["webkit","ms","moz","Moz","o","O"];ps.dispatch=function(){for(var t=new N,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=A(t);return t},N.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ps.event=null,ps.requote=function(t){return t.replace(Ds,"\\$&")};var Ds=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ks={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},qs=function(t,n){return n.querySelector(t)},Os=function(t,n){return n.querySelectorAll(t)},Ts=function(t,n){var e=t.matches||t[C(t,"matchesSelector")];return(Ts=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(qs=function(t,n){return Sizzle(t,n)[0]||null},Os=Sizzle,Ts=Sizzle.matchesSelector),ps.selection=function(){return ps.select(gs.documentElement)};var Rs=ps.selection.prototype=[];Rs.select=function(t){var n,e,r,i,o=[];t=T(t);for(var s=-1,u=this.length;++s<u;){o.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var a=-1,c=r.length;++a<c;)(i=r[a])?(n.push(e=t.call(i,i.__data__,a,s)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return O(o)},Rs.selectAll=function(t){var n,e,r=[];t=R(t);for(var i=-1,o=this.length;++i<o;)for(var s=this[i],u=-1,a=s.length;++u<a;)(e=s[u])&&(r.push(n=vs(t.call(e,e.__data__,u,i))),n.parentNode=e);return O(r)};var Fs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ps.ns={prefix:Fs,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Fs.hasOwnProperty(e)?{space:Fs[e],local:t}:t}},Rs.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=ps.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(F(n,t[n]));return this}return this.each(F(t,n))},Rs.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=L(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!j(t[i]).test(n))return!1;return!0}for(n in t)this.each(I(n,t[n]));return this}return this.each(I(t,n))},Rs.style=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n="");for(e in t)this.each(U(e,t[e],n));
return this}if(2>r){var i=this.node();return s(i).getComputedStyle(i,null).getPropertyValue(t)}e=""}return this.each(U(t,n,e))},Rs.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(V(n,t[n]));return this}return this.each(V(t,n))},Rs.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Rs.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Rs.append=function(t){return t=B(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Rs.insert=function(t,n){return t=B(t),n=T(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Rs.remove=function(){return this.each(H)},Rs.data=function(t,n){function e(t,e){var r,i,o,s=t.length,h=e.length,l=Math.min(s,h),f=new Array(h),p=new Array(h),v=new Array(s);if(n){var g,m=new d,y=new Array(s);for(r=-1;++r<s;)(i=t[r])&&(m.has(g=n.call(i,i.__data__,r))?v[r]=i:m.set(g,i),y[r]=g);for(r=-1;++r<h;)(i=m.get(g=n.call(e,o=e[r],r)))?i!==!0&&(f[r]=i,i.__data__=o):p[r]=W(o),m.set(g,!0);for(r=-1;++r<s;)r in y&&m.get(y[r])!==!0&&(v[r]=t[r])}else{for(r=-1;++r<l;)i=t[r],o=e[r],i?(i.__data__=o,f[r]=i):p[r]=W(o);for(;h>r;++r)p[r]=W(e[r]);for(;s>r;++r)v[r]=t[r]}p.update=f,p.parentNode=f.parentNode=v.parentNode=t.parentNode,u.push(p),a.push(f),c.push(v)}var r,i,o=-1,s=this.length;if(!arguments.length){for(t=new Array(s=(r=this[0]).length);++o<s;)(i=r[o])&&(t[o]=i.__data__);return t}var u=Z([]),a=O([]),c=O([]);if("function"==typeof t)for(;++o<s;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<s;)e(r=this[o],t);return a.enter=function(){return u},a.exit=function(){return c},a},Rs.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Rs.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,s=this.length;s>o;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,a=e.length;a>u;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return O(i)},Rs.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},Rs.sort=function(t){t=Y.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Rs.each=function(t){return X(this,function(n,e,r){t.call(n,n.__data__,e,r)})},Rs.call=function(t){var n=vs(arguments);return t.apply(n[0]=this,n),this},Rs.empty=function(){return!this.node()},Rs.node=function(){for(var t=0,n=this.length;n>t;t++)for(var e=this[t],r=0,i=e.length;i>r;r++){var o=e[r];if(o)return o}return null},Rs.size=function(){var t=0;return X(this,function(){++t}),t};var Ps=[];ps.selection.enter=Z,ps.selection.enter.prototype=Ps,Ps.append=Rs.append,Ps.empty=Rs.empty,Ps.node=Rs.node,Ps.call=Rs.call,Ps.size=Rs.size,Ps.select=function(t){for(var n,e,r,i,o,s=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,s.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,h=i.length;++c<h;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,u)),e.__data__=o.__data__):n.push(null)}return O(s)},Ps.insert=function(t,n){return arguments.length<2&&(n=$(this)),Rs.insert.call(this,t,n)},ps.select=function(t){var n;return"string"==typeof t?(n=[qs(t,gs)],n.parentNode=gs.documentElement):(n=[t],n.parentNode=o(t)),O([n])},ps.selectAll=function(t){var n;return"string"==typeof t?(n=vs(Os(t,gs)),n.parentNode=gs.documentElement):(n=vs(t),n.parentNode=null),O([n])},Rs.on=function(t,n,e){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(n=!1);for(e in t)this.each(J(e,t[e],n));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(J(t,n,e))};var js=ps.map({mouseenter:"mouseover",mouseleave:"mouseout"});gs&&js.forEach(function(t){"on"+t in gs&&js.remove(t)});var Ls,Is=0;ps.mouse=function(t){return nt(t,k())};var zs=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ps.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=k().changedTouches),n)for(var r,i=0,o=n.length;o>i;++i)if((r=n[i]).identifier===e)return nt(t,r)},ps.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function n(t,n,i,o,s){return function(){function u(){var t,e,r=n(f,v);r&&(t=r[0]-b[0],e=r[1]-b[1],d|=t|e,b=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function a(){n(f,v)&&(m.on(o+g,null).on(s+g,null),y(d),p({type:"dragend"}))}var c,h=this,l=ps.event.target,f=h.parentNode,p=e.of(h,arguments),d=0,v=t(),g=".drag"+(null==v?"":"-"+v),m=ps.select(i(l)).on(o+g,u).on(s+g,a),y=tt(l),b=n(f,v);r?(c=r.apply(h,arguments),c=[c.x-b[0],c.y-b[1]]):c=[0,0],p({type:"dragstart"})}}var e=q(t,"drag","dragstart","dragend"),r=null,i=n(S,ps.mouse,s,"mousemove","mouseup"),o=n(et,ps.touch,E,"touchmove","touchend");return t.origin=function(n){return arguments.length?(r=n,t):r},ps.rebind(t,e,"on")},ps.touches=function(t,n){return arguments.length<2&&(n=k().touches),n?vs(n).map(function(n){var e=nt(t,n);return e.identifier=n.identifier,e}):[]};var Us=1e-6,Vs=Us*Us,Bs=Math.PI,Hs=2*Bs,Ws=Hs-Us,Gs=Bs/2,Ys=Bs/180,Xs=180/Bs,Zs=Math.SQRT2,$s=2,Js=4;ps.interpolateZoom=function(t,n){var e,r,i=t[0],o=t[1],s=t[2],u=n[0],a=n[1],c=n[2],h=u-i,l=a-o,f=h*h+l*l;if(Vs>f)r=Math.log(c/s)/Zs,e=function(t){return[i+t*h,o+t*l,s*Math.exp(Zs*t*r)]};else{var p=Math.sqrt(f),d=(c*c-s*s+Js*f)/(2*s*$s*p),v=(c*c-s*s-Js*f)/(2*c*$s*p),g=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/Zs,e=function(t){var n=t*r,e=at(g),u=s/($s*p)*(e*ct(Zs*n+g)-ut(g));return[i+u*h,o+u*l,s*e/at(Zs*n+g)]}}return e.duration=1e3*r,e},ps.behavior.zoom=function(){function t(t){t.on(k,l).on(Qs+".zoom",p).on("dblclick.zoom",d).on(R,f)}function n(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function e(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function r(t){M.k=Math.max(S[0],Math.min(S[1],t))}function i(t,n){n=e(n),M.x+=t[0]-n[0],M.y+=t[1]-n[1]}function o(n,e,o,s){n.__chart__={x:M.x,y:M.y,k:M.k},r(Math.pow(2,s)),i(g=e,o),n=ps.select(n),N>0&&(n=n.transition().duration(N)),n.call(t.event)}function u(){w&&w.domain(_.range().map(function(t){return(t-M.x)/M.k}).map(_.invert)),E&&E.domain(x.range().map(function(t){return(t-M.y)/M.k}).map(x.invert))}function a(t){A++||t({type:"zoomstart"})}function c(t){u(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function h(t){--A||(t({type:"zoomend"}),g=null)}function l(){function t(){u=1,i(ps.mouse(r),f),c(o)}function e(){l.on(O,null).on(T,null),p(u),h(o)}var r=this,o=F.of(r,arguments),u=0,l=ps.select(s(r)).on(O,t).on(T,e),f=n(ps.mouse(r)),p=tt(r);Ga.call(r),a(o)}function f(){function t(){var t=ps.touches(d);return p=M.k,t.forEach(function(t){t.identifier in g&&(g[t.identifier]=n(t))}),t}function e(){var n=ps.event.target;ps.select(n).on(_,s).on(w,u),x.push(n);for(var e=ps.event.changedTouches,r=0,i=e.length;i>r;++r)g[e[r].identifier]=null;var a=t(),c=Date.now();if(1===a.length){if(500>c-b){var h=a[0];o(d,h,g[h.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),D()}b=c}else if(a.length>1){var h=a[0],l=a[1],f=h[0]-l[0],p=h[1]-l[1];m=f*f+p*p}}function s(){var t,n,e,o,s=ps.touches(d);Ga.call(d);for(var u=0,a=s.length;a>u;++u,o=null)if(e=s[u],o=g[e.identifier]){if(n)break;t=e,n=o}if(o){var h=(h=e[0]-t[0])*h+(h=e[1]-t[1])*h,l=m&&Math.sqrt(h/m);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+o[0])/2,(n[1]+o[1])/2],r(l*p)}b=null,i(t,n),c(v)}function u(){if(ps.event.touches.length){for(var n=ps.event.changedTouches,e=0,r=n.length;r>e;++e)delete g[n[e].identifier];for(var i in g)return void t()}ps.selectAll(x).on(y,null),E.on(k,l).on(R,f),C(),h(v)}var p,d=this,v=F.of(d,arguments),g={},m=0,y=".zoom-"+ps.event.changedTouches[0].identifier,_="touchmove"+y,w="touchend"+y,x=[],E=ps.select(d),C=tt(d);e(),a(v),E.on(k,null).on(R,e)}function p(){var t=F.of(this,arguments);y?clearTimeout(y):(Ga.call(this),v=n(g=m||ps.mouse(this)),a(t)),y=setTimeout(function(){y=null,h(t)},50),D(),r(Math.pow(2,.002*Ks())*M.k),i(g,v),c(t)}function d(){var t=ps.mouse(this),e=Math.log(M.k)/Math.LN2;o(this,t,n(t),ps.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var v,g,m,y,b,_,w,x,E,M={x:0,y:0,k:1},C=[960,500],S=tu,N=250,A=0,k="mousedown.zoom",O="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",F=q(t,"zoomstart","zoom","zoomend");return Qs||(Qs="onwheel"in gs?(Ks=function(){return-ps.event.deltaY*(ps.event.deltaMode?120:1)},"wheel"):"onmousewheel"in gs?(Ks=function(){return ps.event.wheelDelta},"mousewheel"):(Ks=function(){return-ps.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=F.of(this,arguments),n=M;Ha?ps.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},a(t)}).tween("zoom:zoom",function(){var e=C[0],r=C[1],i=g?g[0]:e/2,o=g?g[1]:r/2,s=ps.interpolateZoom([(i-M.x)/M.k,(o-M.y)/M.k,e/M.k],[(i-n.x)/n.k,(o-n.y)/n.k,e/n.k]);return function(n){var r=s(n),u=e/r[2];this.__chart__=M={x:i-r[0]*u,y:o-r[1]*u,k:u},c(t)}}).each("interrupt.zoom",function(){h(t)}).each("end.zoom",function(){h(t)}):(this.__chart__=M,a(t),c(t),h(t))})},t.translate=function(n){return arguments.length?(M={x:+n[0],y:+n[1],k:M.k},u(),t):[M.x,M.y]},t.scale=function(n){return arguments.length?(M={x:M.x,y:M.y,k:null},r(+n),u(),t):M.k},t.scaleExtent=function(n){return arguments.length?(S=null==n?tu:[+n[0],+n[1]],t):S},t.center=function(n){return arguments.length?(m=n&&[+n[0],+n[1]],t):m},t.size=function(n){return arguments.length?(C=n&&[+n[0],+n[1]],t):C},t.duration=function(n){return arguments.length?(N=+n,t):N},t.x=function(n){return arguments.length?(w=n,_=n.copy(),M={x:0,y:0,k:1},t):w},t.y=function(n){return arguments.length?(E=n,x=n.copy(),M={x:0,y:0,k:1},t):E},ps.rebind(t,F,"on")};var Ks,Qs,tu=[0,1/0];ps.color=lt,lt.prototype.toString=function(){return this.rgb()+""},ps.hsl=ft;var nu=ft.prototype=new lt;nu.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,this.l/t)},nu.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ft(this.h,this.s,t*this.l)},nu.rgb=function(){return pt(this.h,this.s,this.l)},ps.hcl=dt;var eu=dt.prototype=new lt;eu.brighter=function(t){return new dt(this.h,this.c,Math.min(100,this.l+ru*(arguments.length?t:1)))},eu.darker=function(t){return new dt(this.h,this.c,Math.max(0,this.l-ru*(arguments.length?t:1)))},eu.rgb=function(){return vt(this.h,this.c,this.l).rgb()},ps.lab=gt;var ru=18,iu=.95047,ou=1,su=1.08883,uu=gt.prototype=new lt;uu.brighter=function(t){return new gt(Math.min(100,this.l+ru*(arguments.length?t:1)),this.a,this.b)},uu.darker=function(t){return new gt(Math.max(0,this.l-ru*(arguments.length?t:1)),this.a,this.b)},uu.rgb=function(){return mt(this.l,this.a,this.b)},ps.rgb=xt;var au=xt.prototype=new lt;au.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b,i=30;return n||e||r?(n&&i>n&&(n=i),e&&i>e&&(e=i),r&&i>r&&(r=i),new xt(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new xt(i,i,i)},au.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new xt(t*this.r,t*this.g,t*this.b)},au.hsl=function(){return Nt(this.r,this.g,this.b)},au.toString=function(){return"#"+Ct(this.r)+Ct(this.g)+Ct(this.b)};var cu=ps.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cu.forEach(function(t,n){cu.set(t,Et(n))}),ps.functor=qt,ps.xhr=Ot(E),ps.dsv=function(t,n){function e(t,e,o){arguments.length<3&&(o=e,e=null);var s=Tt(t,n,null==e?r:i(e),o);return s.row=function(t){return arguments.length?s.response(null==(e=t)?r:i(t)):e},s}function r(t){return e.parse(t.responseText)}function i(t){return function(n){return e.parse(n.responseText,t)}}function o(n){return n.map(s).join(t)}function s(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),a=t.charCodeAt(0);return e.parse=function(t,n){var r;return e.parseRows(t,function(t,e){if(r)return r(t,e-1);var i=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");r=n?function(t,e){return n(i(t),e)}:i})},e.parseRows=function(t,n){function e(){if(h>=c)return s;if(i)return i=!1,o;var n=h;if(34===t.charCodeAt(n)){for(var e=n;e++<c;)if(34===t.charCodeAt(e)){if(34!==t.charCodeAt(e+1))break;++e}h=e+2;var r=t.charCodeAt(e+1);return 13===r?(i=!0,10===t.charCodeAt(e+2)&&++h):10===r&&(i=!0),t.slice(n+1,e).replace(/""/g,'"')}for(;c>h;){var r=t.charCodeAt(h++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(h)&&(++h,++u);else if(r!==a)continue;return t.slice(n,h-u)}return t.slice(n)}for(var r,i,o={},s={},u=[],c=t.length,h=0,l=0;(r=e())!==s;){for(var f=[];r!==o&&r!==s;)f.push(r),r=e();n&&null==(f=n(f,l++))||u.push(f)}return u},e.format=function(n){if(Array.isArray(n[0]))return e.formatRows(n);var r=new x,i=[];return n.forEach(function(t){for(var n in t)r.has(n)||i.push(r.add(n))}),[i.map(s).join(t)].concat(n.map(function(n){return i.map(function(t){return s(n[t])}).join(t)})).join("\n")},e.formatRows=function(t){return t.map(o).join("\n")},e},ps.csv=ps.dsv(",","text/csv"),ps.tsv=ps.dsv("	","text/tab-separated-values");var hu,lu,fu,pu,du=this[C(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ps.timer=function(){Pt.apply(this,arguments)},ps.timer.flush=function(){Lt(),It()},ps.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var vu=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Ut);ps.formatPrefix=function(t,n){var e=0;return(t=+t)&&(0>t&&(t*=-1),n&&(t=ps.round(t,zt(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),vu[8+e/3]};var gu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,mu=ps.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=ps.round(t,zt(t,n))).toFixed(Math.max(0,Math.min(20,zt(t*(1+1e-15),n))))}}),yu=ps.time={},bu=Date;Ht.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){_u.setUTCDate.apply(this._,arguments)},setDay:function(){_u.setUTCDay.apply(this._,arguments)},setFullYear:function(){_u.setUTCFullYear.apply(this._,arguments)},setHours:function(){_u.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){_u.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){_u.setUTCMinutes.apply(this._,arguments)},setMonth:function(){_u.setUTCMonth.apply(this._,arguments)},setSeconds:function(){_u.setUTCSeconds.apply(this._,arguments)},setTime:function(){_u.setTime.apply(this._,arguments)}};var _u=Date.prototype;yu.year=Wt(function(t){return t=yu.day(t),t.setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),yu.years=yu.year.range,yu.years.utc=yu.year.utc.range,yu.day=Wt(function(t){var n=new bu(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),yu.days=yu.day.range,yu.days.utc=yu.day.utc.range,yu.dayOfYear=function(t){var n=yu.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,n){n=7-n;var e=yu[t]=Wt(function(t){return(t=yu.day(t)).setDate(t.getDate()-(t.getDay()+n)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var e=yu.year(t).getDay();return Math.floor((yu.dayOfYear(t)+(e+n)%7)/7)-(e!==n)});yu[t+"s"]=e.range,yu[t+"s"].utc=e.utc.range,yu[t+"OfYear"]=function(t){var e=yu.year(t).getDay();return Math.floor((yu.dayOfYear(t)+(e+n)%7)/7)}}),yu.week=yu.sunday,yu.weeks=yu.sunday.range,yu.weeks.utc=yu.sunday.utc.range,yu.weekOfYear=yu.sundayOfYear;var wu={"-":"",_:" ",0:"0"},xu=/^\s*\d+/,Eu=/^%/;ps.locale=function(t){return{numberFormat:Vt(t),timeFormat:Yt(t)}};var Mu=ps.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ps.format=Mu.numberFormat,ps.geo={},vn.prototype={s:0,t:0,add:function(t){gn(t,this.t,Cu),gn(Cu.s,this.s,this),this.s?this.t+=Cu.t:this.s=Cu.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Cu=new vn;ps.geo.stream=function(t,n){t&&Su.hasOwnProperty(t.type)?Su[t.type](t,n):mn(t,n)};var Su={Feature:function(t,n){mn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)mn(e[r].geometry,n)}},Nu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){yn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)yn(e[r],n,0)},Polygon:function(t,n){bn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)bn(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)mn(e[r],n)}};ps.geo.area=function(t){return Au=0,ps.geo.stream(t,ku),Au};var Au,Du=new vn,ku={sphere:function(){Au+=4*Bs},point:S,lineStart:S,lineEnd:S,polygonStart:function(){Du.reset(),ku.lineStart=_n},polygonEnd:function(){var t=2*Du;Au+=0>t?4*Bs+t:t,ku.lineStart=ku.lineEnd=ku.point=S}};ps.geo.bounds=function(){function t(t,n){b.push(_=[h=t,f=t]),l>n&&(l=n),n>p&&(p=n)}function n(n,e){var r=wn([n*Ys,e*Ys]);if(m){var i=En(m,r),o=[i[1],-i[0],0],s=En(o,i);Sn(s),s=Nn(s);var a=n-d,c=a>0?1:-1,v=s[0]*Xs*c,g=Cs(a)>180;if(g^(v>c*d&&c*n>v)){var y=s[1]*Xs;y>p&&(p=y)}else if(v=(v+360)%360-180,g^(v>c*d&&c*n>v)){var y=-s[1]*Xs;l>y&&(l=y)}else l>e&&(l=e),e>p&&(p=e);g?d>n?u(h,n)>u(h,f)&&(f=n):u(n,f)>u(h,f)&&(h=n):f>=h?(h>n&&(h=n),n>f&&(f=n)):n>d?u(h,n)>u(h,f)&&(f=n):u(n,f)>u(h,f)&&(h=n)}else t(n,e);m=r,d=n}function e(){w.point=n}function r(){_[0]=h,_[1]=f,w.point=t,m=null}function i(t,e){if(m){var r=t-d;y+=Cs(r)>180?r+(r>0?360:-360):r}else v=t,g=e;ku.point(t,e),n(t,e)}function o(){ku.lineStart()}function s(){i(v,g),ku.lineEnd(),Cs(y)>Us&&(h=-(f=180)),_[0]=h,_[1]=f,m=null}function u(t,n){return(n-=t)<0?n+360:n}function a(t,n){return t[0]-n[0]}function c(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}var h,l,f,p,d,v,g,m,y,b,_,w={point:t,lineStart:e,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=s,y=0,ku.polygonStart()},polygonEnd:function(){ku.polygonEnd(),w.point=t,w.lineStart=e,w.lineEnd=r,0>Du?(h=-(f=180),l=-(p=90)):y>Us?p=90:-Us>y&&(l=-90),_[0]=h,_[1]=f}};return function(t){p=f=-(h=l=1/0),b=[],ps.geo.stream(t,w);var n=b.length;if(n){b.sort(a);for(var e,r=1,i=b[0],o=[i];n>r;++r)e=b[r],c(e[0],i)||c(e[1],i)?(u(i[0],e[1])>u(i[0],i[1])&&(i[1]=e[1]),u(e[0],i[1])>u(i[0],i[1])&&(i[0]=e[0])):o.push(i=e);for(var s,e,d=-(1/0),n=o.length-1,r=0,i=o[n];n>=r;i=e,++r)e=o[r],(s=u(i[1],e[0]))>d&&(d=s,h=e[0],f=i[1])}return b=_=null,h===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[h,l],[f,p]]}}(),ps.geo.centroid=function(t){qu=Ou=Tu=Ru=Fu=Pu=ju=Lu=Iu=zu=Uu=0,ps.geo.stream(t,Vu);var n=Iu,e=zu,r=Uu,i=n*n+e*e+r*r;return Vs>i&&(n=Pu,e=ju,r=Lu,Us>Ou&&(n=Tu,e=Ru,r=Fu),i=n*n+e*e+r*r,Vs>i)?[NaN,NaN]:[Math.atan2(e,n)*Xs,st(r/Math.sqrt(i))*Xs]};var qu,Ou,Tu,Ru,Fu,Pu,ju,Lu,Iu,zu,Uu,Vu={sphere:S,point:Dn,lineStart:qn,lineEnd:On,polygonStart:function(){Vu.lineStart=Tn},polygonEnd:function(){Vu.lineStart=qn}},Bu=In(Fn,Bn,Wn,[-Bs,-Bs/2]),Hu=1e9;ps.geo.clipExtent=function(){var t,n,e,r,i,o,s={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Zn(t=+u[0][0],n=+u[0][1],e=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),s):[[t,n],[e,r]]}};return s.extent([[0,0],[960,500]])},(ps.geo.conicEqualArea=function(){return $n(Jn)}).raw=Jn,ps.geo.albers=function(){return ps.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ps.geo.albersUsa=function(){function t(t){var o=t[0],s=t[1];return n=null,e(o,s),n||(r(o,s),n)||i(o,s),n}var n,e,r,i,o=ps.geo.albers(),s=ps.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ps.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(t,e){n=[t,e]}};return t.invert=function(t){var n=o.scale(),e=o.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?s:i>=.166&&.234>i&&r>=-.214&&-.115>r?u:o).invert(t)},t.stream=function(t){var n=o.stream(t),e=s.stream(t),r=u.stream(t);return{point:function(t,i){n.point(t,i),e.point(t,i),r.point(t,i)},sphere:function(){n.sphere(),e.sphere(),r.sphere()},lineStart:function(){n.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){n.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){n.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){n.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},t.precision=function(n){return arguments.length?(o.precision(n),s.precision(n),u.precision(n),t):o.precision()},t.scale=function(n){return arguments.length?(o.scale(n),s.scale(.35*n),u.scale(n),t.translate(o.translate())):o.scale()},t.translate=function(n){if(!arguments.length)return o.translate();var c=o.scale(),h=+n[0],l=+n[1];return e=o.translate(n).clipExtent([[h-.455*c,l-.238*c],[h+.455*c,l+.238*c]]).stream(a).point,r=s.translate([h-.307*c,l+.201*c]).clipExtent([[h-.425*c+Us,l+.12*c+Us],[h-.214*c-Us,l+.234*c-Us]]).stream(a).point,i=u.translate([h-.205*c,l+.212*c]).clipExtent([[h-.214*c+Us,l+.166*c+Us],[h-.115*c-Us,l+.234*c-Us]]).stream(a).point,t},t.scale(1070)};var Wu,Gu,Yu,Xu,Zu,$u,Ju={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Gu=0,Ju.lineStart=Kn},polygonEnd:function(){Ju.lineStart=Ju.lineEnd=Ju.point=S,Wu+=Cs(Gu/2)}},Ku={point:Qn,lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S},Qu={point:ee,lineStart:re,lineEnd:ie,polygonStart:function(){Qu.lineStart=oe},polygonEnd:function(){Qu.point=ee,Qu.lineStart=re,Qu.lineEnd=ie}};ps.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),s&&s.valid||(s=i(o)),ps.geo.stream(t,s)),o.result()}function n(){return s=null,t}var e,r,i,o,s,u=4.5;return t.area=function(t){return Wu=0,ps.geo.stream(t,i(Ju)),Wu},t.centroid=function(t){return Tu=Ru=Fu=Pu=ju=Lu=Iu=zu=Uu=0,ps.geo.stream(t,i(Qu)),Uu?[Iu/Uu,zu/Uu]:Lu?[Pu/Lu,ju/Lu]:Fu?[Tu/Fu,Ru/Fu]:[NaN,NaN]},t.bounds=function(t){return Zu=$u=-(Yu=Xu=1/0),ps.geo.stream(t,i(Ku)),[[Yu,Xu],[Zu,$u]]},t.projection=function(t){return arguments.length?(i=(e=t)?t.stream||ae(t):E,n()):e},t.context=function(t){return arguments.length?(o=null==(r=t)?new te:new se(t),"function"!=typeof u&&o.pointRadius(u),n()):r},t.pointRadius=function(n){return arguments.length?(u="function"==typeof n?n:(o.pointRadius(+n),+n),t):u},t.projection(ps.geo.albersUsa()).context(null)},ps.geo.transform=function(t){return{stream:function(n){var e=new ce(n);for(var r in t)e[r]=t[r];return e}}},ce.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ps.geo.projection=le,ps.geo.projectionMutator=fe,(ps.geo.equirectangular=function(){return le(de)}).raw=de.invert=de,ps.geo.rotation=function(t){function n(n){return n=t(n[0]*Ys,n[1]*Ys),n[0]*=Xs,n[1]*=Xs,n}return t=ge(t[0]%360*Ys,t[1]*Ys,t.length>2?t[2]*Ys:0),n.invert=function(n){return n=t.invert(n[0]*Ys,n[1]*Ys),n[0]*=Xs,n[1]*=Xs,n},n},ve.invert=de,ps.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,n=ge(-t[0]*Ys,-t[1]*Ys,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Xs,t[1]*=Xs}}),{type:"Polygon",coordinates:[i]}}var n,e,r=[0,0],i=6;return t.origin=function(n){return arguments.length?(r=n,t):r},t.angle=function(r){return arguments.length?(e=_e((n=+r)*Ys,i*Ys),t):n},t.precision=function(r){return arguments.length?(e=_e(n*Ys,(i=+r)*Ys),t):i},t.angle(90)},ps.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Ys,i=t[1]*Ys,o=n[1]*Ys,s=Math.sin(r),u=Math.cos(r),a=Math.sin(i),c=Math.cos(i),h=Math.sin(o),l=Math.cos(o);return Math.atan2(Math.sqrt((e=l*s)*e+(e=c*h-a*l*u)*e),a*h+c*l*u)},ps.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return ps.range(Math.ceil(o/g)*g,i,g).map(f).concat(ps.range(Math.ceil(c/m)*m,a,m).map(p)).concat(ps.range(Math.ceil(r/d)*d,e,d).filter(function(t){return Cs(t%g)>Us}).map(h)).concat(ps.range(Math.ceil(u/v)*v,s,v).filter(function(t){return Cs(t%m)>Us}).map(l))}var e,r,i,o,s,u,a,c,h,l,f,p,d=10,v=d,g=90,m=360,y=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(a).slice(1),f(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(n){return arguments.length?t.majorExtent(n).minorExtent(n):t.minorExtent()},t.majorExtent=function(n){return arguments.length?(o=+n[0][0],i=+n[1][0],c=+n[0][1],a=+n[1][1],o>i&&(n=o,o=i,i=n),c>a&&(n=c,c=a,a=n),t.precision(y)):[[o,c],[i,a]]},t.minorExtent=function(n){return arguments.length?(r=+n[0][0],e=+n[1][0],u=+n[0][1],s=+n[1][1],r>e&&(n=r,r=e,e=n),u>s&&(n=u,u=s,s=n),t.precision(y)):[[r,u],[e,s]]},t.step=function(n){return arguments.length?t.majorStep(n).minorStep(n):t.minorStep()},t.majorStep=function(n){return arguments.length?(g=+n[0],m=+n[1],t):[g,m]},t.minorStep=function(n){return arguments.length?(d=+n[0],v=+n[1],t):[d,v]},t.precision=function(n){return arguments.length?(y=+n,h=xe(u,s,90),l=Ee(r,e,y),f=xe(c,a,90),p=Ee(o,i,y),t):y},t.majorExtent([[-180,-90+Us],[180,90-Us]]).minorExtent([[-180,-80-Us],[180,80+Us]])},ps.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}var n,e,r=Me,i=Ce;return t.distance=function(){return ps.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},t.source=function(e){return arguments.length?(r=e,n="function"==typeof e?null:e,t):r},t.target=function(n){return arguments.length?(i=n,e="function"==typeof n?null:n,t):i},t.precision=function(){return arguments.length?t:0},t},ps.geo.interpolate=function(t,n){return Se(t[0]*Ys,t[1]*Ys,n[0]*Ys,n[1]*Ys)},ps.geo.length=function(t){return ta=0,ps.geo.stream(t,na),ta};var ta,na={sphere:S,point:S,lineStart:Ne,lineEnd:S,polygonStart:S,polygonEnd:S},ea=Ae(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ps.geo.azimuthalEqualArea=function(){return le(ea)}).raw=ea;var ra=Ae(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},E);(ps.geo.azimuthalEquidistant=function(){return le(ra)}).raw=ra,(ps.geo.conicConformal=function(){return $n(De)}).raw=De,(ps.geo.conicEquidistant=function(){return $n(ke)}).raw=ke;var ia=Ae(function(t){return 1/t},Math.atan);(ps.geo.gnomonic=function(){return le(ia)}).raw=ia,qe.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-Gs]},(ps.geo.mercator=function(){return Oe(qe)}).raw=qe;var oa=Ae(function(){return 1},Math.asin);(ps.geo.orthographic=function(){return le(oa)}).raw=oa;var sa=Ae(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ps.geo.stereographic=function(){return le(sa)}).raw=sa,Te.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-Gs]},(ps.geo.transverseMercator=function(){var t=Oe(Te),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):(t=n(),[t[1],-t[0]])},t.rotate=function(t){return t?e([t[0],t[1],t.length>2?t[2]+90:90]):(t=e(),[t[0],t[1],t[2]-90])},e([0,0,90])}).raw=Te,ps.geom={},ps.geom.hull=function(t){function n(t){if(t.length<3)return[];var n,i=qt(e),o=qt(r),s=t.length,u=[],a=[];for(n=0;s>n;n++)u.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(u.sort(je),n=0;s>n;n++)a.push([u[n][0],-u[n][1]]);var c=Pe(u),h=Pe(a),l=h[0]===c[0],f=h[h.length-1]===c[c.length-1],p=[];for(n=c.length-1;n>=0;--n)p.push(t[u[c[n]][2]]);for(n=+l;n<h.length-f;++n)p.push(t[u[h[n]][2]]);return p}var e=Re,r=Fe;return arguments.length?n(t):(n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,
n):r},n)},ps.geom.polygon=function(t){return ks(t,ua),t};var ua=ps.geom.polygon.prototype=[];ua.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},ua.centroid=function(t){var n,e,r=-1,i=this.length,o=0,s=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,s+=(n[1]+u[1])*e;return[o*t,s*t]},ua.clip=function(t){for(var n,e,r,i,o,s,u=ze(t),a=-1,c=this.length-ze(this),h=this[c-1];++a<c;){for(n=t.slice(),t.length=0,i=this[a],o=n[(r=n.length-u)-1],e=-1;++e<r;)s=n[e],Le(s,h,i)?(Le(o,h,i)||t.push(Ie(o,s,h,i)),t.push(s)):Le(o,h,i)&&t.push(Ie(o,s,h,i)),o=s;u&&t.push(t[0]),h=i}return t};var aa,ca,ha,la,fa,pa=[],da=[];Xe.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)t=n[e].edge,t.b&&t.a||n.splice(e,1);return n.sort($e),n.length},sr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ur.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=lr(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(cr(this,e),t=e,e=t.U),e.C=!1,r.C=!0,hr(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(hr(this,e),t=e,e=t.U),e.C=!1,r.C=!0,cr(this,r))),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,s=t.R;if(e=o?s?lr(s):o:s,i?i.L===t?i.L=e:i.R=e:this._=e,o&&s?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==s?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=s,s.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(n=i.R,n.C&&(n.C=!1,i.C=!0,cr(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,hr(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,cr(this,i),t=this._;break}}else if(n=i.L,n.C&&(n.C=!1,i.C=!0,hr(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,cr(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,hr(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},ps.geom.voronoi=function(t){function n(t){var n=new Array(t.length),r=u[0][0],i=u[0][1],o=u[1][0],s=u[1][1];return fr(e(t),u).cells.forEach(function(e,u){var a=e.edges,c=e.site,h=n[u]=a.length?a.map(function(t){var n=t.start();return[n.x,n.y]}):c.x>=r&&c.x<=o&&c.y>=i&&c.y<=s?[[r,s],[o,s],[o,i],[r,i]]:[];h.point=t[u]}),n}function e(t){return t.map(function(t,n){return{x:Math.round(o(t,n)/Us)*Us,y:Math.round(s(t,n)/Us)*Us,i:n}})}var r=Re,i=Fe,o=r,s=i,u=va;return t?n(t):(n.links=function(t){return fr(e(t)).edges.filter(function(t){return t.l&&t.r}).map(function(n){return{source:t[n.l.i],target:t[n.r.i]}})},n.triangles=function(t){var n=[];return fr(e(t)).cells.forEach(function(e,r){for(var i,o,s=e.site,u=e.edges.sort($e),a=-1,c=u.length,h=u[c-1].edge,l=h.l===s?h.r:h.l;++a<c;)i=h,o=l,h=u[a].edge,l=h.l===s?h.r:h.l,r<o.i&&r<l.i&&dr(s,o,l)<0&&n.push([t[r],t[o.i],t[l.i]])}),n},n.x=function(t){return arguments.length?(o=qt(r=t),n):r},n.y=function(t){return arguments.length?(s=qt(i=t),n):i},n.clipExtent=function(t){return arguments.length?(u=null==t?va:t,n):u===va?null:u},n.size=function(t){return arguments.length?n.clipExtent(t&&[[0,0],t]):u===va?null:u&&u[1]},n)};var va=[[-1e6,-1e6],[1e6,1e6]];ps.geom.delaunay=function(t){return ps.geom.voronoi().triangles(t)},ps.geom.quadtree=function(t,n,e,r,i){function o(t){function o(t,n,e,r,i,o,s,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var a=t.x,h=t.y;if(null!=a)if(Cs(a-e)+Cs(h-r)<.01)c(t,n,e,r,i,o,s,u);else{var l=t.point;t.x=t.y=t.point=null,c(t,l,a,h,i,o,s,u),c(t,n,e,r,i,o,s,u)}else t.x=e,t.y=r,t.point=n}else c(t,n,e,r,i,o,s,u)}function c(t,n,e,r,i,s,u,a){var c=.5*(i+u),h=.5*(s+a),l=e>=c,f=r>=h,p=f<<1|l;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]=mr()),l?i=c:u=c,f?s=h:a=h,o(t,n,e,r,i,s,u,a)}var h,l,f,p,d,v,g,m,y,b=qt(u),_=qt(a);if(null!=n)v=n,g=e,m=r,y=i;else if(m=y=-(v=g=1/0),l=[],f=[],d=t.length,s)for(p=0;d>p;++p)h=t[p],h.x<v&&(v=h.x),h.y<g&&(g=h.y),h.x>m&&(m=h.x),h.y>y&&(y=h.y),l.push(h.x),f.push(h.y);else for(p=0;d>p;++p){var w=+b(h=t[p],p),x=+_(h,p);v>w&&(v=w),g>x&&(g=x),w>m&&(m=w),x>y&&(y=x),l.push(w),f.push(x)}var E=m-v,M=y-g;E>M?y=g+E:m=v+M;var C=mr();if(C.add=function(t){o(C,t,+b(t,++p),+_(t,p),v,g,m,y)},C.visit=function(t){yr(t,C,v,g,m,y)},C.find=function(t){return br(C,t[0],t[1],v,g,m,y)},p=-1,null==n){for(;++p<d;)o(C,t[p],l[p],f[p],v,g,m,y);--p}else t.forEach(C.add);return l=f=t=h=null,C}var s,u=Re,a=Fe;return(s=arguments.length)?(u=vr,a=gr,3===s&&(i=e,r=n,e=n=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(a=t,o):a},o.extent=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==n?null:[[n,e],[r,i]]},o.size=function(t){return arguments.length?(null==t?n=e=r=i=null:(n=e=0,r=+t[0],i=+t[1]),o):null==n?null:[r-n,i-e]},o)},ps.interpolateRgb=_r,ps.interpolateObject=wr,ps.interpolateNumber=xr,ps.interpolateString=Er;var ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ma=new RegExp(ga.source,"g");ps.interpolate=Mr,ps.interpolators=[function(t,n){var e=typeof n;return("string"===e?cu.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?_r:Er:n instanceof lt?_r:Array.isArray(n)?Cr:"object"===e&&isNaN(n)?wr:xr)(t,n)}],ps.interpolateArray=Cr;var ya=function(){return E},ba=ps.map({linear:ya,poly:Or,quad:function(){return Dr},cubic:function(){return kr},sin:function(){return Tr},exp:function(){return Rr},circle:function(){return Fr},elastic:Pr,back:jr,bounce:function(){return Lr}}),_a=ps.map({"in":E,out:Nr,"in-out":Ar,"out-in":function(t){return Ar(Nr(t))}});ps.ease=function(t){var n=t.indexOf("-"),e=n>=0?t.slice(0,n):t,r=n>=0?t.slice(n+1):"in";return e=ba.get(e)||ya,r=_a.get(r)||E,Sr(r(e.apply(null,ds.call(arguments,1))))},ps.interpolateHcl=Ir,ps.interpolateHsl=zr,ps.interpolateLab=Ur,ps.interpolateRound=Vr,ps.transform=function(t){var n=gs.createElementNS(ps.ns.prefix.svg,"g");return(ps.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new Br(e?e.matrix:wa)})(t)},Br.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var wa={a:1,b:0,c:0,d:1,e:0,f:0};ps.interpolateTransform=Kr,ps.layout={},ps.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(ni(t[e]));return n}},ps.layout.chord=function(){function t(){var t,c,l,f,p,d={},v=[],g=ps.range(o),m=[];for(e=[],r=[],t=0,f=-1;++f<o;){for(c=0,p=-1;++p<o;)c+=i[f][p];v.push(c),m.push(ps.range(o)),t+=c}for(s&&g.sort(function(t,n){return s(v[t],v[n])}),u&&m.forEach(function(t,n){t.sort(function(t,e){return u(i[n][t],i[n][e])})}),t=(Hs-h*o)/t,c=0,f=-1;++f<o;){for(l=c,p=-1;++p<o;){var y=g[f],b=m[y][p],_=i[y][b],w=c,x=c+=_*t;d[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:x,value:_}}r[y]={index:y,startAngle:l,endAngle:c,value:v[y]},c+=h}for(f=-1;++f<o;)for(p=f-1;++p<o;){var E=d[f+"-"+p],M=d[p+"-"+f];(E.value||M.value)&&e.push(E.value<M.value?{source:M,target:E}:{source:E,target:M})}a&&n()}function n(){e.sort(function(t,n){return a((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}var e,r,i,o,s,u,a,c={},h=0;return c.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,e=r=null,c):i},c.padding=function(t){return arguments.length?(h=t,e=r=null,c):h},c.sortGroups=function(t){return arguments.length?(s=t,e=r=null,c):s},c.sortSubgroups=function(t){return arguments.length?(u=t,e=null,c):u},c.sortChords=function(t){return arguments.length?(a=t,e&&n(),c):a},c.chords=function(){return e||t(),e},c.groups=function(){return r||t(),r},c},ps.layout.force=function(){function t(t){return function(n,e,r,i){if(n.point!==t){var o=n.cx-t.x,s=n.cy-t.y,u=i-e,a=o*o+s*s;if(a>u*u/m){if(v>a){var c=n.charge/a;t.px-=o*c,t.py-=s*c}return!0}if(n.point&&a&&v>a){var c=n.pointCharge/a;t.px-=o*c,t.py-=s*c}}return!n.charge}}function n(t){t.px=ps.event.x,t.py=ps.event.y,a.resume()}var e,r,i,o,s,u,a={},c=ps.dispatch("start","tick","end"),h=[1,1],l=.9,f=xa,p=Ea,d=-30,v=Ma,g=.1,m=.64,y=[],b=[];return a.tick=function(){if((i*=.99)<.005)return e=null,c.end({type:"end",alpha:i=0}),!0;var n,r,a,f,p,v,m,_,w,x=y.length,E=b.length;for(r=0;E>r;++r)a=b[r],f=a.source,p=a.target,_=p.x-f.x,w=p.y-f.y,(v=_*_+w*w)&&(v=i*s[r]*((v=Math.sqrt(v))-o[r])/v,_*=v,w*=v,p.x-=_*(m=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=w*m,f.x+=_*(m=1-m),f.y+=w*m);if((m=i*g)&&(_=h[0]/2,w=h[1]/2,r=-1,m))for(;++r<x;)a=y[r],a.x+=(_-a.x)*m,a.y+=(w-a.y)*m;if(d)for(ai(n=ps.geom.quadtree(y),i,u),r=-1;++r<x;)(a=y[r]).fixed||n.visit(t(a));for(r=-1;++r<x;)a=y[r],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*l,a.y-=(a.py-(a.py=a.y))*l);c.tick({type:"tick",alpha:i})},a.nodes=function(t){return arguments.length?(y=t,a):y},a.links=function(t){return arguments.length?(b=t,a):b},a.size=function(t){return arguments.length?(h=t,a):h},a.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,a):f},a.distance=a.linkDistance,a.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,a):p},a.friction=function(t){return arguments.length?(l=+t,a):l},a.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,a):d},a.chargeDistance=function(t){return arguments.length?(v=t*t,a):Math.sqrt(v)},a.gravity=function(t){return arguments.length?(g=+t,a):g},a.theta=function(t){return arguments.length?(m=t*t,a):Math.sqrt(m)},a.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:i=0})):t>0&&(c.start({type:"start",alpha:i=t}),e=Pt(a.tick)),a):i},a.start=function(){function t(t,r){if(!e){for(e=new Array(i),a=0;i>a;++a)e[a]=[];for(a=0;c>a;++a){var o=b[a];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var s,u=e[n],a=-1,h=u.length;++a<h;)if(!isNaN(s=u[a][t]))return s;return Math.random()*r}var n,e,r,i=y.length,c=b.length,l=h[0],v=h[1];for(n=0;i>n;++n)(r=y[n]).index=n,r.weight=0;for(n=0;c>n;++n)r=b[n],"number"==typeof r.source&&(r.source=y[r.source]),"number"==typeof r.target&&(r.target=y[r.target]),++r.source.weight,++r.target.weight;for(n=0;i>n;++n)r=y[n],isNaN(r.x)&&(r.x=t("x",l)),isNaN(r.y)&&(r.y=t("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof f)for(n=0;c>n;++n)o[n]=+f.call(this,b[n],n);else for(n=0;c>n;++n)o[n]=f;if(s=[],"function"==typeof p)for(n=0;c>n;++n)s[n]=+p.call(this,b[n],n);else for(n=0;c>n;++n)s[n]=p;if(u=[],"function"==typeof d)for(n=0;i>n;++n)u[n]=+d.call(this,y[n],n);else for(n=0;i>n;++n)u[n]=d;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return r||(r=ps.behavior.drag().origin(E).on("dragstart.force",ii).on("drag.force",n).on("dragend.force",oi)),arguments.length?void this.on("mouseover.force",si).on("mouseout.force",ui).call(r):r},ps.rebind(a,c,"on")};var xa=20,Ea=1,Ma=1/0;ps.layout.hierarchy=function(){function t(i){var o,s=[i],u=[];for(i.depth=0;null!=(o=s.pop());)if(u.push(o),(c=e.call(t,o,o.depth))&&(a=c.length)){for(var a,c,h;--a>=0;)s.push(h=c[a]),h.parent=o,h.depth=o.depth+1;r&&(o.value=0),o.children=c}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return li(i,function(t){var e,i;n&&(e=t.children)&&e.sort(n),r&&(i=t.parent)&&(i.value+=t.value)}),u}var n=di,e=fi,r=pi;return t.sort=function(e){return arguments.length?(n=e,t):n},t.children=function(n){return arguments.length?(e=n,t):e},t.value=function(n){return arguments.length?(r=n,t):r},t.revalue=function(n){return r&&(hi(n,function(t){t.children&&(t.value=0)}),li(n,function(n){var e;n.children||(n.value=+r.call(t,n,n.depth)||0),(e=n.parent)&&(e.value+=n.value)})),n},t},ps.layout.partition=function(){function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(s=o.length)){var s,u,a,c=-1;for(r=n.value?r/n.value:0;++c<s;)t(u=o[c],e,a=u.value*r,i),e+=a}}function n(t){var e=t.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,n(e[o]));return 1+r}function e(e,o){var s=r.call(this,e,o);return t(s[0],0,i[0],i[1]/n(s[0])),s}var r=ps.layout.hierarchy(),i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},ci(e,r)},ps.layout.pie=function(){function t(s){var u,a=s.length,c=s.map(function(e,r){return+n.call(t,e,r)}),h=+("function"==typeof r?r.apply(this,arguments):r),l=("function"==typeof i?i.apply(this,arguments):i)-h,f=Math.min(Math.abs(l)/a,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(0>l?-1:1),d=ps.sum(c),v=d?(l-a*p)/d:0,g=ps.range(a),m=[];return null!=e&&g.sort(e===Ca?function(t,n){return c[n]-c[t]}:function(t,n){return e(s[t],s[n])}),g.forEach(function(t){m[t]={data:s[t],value:u=c[t],startAngle:h,endAngle:h+=u*v+p,padAngle:f}}),m}var n=Number,e=Ca,r=0,i=Hs,o=0;return t.value=function(e){return arguments.length?(n=e,t):n},t.sort=function(n){return arguments.length?(e=n,t):e},t.startAngle=function(n){return arguments.length?(r=n,t):r},t.endAngle=function(n){return arguments.length?(i=n,t):i},t.padAngle=function(n){return arguments.length?(o=n,t):o},t};var Ca={};ps.layout.stack=function(){function t(u,a){if(!(f=u.length))return u;var c=u.map(function(e,r){return n.call(t,e,r)}),h=c.map(function(n){return n.map(function(n,e){return[o.call(t,n,e),s.call(t,n,e)]})}),l=e.call(t,h,a);c=ps.permute(c,l),h=ps.permute(h,l);var f,p,d,v,g=r.call(t,h,a),m=c[0].length;for(d=0;m>d;++d)for(i.call(t,c[0][d],v=g[d],h[0][d][1]),p=1;f>p;++p)i.call(t,c[p][d],v+=h[p-1][d][1],h[p][d][1]);return u}var n=E,e=bi,r=_i,i=yi,o=gi,s=mi;return t.values=function(e){return arguments.length?(n=e,t):n},t.order=function(n){return arguments.length?(e="function"==typeof n?n:Sa.get(n)||bi,t):e},t.offset=function(n){return arguments.length?(r="function"==typeof n?n:Na.get(n)||_i,t):r},t.x=function(n){return arguments.length?(o=n,t):o},t.y=function(n){return arguments.length?(s=n,t):s},t.out=function(n){return arguments.length?(i=n,t):i},t};var Sa=ps.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(wi),o=t.map(xi),s=ps.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,a=0,c=[],h=[];for(n=0;r>n;++n)e=s[n],a>u?(u+=o[e],c.push(e)):(a+=o[e],h.push(e));return h.reverse().concat(c)},reverse:function(t){return ps.range(t.length).reverse()},"default":bi}),Na=ps.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,s=[],u=0,a=[];for(e=0;o>e;++e){for(n=0,r=0;i>n;n++)r+=t[n][e][1];r>u&&(u=r),s.push(r)}for(e=0;o>e;++e)a[e]=(u-s[e])/2;return a},wiggle:function(t){var n,e,r,i,o,s,u,a,c,h=t.length,l=t[0],f=l.length,p=[];for(p[0]=a=c=0,e=1;f>e;++e){for(n=0,i=0;h>n;++n)i+=t[n][e][1];for(n=0,o=0,u=l[e][0]-l[e-1][0];h>n;++n){for(r=0,s=(t[n][e][1]-t[n][e-1][1])/(2*u);n>r;++r)s+=(t[r][e][1]-t[r][e-1][1])/u;o+=s*t[n][e][1]}p[e]=a-=i?o/i*u:0,c>a&&(c=a)}for(e=0;f>e;++e)p[e]-=c;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,s=1/i,u=[];for(e=0;o>e;++e){for(n=0,r=0;i>n;n++)r+=t[n][e][1];if(r)for(n=0;i>n;n++)t[n][e][1]/=r;else for(n=0;i>n;n++)t[n][e][1]=s}for(e=0;o>e;++e)u[e]=0;return u},zero:_i});ps.layout.histogram=function(){function t(t,o){for(var s,u,a=[],c=t.map(e,this),h=r.call(this,c,o),l=i.call(this,h,c,o),o=-1,f=c.length,p=l.length-1,d=n?1:1/f;++o<p;)s=a[o]=[],s.dx=l[o+1]-(s.x=l[o]),s.y=0;if(p>0)for(o=-1;++o<f;)u=c[o],u>=h[0]&&u<=h[1]&&(s=a[ps.bisect(l,u,1,p)-1],s.y+=d,s.push(t[o]));return a}var n=!0,e=Number,r=Si,i=Mi;return t.value=function(n){return arguments.length?(e=n,t):e},t.range=function(n){return arguments.length?(r=qt(n),t):r},t.bins=function(n){return arguments.length?(i="number"==typeof n?function(t){return Ci(t,n)}:qt(n),t):i},t.frequency=function(e){return arguments.length?(n=!!e,t):n},t},ps.layout.pack=function(){function t(t,o){var s=e.call(this,t,o),u=s[0],a=i[0],c=i[1],h=null==n?Math.sqrt:"function"==typeof n?n:function(){return n};if(u.x=u.y=0,li(u,function(t){t.r=+h(t.value)}),li(u,qi),r){var l=r*(n?1:Math.max(2*u.r/a,2*u.r/c))/2;li(u,function(t){t.r+=l}),li(u,qi),li(u,function(t){t.r-=l})}return Ri(u,a/2,c/2,n?1:1/Math.max(2*u.r/a,2*u.r/c)),s}var n,e=ps.layout.hierarchy().sort(Ni),r=0,i=[1,1];return t.size=function(n){return arguments.length?(i=n,t):i},t.radius=function(e){return arguments.length?(n=null==e||"function"==typeof e?e:+e,t):n},t.padding=function(n){return arguments.length?(r=+n,t):r},ci(t,e)},ps.layout.tree=function(){function t(t,i){var h=s.call(this,t,i),l=h[0],f=n(l);if(li(f,e),f.parent.m=-f.z,hi(f,r),c)hi(l,o);else{var p=l,d=l,v=l;hi(l,function(t){t.x<p.x&&(p=t),t.x>d.x&&(d=t),t.depth>v.depth&&(v=t)});var g=u(p,d)/2-p.x,m=a[0]/(d.x+u(d,p)/2+g),y=a[1]/(v.depth||1);hi(l,function(t){t.x=(t.x+g)*m,t.y=t.depth*y})}return h}function n(t){for(var n,e={A:null,children:[t]},r=[e];null!=(n=r.pop());)for(var i,o=n.children,s=0,u=o.length;u>s;++s)r.push((o[s]=i={_:o[s],parent:n,children:(i=o[s].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:s}).a=i);return e.children[0]}function e(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){zi(t);var o=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||e[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,n,e){if(n){for(var r,i=t,o=t,s=n,a=i.parent.children[0],c=i.m,h=o.m,l=s.m,f=a.m;s=Li(s),i=ji(i),s&&i;)a=ji(a),o=Li(o),o.a=t,r=s.z+l-i.z-c+u(s._,i._),r>0&&(Ii(Ui(s,t,e),t,r),c+=r,h+=r),l+=s.m,c+=i.m,f+=a.m,h+=o.m;s&&!Li(o)&&(o.t=s,o.m+=l-h),i&&!ji(a)&&(a.t=i,a.m+=c-f,e=t)}return e}function o(t){t.x*=a[0],t.y=t.depth*a[1]}var s=ps.layout.hierarchy().sort(null).value(null),u=Pi,a=[1,1],c=null;return t.separation=function(n){return arguments.length?(u=n,t):u},t.size=function(n){return arguments.length?(c=null==(a=n)?o:null,t):c?null:a},t.nodeSize=function(n){return arguments.length?(c=null==(a=n)?null:o,t):c?a:null},ci(t,s)},ps.layout.cluster=function(){function t(t,o){var s,u=n.call(this,t,o),a=u[0],c=0;li(a,function(t){var n=t.children;n&&n.length?(t.x=Bi(n),t.y=Vi(n)):(t.x=s?c+=e(t,s):0,t.y=0,s=t)});var h=Hi(a),l=Wi(a),f=h.x-e(h,l)/2,p=l.x+e(l,h)/2;return li(a,i?function(t){t.x=(t.x-a.x)*r[0],t.y=(a.y-t.y)*r[1]}:function(t){t.x=(t.x-f)/(p-f)*r[0],t.y=(1-(a.y?t.y/a.y:1))*r[1]}),u}var n=ps.layout.hierarchy().sort(null).value(null),e=Pi,r=[1,1],i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(n){return arguments.length?(i=null==(r=n),t):i?null:r},t.nodeSize=function(n){return arguments.length?(i=null!=(r=n),t):i?r:null},ci(t,n)},ps.layout.treemap=function(){function t(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(0>n?0:n),e.area=isNaN(r)||0>=r?0:r}function n(e){var o=e.children;if(o&&o.length){var s,u,a,c=l(e),h=[],f=o.slice(),d=1/0,v="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(t(f,c.dx*c.dy/e.value),h.area=0;(a=f.length)>0;)h.push(s=f[a-1]),h.area+=s.area,"squarify"!==p||(u=r(h,v))<=d?(f.pop(),d=u):(h.area-=h.pop().area,i(h,v,c,!1),v=Math.min(c.dx,c.dy),h.length=h.area=0,d=1/0);h.length&&(i(h,v,c,!0),h.length=h.area=0),o.forEach(n)}}function e(n){var r=n.children;if(r&&r.length){var o,s=l(n),u=r.slice(),a=[];for(t(u,s.dx*s.dy/n.value),a.area=0;o=u.pop();)a.push(o),a.area+=o.area,null!=o.z&&(i(a,o.z?s.dx:s.dy,s,!u.length),a.length=a.area=0);r.forEach(e)}}function r(t,n){for(var e,r=t.area,i=0,o=1/0,s=-1,u=t.length;++s<u;)(e=t[s].area)&&(o>e&&(o=e),e>i&&(i=e));return r*=r,n*=n,r?Math.max(n*i*d/r,r/(n*o*d)):1/0}function i(t,n,e,r){var i,o=-1,s=t.length,u=e.x,c=e.y,h=n?a(t.area/n):0;if(n==e.dx){for((r||h>e.dy)&&(h=e.dy);++o<s;)i=t[o],i.x=u,i.y=c,i.dy=h,u+=i.dx=Math.min(e.x+e.dx-u,h?a(i.area/h):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=h,e.dy-=h}else{for((r||h>e.dx)&&(h=e.dx);++o<s;)i=t[o],i.x=u,i.y=c,i.dx=h,c+=i.dy=Math.min(e.y+e.dy-c,h?a(i.area/h):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=h,e.dx-=h}}function o(r){var i=s||u(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=c[0],o.dy=c[1]):o.dx=o.dy=0,s&&u.revalue(o),t([o],o.dx*o.dy/o.value),(s?e:n)(o),f&&(s=i),i}var s,u=ps.layout.hierarchy(),a=Math.round,c=[1,1],h=null,l=Gi,f=!1,p="squarify",d=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(c=t,o):c},o.padding=function(t){function n(n){var e=t.call(o,n,n.depth);return null==e?Gi(n):Yi(n,"number"==typeof e?[e,e,e,e]:e)}function e(n){return Yi(n,t)}if(!arguments.length)return h;var r;return l=null==(h=t)?Gi:"function"==(r=typeof t)?n:"number"===r?(t=[t,t,t,t],e):e,o},o.round=function(t){return arguments.length?(a=t?Math.round:Number,o):a!=Number},o.sticky=function(t){return arguments.length?(f=t,s=null,o):f},o.ratio=function(t){return arguments.length?(d=t,o):d},o.mode=function(t){return arguments.length?(p=t+"",o):p},ci(o,u)},ps.random={normal:function(t,n){var e=arguments.length;return 2>e&&(n=1),1>e&&(t=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return t+n*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=ps.random.normal.apply(ps,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=ps.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(t){return function(){for(var n=0,e=0;t>e;e++)n+=Math.random();return n}}},ps.scale={};var Aa={floor:E,ceil:E};ps.scale.linear=function(){return to([0,1],[0,1],Mr,!1)};var Da={s:1,g:1,p:1,r:1,e:1};ps.scale.log=function(){return ao(ps.scale.linear().domain([0,1]),10,!0,[1,10])};var ka=ps.format(".0e"),qa={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ps.scale.pow=function(){return co(ps.scale.linear(),1,[0,1])},ps.scale.sqrt=function(){return ps.scale.pow().exponent(.5)},ps.scale.ordinal=function(){return lo([],{t:"range",a:[[]]})},ps.scale.category10=function(){return ps.scale.ordinal().range(Oa)},ps.scale.category20=function(){return ps.scale.ordinal().range(Ta)},ps.scale.category20b=function(){return ps.scale.ordinal().range(Ra)},ps.scale.category20c=function(){return ps.scale.ordinal().range(Fa)};var Oa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),Ta=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),Ra=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Fa=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ps.scale.quantile=function(){return fo([],[])},ps.scale.quantize=function(){return po(0,1,[0,1])},ps.scale.threshold=function(){return vo([.5],[0,1])},ps.scale.identity=function(){return go([0,1])},ps.svg={},ps.svg.arc=function(){function t(){var t=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),h=s.apply(this,arguments)-Gs,l=u.apply(this,arguments)-Gs,f=Math.abs(l-h),p=h>l?0:1;if(t>c&&(d=c,c=t,t=d),f>=Ws)return n(c,p)+(t?n(t,1-p):"")+"Z";var d,v,g,m,y,b,_,w,x,E,M,C,S=0,N=0,A=[];if((m=(+a.apply(this,arguments)||0)/2)&&(g=o===Pa?Math.sqrt(t*t+c*c):+o.apply(this,arguments),p||(N*=-1),c&&(N=st(g/c*Math.sin(m))),t&&(S=st(g/t*Math.sin(m)))),c){y=c*Math.cos(h+N),b=c*Math.sin(h+N),_=c*Math.cos(l-N),w=c*Math.sin(l-N);var D=Math.abs(l-h-2*N)<=Bs?0:1;if(N&&Eo(y,b,_,w)===p^D){var k=(h+l)/2;y=c*Math.cos(k),b=c*Math.sin(k),_=w=null}}else y=b=0;if(t){x=t*Math.cos(l-S),E=t*Math.sin(l-S),M=t*Math.cos(h+S),C=t*Math.sin(h+S);var q=Math.abs(h-l+2*S)<=Bs?0:1;if(S&&Eo(x,E,M,C)===1-p^q){var O=(h+l)/2;x=t*Math.cos(O),E=t*Math.sin(O),M=C=null}}else x=E=0;if(f>Us&&(d=Math.min(Math.abs(c-t)/2,+i.apply(this,arguments)))>.001){v=c>t^p?0:1;var T=d,R=d;if(Bs>f){var F=null==M?[x,E]:null==_?[y,b]:Ie([y,b],[M,C],[_,w],[x,E]),P=y-F[0],j=b-F[1],L=_-F[0],I=w-F[1],z=1/Math.sin(Math.acos((P*L+j*I)/(Math.sqrt(P*P+j*j)*Math.sqrt(L*L+I*I)))/2),U=Math.sqrt(F[0]*F[0]+F[1]*F[1]);R=Math.min(d,(t-U)/(z-1)),T=Math.min(d,(c-U)/(z+1))}if(null!=_){var V=Mo(null==M?[x,E]:[M,C],[y,b],c,T,p),B=Mo([_,w],[x,E],c,T,p);d===T?A.push("M",V[0],"A",T,",",T," 0 0,",v," ",V[1],"A",c,",",c," 0 ",1-p^Eo(V[1][0],V[1][1],B[1][0],B[1][1]),",",p," ",B[1],"A",T,",",T," 0 0,",v," ",B[0]):A.push("M",V[0],"A",T,",",T," 0 1,",v," ",B[0])}else A.push("M",y,",",b);if(null!=M){var H=Mo([y,b],[M,C],t,-R,p),W=Mo([x,E],null==_?[y,b]:[_,w],t,-R,p);d===R?A.push("L",W[0],"A",R,",",R," 0 0,",v," ",W[1],"A",t,",",t," 0 ",p^Eo(W[1][0],W[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",R,",",R," 0 0,",v," ",H[0]):A.push("L",W[0],"A",R,",",R," 0 0,",v," ",H[0])}else A.push("L",x,",",E)}else A.push("M",y,",",b),null!=_&&A.push("A",c,",",c," 0 ",D,",",p," ",_,",",w),A.push("L",x,",",E),null!=M&&A.push("A",t,",",t," 0 ",q,",",1-p," ",M,",",C);return A.push("Z"),A.join("")}function n(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}var e=yo,r=bo,i=mo,o=Pa,s=_o,u=wo,a=xo;return t.innerRadius=function(n){return arguments.length?(e=qt(n),t):e},t.outerRadius=function(n){return arguments.length?(r=qt(n),t):r},t.cornerRadius=function(n){return arguments.length?(i=qt(n),t):i},t.padRadius=function(n){return arguments.length?(o=n==Pa?Pa:qt(n),t):o},t.startAngle=function(n){return arguments.length?(s=qt(n),t):s},t.endAngle=function(n){return arguments.length?(u=qt(n),t):u},t.padAngle=function(n){return arguments.length?(a=qt(n),t):a},t.centroid=function(){var t=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,n=(+s.apply(this,arguments)+ +u.apply(this,arguments))/2-Gs;return[Math.cos(n)*t,Math.sin(n)*t]},t};var Pa="auto";ps.svg.line=function(){return Co(E)};var ja=ps.map({linear:So,"linear-closed":No,step:Ao,"step-before":Do,"step-after":ko,basis:Po,"basis-open":jo,"basis-closed":Lo,bundle:Io,cardinal:To,"cardinal-open":qo,"cardinal-closed":Oo,monotone:Wo});ja.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var La=[0,2/3,1/3,0],Ia=[0,1/3,2/3,0],za=[0,1/6,2/3,1/6];ps.svg.line.radial=function(){var t=Co(Go);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Do.reverse=ko,ko.reverse=Do,ps.svg.area=function(){return Yo(E)},ps.svg.area.radial=function(){var t=Yo(Go);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ps.svg.chord=function(){function t(t,u){var a=n(this,o,t,u),c=n(this,s,t,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(e(a,c)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,a.r,a.p0))+"Z"}function n(t,n,e,r){var i=n.call(t,e,r),o=u.call(t,i,r),s=a.call(t,i,r)-Gs,h=c.call(t,i,r)-Gs;return{r:o,a0:s,a1:h,p0:[o*Math.cos(s),o*Math.sin(s)],p1:[o*Math.cos(h),o*Math.sin(h)]}}function e(t,n){return t.a0==n.a0&&t.a1==n.a1}function r(t,n,e){return"A"+t+","+t+" 0 "+ +(e>Bs)+",1 "+n}function i(t,n,e,r){return"Q 0,0 "+r}var o=Me,s=Ce,u=Xo,a=_o,c=wo;return t.radius=function(n){return arguments.length?(u=qt(n),t):u},t.source=function(n){return arguments.length?(o=qt(n),t):o},t.target=function(n){return arguments.length?(s=qt(n),t):s},t.startAngle=function(n){return arguments.length?(a=qt(n),t):a},t.endAngle=function(n){return arguments.length?(c=qt(n),t):c},t},ps.svg.diagonal=function(){function t(t,i){var o=n.call(this,t,i),s=e.call(this,t,i),u=(o.y+s.y)/2,a=[o,{x:o.x,y:u},{x:s.x,y:u},s];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var n=Me,e=Ce,r=Zo;return t.source=function(e){return arguments.length?(n=qt(e),t):n},t.target=function(n){return arguments.length?(e=qt(n),t):e},t.projection=function(n){return arguments.length?(r=n,t):r},t},ps.svg.diagonal.radial=function(){var t=ps.svg.diagonal(),n=Zo,e=t.projection;return t.projection=function(t){return arguments.length?e($o(n=t)):n},t},ps.svg.symbol=function(){function t(t,r){return(Ua.get(n.call(this,t,r))||Qo)(e.call(this,t,r))}var n=Ko,e=Jo;return t.type=function(e){return arguments.length?(n=qt(e),t):n},t.size=function(n){return arguments.length?(e=qt(n),t):e},t};var Ua=ps.map({circle:Qo,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*Ba)),e=n*Ba;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/Va),e=n*Va/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/Va),e=n*Va/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});ps.svg.symbolTypes=Ua.keys();var Va=Math.sqrt(3),Ba=Math.tan(30*Ys);Rs.transition=function(t){for(var n,e,r=Ha||++Xa,i=is(t),o=[],s=Wa||{time:Date.now(),ease:qr,delay:0,duration:250},u=-1,a=this.length;++u<a;){o.push(n=[]);for(var c=this[u],h=-1,l=c.length;++h<l;)(e=c[h])&&os(e,h,i,r,s),n.push(e)}return ns(o,i,r)},Rs.interrupt=function(t){return this.each(null==t?Ga:ts(is(t)))};var Ha,Wa,Ga=ts(is()),Ya=[],Xa=0;Ya.call=Rs.call,Ya.empty=Rs.empty,Ya.node=Rs.node,Ya.size=Rs.size,ps.transition=function(t,n){return t&&t.transition?Ha?t.transition(n):t:ps.selection().transition(t)},ps.transition.prototype=Ya,Ya.select=function(t){var n,e,r,i=this.id,o=this.namespace,s=[];t=T(t);for(var u=-1,a=this.length;++u<a;){s.push(n=[]);for(var c=this[u],h=-1,l=c.length;++h<l;)(r=c[h])&&(e=t.call(r,r.__data__,h,u))?("__data__"in r&&(e.__data__=r.__data__),os(e,h,o,i,r[o][i]),n.push(e)):n.push(null)}return ns(s,o,i)},Ya.selectAll=function(t){var n,e,r,i,o,s=this.id,u=this.namespace,a=[];t=R(t);for(var c=-1,h=this.length;++c<h;)for(var l=this[c],f=-1,p=l.length;++f<p;)if(r=l[f]){o=r[u][s],e=t.call(r,r.__data__,f,c),a.push(n=[]);for(var d=-1,v=e.length;++d<v;)(i=e[d])&&os(i,d,u,s,o),n.push(i)}return ns(a,u,s)},Ya.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=G(t));for(var o=0,s=this.length;s>o;o++){i.push(n=[]);for(var e=this[o],u=0,a=e.length;a>u;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return ns(i,this.namespace,this.id)},Ya.tween=function(t,n){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(t):X(this,null==n?function(n){n[r][e].tween.remove(t)}:function(i){i[r][e].tween.set(t,n)})},Ya.attr=function(t,n){function e(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?e:(t+="",function(){var n,e=this.getAttribute(u);return e!==t&&(n=s(e,t),function(t){this.setAttribute(u,n(t))})})}function o(t){return null==t?r:(t+="",function(){var n,e=this.getAttributeNS(u.space,u.local);return e!==t&&(n=s(e,t),function(t){this.setAttributeNS(u.space,u.local,n(t))})})}if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var s="transform"==t?Kr:Mr,u=ps.ns.qualify(t);return es(this,"attr."+t,n,u.local?o:i)},Ya.attrTween=function(t,n){function e(t,e){var r=n.call(this,t,e,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,e){var r=n.call(this,t,e,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=ps.ns.qualify(t);return this.tween("attr."+t,i.local?r:e)},Ya.style=function(t,n,e){function r(){this.style.removeProperty(t)}function i(n){return null==n?r:(n+="",function(){var r,i=s(this).getComputedStyle(this,null).getPropertyValue(t);return i!==n&&(r=Mr(i,n),function(n){this.style.setProperty(t,r(n),e)})})}var o=arguments.length;if(3>o){if("string"!=typeof t){2>o&&(n="");for(e in t)this.style(e,t[e],n);return this}e=""}return es(this,"style."+t,n,i)},Ya.styleTween=function(t,n,e){function r(r,i){var o=n.call(this,r,i,s(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(n){this.style.setProperty(t,o(n),e)}}return arguments.length<3&&(e=""),this.tween("style."+t,r)},
Ya.text=function(t){return es(this,"text",t,rs)},Ya.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var n;this[t].count<2&&(n=this.parentNode)&&n.removeChild(this)})},Ya.ease=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].ease:("function"!=typeof t&&(t=ps.ease.apply(ps,arguments)),X(this,function(r){r[e][n].ease=t}))},Ya.delay=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].delay:X(this,"function"==typeof t?function(r,i,o){r[e][n].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[e][n].delay=t}))},Ya.duration=function(t){var n=this.id,e=this.namespace;return arguments.length<1?this.node()[e][n].duration:X(this,"function"==typeof t?function(r,i,o){r[e][n].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[e][n].duration=t}))},Ya.each=function(t,n){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Wa,o=Ha;try{Ha=e,X(this,function(n,i,o){Wa=n[r][e],t.call(n,n.__data__,i,o)})}finally{Wa=i,Ha=o}}else X(this,function(i){var o=i[r][e];(o.event||(o.event=ps.dispatch("start","end","interrupt"))).on(t,n)});return this},Ya.transition=function(){for(var t,n,e,r,i=this.id,o=++Xa,s=this.namespace,u=[],a=0,c=this.length;c>a;a++){u.push(t=[]);for(var n=this[a],h=0,l=n.length;l>h;h++)(e=n[h])&&(r=e[s][i],os(e,h,s,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(e)}return ns(u,s,o)},ps.svg.axis=function(){function t(t){t.each(function(){var t,c=ps.select(this),h=this.__chart__||e,l=this.__chart__=e.copy(),f=null==a?l.ticks?l.ticks.apply(l,u):l.domain():a,p=null==n?l.tickFormat?l.tickFormat.apply(l,u):E:n,d=c.selectAll(".tick").data(f,l),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Us),g=ps.transition(d.exit()).style("opacity",Us).remove(),m=ps.transition(d.order()).style("opacity",1),y=Math.max(i,0)+s,b=Zi(l),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),ps.transition(_));v.append("line"),v.append("text");var x,M,C,S,N=v.select("line"),A=m.select("line"),D=d.select("text").text(p),k=v.select("text"),q=m.select("text"),O="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ss,x="x",C="y",M="x2",S="y2",D.attr("dy",0>O?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+O*o+"V0H"+b[1]+"V"+O*o)):(t=us,x="y",C="x",M="y2",S="x2",D.attr("dy",".32em").style("text-anchor",0>O?"end":"start"),w.attr("d","M"+O*o+","+b[0]+"H0V"+b[1]+"H"+O*o)),N.attr(S,O*i),k.attr(C,O*y),A.attr(M,0).attr(S,O*i),q.attr(x,0).attr(C,O*y),l.rangeBand){var T=l,R=T.rangeBand()/2;h=l=function(t){return T(t)+R}}else h.rangeBand?h=l:g.call(t,l,h);v.call(t,h,l),m.call(t,l,l)})}var n,e=ps.scale.linear(),r=Za,i=6,o=6,s=3,u=[10],a=null;return t.scale=function(n){return arguments.length?(e=n,t):e},t.orient=function(n){return arguments.length?(r=n in $a?n+"":Za,t):r},t.ticks=function(){return arguments.length?(u=vs(arguments),t):u},t.tickValues=function(n){return arguments.length?(a=n,t):a},t.tickFormat=function(e){return arguments.length?(n=e,t):n},t.tickSize=function(n){var e=arguments.length;return e?(i=+n,o=+arguments[e-1],t):i},t.innerTickSize=function(n){return arguments.length?(i=+n,t):i},t.outerTickSize=function(n){return arguments.length?(o=+n,t):o},t.tickPadding=function(n){return arguments.length?(s=+n,t):s},t.tickSubdivide=function(){return arguments.length&&t},t};var Za="bottom",$a={top:1,right:1,bottom:1,left:1};ps.svg.brush=function(){function t(o){o.each(function(){var o=ps.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),s=o.selectAll(".background").data([0]);s.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),o.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=o.selectAll(".resize").data(v,E);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Ja[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var a,l=ps.transition(o),f=ps.transition(s);c&&(a=Zi(c),f.attr("x",a[0]).attr("width",a[1]-a[0]),e(l)),h&&(a=Zi(h),f.attr("y",a[0]).attr("height",a[1]-a[0]),r(l)),n(l)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+f[+/^s/.test(t)]+")"})}function e(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(t){t.select(".extent").attr("y",f[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function i(){function i(){32==ps.event.keyCode&&(A||(b=null,q[0]-=l[1],q[1]-=f[1],A=2),D())}function v(){32==ps.event.keyCode&&2==A&&(q[0]+=l[1],q[1]+=f[1],A=0,D())}function g(){var t=ps.mouse(w),i=!1;_&&(t[0]+=_[0],t[1]+=_[1]),A||(ps.event.altKey?(b||(b=[(l[0]+l[1])/2,(f[0]+f[1])/2]),q[0]=l[+(t[0]<b[0])],q[1]=f[+(t[1]<b[1])]):b=null),S&&m(t,c,0)&&(e(M),i=!0),N&&m(t,h,1)&&(r(M),i=!0),i&&(n(M),E({type:"brush",mode:A?"move":"resize"}))}function m(t,n,e){var r,i,s=Zi(n),a=s[0],c=s[1],h=q[e],v=e?f:l,g=v[1]-v[0];return A&&(a-=h,c-=g+h),r=(e?d:p)?Math.max(a,Math.min(c,t[e])):t[e],A?i=(r+=h)+g:(b&&(h=Math.max(a,Math.min(c,2*b[e]-r))),r>h?(i=r,r=h):i=h),v[0]!=r||v[1]!=i?(e?u=null:o=null,v[0]=r,v[1]=i,!0):void 0}function y(){g(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ps.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),k(),E({type:"brushend"})}var b,_,w=this,x=ps.select(ps.event.target),E=a.of(w,arguments),M=ps.select(w),C=x.datum(),S=!/^(n|s)$/.test(C)&&c,N=!/^(e|w)$/.test(C)&&h,A=x.classed("extent"),k=tt(w),q=ps.mouse(w),O=ps.select(s(w)).on("keydown.brush",i).on("keyup.brush",v);if(ps.event.changedTouches?O.on("touchmove.brush",g).on("touchend.brush",y):O.on("mousemove.brush",g).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),A)q[0]=l[0]-q[0],q[1]=f[0]-q[1];else if(C){var T=+/w$/.test(C),R=+/^n/.test(C);_=[l[1-T]-q[0],f[1-R]-q[1]],q[0]=l[T],q[1]=f[R]}else ps.event.altKey&&(b=q.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),ps.select("body").style("cursor",x.style("cursor")),E({type:"brushstart"}),g()}var o,u,a=q(t,"brushstart","brush","brushend"),c=null,h=null,l=[0,0],f=[0,0],p=!0,d=!0,v=Ka[0];return t.event=function(t){t.each(function(){var t=a.of(this,arguments),n={x:l,y:f,i:o,j:u},e=this.__chart__||n;this.__chart__=n,Ha?ps.select(this).transition().each("start.brush",function(){o=e.i,u=e.j,l=e.x,f=e.y,t({type:"brushstart"})}).tween("brush:brush",function(){var e=Cr(l,n.x),r=Cr(f,n.y);return o=u=null,function(i){l=n.x=e(i),f=n.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=n.i,u=n.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(n){return arguments.length?(c=n,v=Ka[!c<<1|!h],t):c},t.y=function(n){return arguments.length?(h=n,v=Ka[!c<<1|!h],t):h},t.clamp=function(n){return arguments.length?(c&&h?(p=!!n[0],d=!!n[1]):c?p=!!n:h&&(d=!!n),t):c&&h?[p,d]:c?p:h?d:null},t.extent=function(n){var e,r,i,s,a;return arguments.length?(c&&(e=n[0],r=n[1],h&&(e=e[0],r=r[0]),o=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(a=e,e=r,r=a),(e!=l[0]||r!=l[1])&&(l=[e,r])),h&&(i=n[0],s=n[1],c&&(i=i[1],s=s[1]),u=[i,s],h.invert&&(i=h(i),s=h(s)),i>s&&(a=i,i=s,s=a),(i!=f[0]||s!=f[1])&&(f=[i,s])),t):(c&&(o?(e=o[0],r=o[1]):(e=l[0],r=l[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(a=e,e=r,r=a))),h&&(u?(i=u[0],s=u[1]):(i=f[0],s=f[1],h.invert&&(i=h.invert(i),s=h.invert(s)),i>s&&(a=i,i=s,s=a))),c&&h?[[e,i],[r,s]]:c?[e,r]:h&&[i,s])},t.clear=function(){return t.empty()||(l=[0,0],f=[0,0],o=u=null),t},t.empty=function(){return!!c&&l[0]==l[1]||!!h&&f[0]==f[1]},ps.rebind(t,a,"on")};var Ja={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ka=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Qa=yu.format=Mu.timeFormat,tc=Qa.utc,nc=tc("%Y-%m-%dT%H:%M:%S.%LZ");Qa.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?as:nc,as.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},as.toString=nc.toString,yu.second=Wt(function(t){return new bu(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),yu.seconds=yu.second.range,yu.seconds.utc=yu.second.utc.range,yu.minute=Wt(function(t){return new bu(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),yu.minutes=yu.minute.range,yu.minutes.utc=yu.minute.utc.range,yu.hour=Wt(function(t){var n=t.getTimezoneOffset()/60;return new bu(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),yu.hours=yu.hour.range,yu.hours.utc=yu.hour.utc.range,yu.month=Wt(function(t){return t=yu.day(t),t.setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),yu.months=yu.month.range,yu.months.utc=yu.month.utc.range;var ec=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],rc=[[yu.second,1],[yu.second,5],[yu.second,15],[yu.second,30],[yu.minute,1],[yu.minute,5],[yu.minute,15],[yu.minute,30],[yu.hour,1],[yu.hour,3],[yu.hour,6],[yu.hour,12],[yu.day,1],[yu.day,2],[yu.week,1],[yu.month,1],[yu.month,3],[yu.year,1]],ic=Qa.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Fn]]),oc={range:function(t,n,e){return ps.range(Math.ceil(t/e)*e,+n,e).map(hs)},floor:E,ceil:E};rc.year=yu.year,yu.scale=function(){return cs(ps.scale.linear(),rc,ic)};var sc=rc.map(function(t){return[t[0].utc,t[1]]}),uc=tc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Fn]]);sc.year=yu.year.utc,yu.scale.utc=function(){return cs(ps.scale.linear(),sc,uc)},ps.text=Ot(function(t){return t.responseText}),ps.json=function(t,n){return Tt(t,"application/json",ls,n)},ps.html=function(t,n){return Tt(t,"text/html",fs,n)},ps.xml=Ot(function(t){return t.responseXML}),this.d3=ps,r=ps,i="function"==typeof r?r.call(n,e,n,t):r,!(void 0!==i&&(t.exports=i))}()},function(t,n,e){"use strict";var r=e(1);n.select=function(t,n,e){var i=n,o=function(t){return t.changedTouches?t.changedTouches[0]:t},s=function(){i.style.left="0px",i.style.top="0px",i.style.width="0px",i.style.height="0px",i.style.display="block"},u=t.parentNode,a=r.Observable.merge(r.Observable.fromEvent(u,"mousedown"),r.Observable.fromEvent(u,"touchstart"),r.Observable.fromEvent(i,"mousedown"),r.Observable.fromEvent(i,"touchstart")).map(function(t){return t.preventDefault(),{x:o(t).clientX,y:o(t).clientY}}),c=r.Observable.merge(r.Observable.fromEvent(window,"mouseup"),r.Observable.fromEvent(window,"touchend")),h=r.Observable.merge(r.Observable.fromEvent(u,"mousemove"),r.Observable.fromEvent(u,"touchmove")),l=a.concatMap(function(t){return h.takeUntil(c).map(function(n){n.preventDefault();var e=o(n);return{x0:Math.min(t.x,e.clientX),y0:Math.min(t.y,e.clientY),x1:Math.max(t.x,e.clientX),y1:Math.max(t.y,e.clientY)}})}),f=a.subscribe(function(){s()}),p=c.subscribe(function(){i.style.display="none"}),d=l.sample(50).subscribe(function(t){var n=t;i.style.left=n.x0+"px",i.style.top=n.y0+"px",i.style.width=n.x1-n.x0+"px",i.style.height=n.y1-n.y0+"px"});return e(l),function(){f.dispose(),p.dispose(),d.dispose()}}},function(t,e,r){var i,o;(function(){function r(t){return!!t.exifdata}function s(t,n){n=n||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i),s=0;r>s;s++)o[s]=e.charCodeAt(s);return i}function u(t,n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onload=function(t){(200==this.status||0===this.status)&&n(this.response)},e.send()}function a(t,n){function e(e){var r=c(e),i=h(e);t.exifdata=r||{},t.iptcdata=i||{},n&&n.call(t)}if(t.src)if(/^data\:/i.test(t.src)){var r=s(t.src);e(r)}else if(/^blob\:/i.test(t.src)){var i=new FileReader;i.onload=function(t){e(t.target.result)},u(t.src,function(t){i.readAsArrayBuffer(t)})}else{var o=new XMLHttpRequest;o.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";e(o.response),o=null},o.open("GET",t.src,!0),o.responseType="arraybuffer",o.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var i=new FileReader;i.onload=function(t){g&&console.log("Got file of length "+t.target.result.byteLength),e(t.target.result)},i.readAsArrayBuffer(t)}}function c(t){var n=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var e,r=2,i=t.byteLength;i>r;){if(255!=n.getUint8(r))return g&&console.log("Not a valid marker at offset "+r+", found: "+n.getUint8(r)),!1;if(e=n.getUint8(r+1),g&&console.log(e),225==e)return g&&console.log("Found 0xFFE1 marker"),v(n,r+4,n.getUint16(r+2)-2);r+=2+n.getUint16(r+2)}}function h(t){var n=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=n.getUint8(0)||216!=n.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var e=2,r=t.byteLength,i=function(t,n){return 56===t.getUint8(n)&&66===t.getUint8(n+1)&&73===t.getUint8(n+2)&&77===t.getUint8(n+3)&&4===t.getUint8(n+4)&&4===t.getUint8(n+5)};r>e;){if(i(n,e)){var o=n.getUint8(e+7);o%2!==0&&(o+=1),0===o&&(o=4);var s=e+8+o,u=n.getUint16(e+6+o);return l(t,s,u)}e++}}function l(t,n,e){for(var r,i,o,s,u,a=new DataView(t),c={},h=n;n+e>h;)28===a.getUint8(h)&&2===a.getUint8(h+1)&&(s=a.getUint8(h+2),s in x&&(o=a.getInt16(h+3),u=o+5,i=x[s],r=d(a,h+5,o),c.hasOwnProperty(i)?c[i]instanceof Array?c[i].push(r):c[i]=[c[i],r]:c[i]=r)),h++;return c}function f(t,n,e,r,i){var o,s,u,a=t.getUint16(e,!i),c={};for(u=0;a>u;u++)o=e+12*u+2,s=r[t.getUint16(o,!i)],!s&&g&&console.log("Unknown tag: "+t.getUint16(o,!i)),c[s]=p(t,o,n,e,i);return c}function p(t,n,e,r,i){var o,s,u,a,c,h,l=t.getUint16(n+2,!i),f=t.getUint32(n+4,!i),p=t.getUint32(n+8,!i)+e;switch(l){case 1:case 7:if(1==f)return t.getUint8(n+8,!i);for(o=f>4?p:n+8,s=[],a=0;f>a;a++)s[a]=t.getUint8(o+a);return s;case 2:return o=f>4?p:n+8,d(t,o,f-1);case 3:if(1==f)return t.getUint16(n+8,!i);for(o=f>2?p:n+8,s=[],a=0;f>a;a++)s[a]=t.getUint16(o+2*a,!i);return s;case 4:if(1==f)return t.getUint32(n+8,!i);for(s=[],a=0;f>a;a++)s[a]=t.getUint32(p+4*a,!i);return s;case 5:if(1==f)return c=t.getUint32(p,!i),h=t.getUint32(p+4,!i),u=new Number(c/h),u.numerator=c,u.denominator=h,u;for(s=[],a=0;f>a;a++)c=t.getUint32(p+8*a,!i),h=t.getUint32(p+4+8*a,!i),s[a]=new Number(c/h),s[a].numerator=c,s[a].denominator=h;return s;case 9:if(1==f)return t.getInt32(n+8,!i);for(s=[],a=0;f>a;a++)s[a]=t.getInt32(p+4*a,!i);return s;case 10:if(1==f)return t.getInt32(p,!i)/t.getInt32(p+4,!i);for(s=[],a=0;f>a;a++)s[a]=t.getInt32(p+8*a,!i)/t.getInt32(p+4+8*a,!i);return s}}function d(t,e,r){var i="";for(n=e;n<e+r;n++)i+=String.fromCharCode(t.getUint8(n));return i}function v(t,n){if("Exif"!=d(t,n,4))return g&&console.log("Not valid EXIF data! "+d(t,n,4)),!1;var e,r,i,o,s,u=n+6;if(18761==t.getUint16(u))e=!1;else{if(19789!=t.getUint16(u))return g&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;e=!0}if(42!=t.getUint16(u+2,!e))return g&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var a=t.getUint32(u+4,!e);if(8>a)return g&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(u+4,!e)),!1;if(r=f(t,u,u+a,b,e),r.ExifIFDPointer){o=f(t,u,u+r.ExifIFDPointer,y,e);for(i in o){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[i]=w[i][o[i]];break;case"ExifVersion":case"FlashpixVersion":o[i]=String.fromCharCode(o[i][0],o[i][1],o[i][2],o[i][3]);break;case"ComponentsConfiguration":o[i]=w.Components[o[i][0]]+w.Components[o[i][1]]+w.Components[o[i][2]]+w.Components[o[i][3]]}r[i]=o[i]}}if(r.GPSInfoIFDPointer){s=f(t,u,u+r.GPSInfoIFDPointer,_,e);for(i in s){switch(i){case"GPSVersionID":s[i]=s[i][0]+"."+s[i][1]+"."+s[i][2]+"."+s[i][3]}r[i]=s[i]}}return r}var g=!1,m=function(t){return t instanceof m?t:this instanceof m?void(this.EXIFwrapped=t):new m(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=m),e.EXIF=m;var y=m.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},b=m.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},_=m.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},w=m.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},x={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};m.getData=function(t,n){return(t instanceof Image||t instanceof HTMLImageElement)&&!t.complete?!1:(r(t)?n&&n.call(t):a(t,n),!0)},m.getTag=function(t,n){return r(t)?t.exifdata[n]:void 0},m.getAllTags=function(t){if(!r(t))return{};var n,e=t.exifdata,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i},m.pretty=function(t){if(!r(t))return"";var n,e=t.exifdata,i="";for(n in e)e.hasOwnProperty(n)&&(i+="object"==typeof e[n]?e[n]instanceof Number?n+" : "+e[n]+" ["+e[n].numerator+"/"+e[n].denominator+"]\r\n":n+" : ["+e[n].length+" values]\r\n":n+" : "+e[n]+"\r\n");return i},m.readFromBinaryFile=function(t){return c(t)},i=[],o=function(){return m}.apply(e,i),!(void 0!==o&&(t.exports=o))}).call(this)},function(t,n){"use strict";var e={preview:void 0,origin:void 0,range:[0,2*Math.PI],selection:void 0,rotate:void 0,size:Math.min(window.innerHeight||document.body.clientHeight,window.innerWidth||document.body.clientWidth),isMobile:/mobile/i.test(navigator.userAgent)};n.app=e},function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=e(4),o=e(1);!function(){var t=function(t,n){var e=n;return function(n){return function(i){if(!arguments.length)return e[n];if(void 0!==e[n]&&null!==e[n]&&("undefined"==typeof i?"undefined":r(i))!==r(e[n]))throw new Error(("undefined"==typeof i?"undefined":r(i))+" doesn't match "+r(e[n]));return e[n]=i,t}}};i.palette=function(){var n={radius:100,ratio:.6,dom:void 0,selection:[],onSelectionChanged:function(){return{}},selectionChangedObservable:function(){return{}}},e=i.scale.linear().domain([0,360]).range([0,2*Math.PI]),r=i.svg.arc().startAngle(function(t,n){return e(n)}).endAngle(function(t,n){return e(n+1.3)}),s=i.layout.pie().sort(null),u=function(t,e){var r=t-n.dom.getBoundingClientRect().left-n.radius,i=n.radius-e+n.dom.getBoundingClientRect().top,o=0,s=n.radius,u=Math.acos((r*o+i*s)/(Math.sqrt(r*r+i*i)*Math.sqrt(o*o+s*s)));return r>0?u:2*Math.PI-u},a=function(t,e,i){var o=t,s=u(e,i);return o.selectAll("g.selection").remove(),o=o.append("g").attr({"class":"selection",transform:"translate("+n.radius+", "+n.radius+")"}),function(t,n,e){var i=r.startAngle(function(t){return t.start}).endAngle(function(t){return t.end}),a=u(t,n),c=[];c=e?[{start:Math.max(s,a),end:2*Math.PI},{start:0,end:Math.min(a,s)}]:[{start:s,end:a}];var h=o.selectAll("path.select").data(c);h.enter().append("path").attr({"class":"select"}).style("fill","rgba(0, 0, 0, 0.5)"),h.exit().remove(),h.attr("d",i)}},c=function(t){return t.changedTouches?t.changedTouches[0]:t},h=function f(t){t.on("mousedown",function(){var t=i.event;t.preventDefault?t.preventDefault():t.returnValue=!1}),t.append("g").attr({transform:"translate("+n.radius+", "+n.radius+")","class":"container"});var e=t.select("g.container");r.outerRadius(n.radius).innerRadius(n.radius*n.ratio),e.selectAll("path").data(s(i.range(0,360))).enter().append("path").attr("d",r).on("mousedown",function(){var t=i.event;t.preventDefault?t.preventDefault():t.returnValue=!1}).style("fill",function(t,n){return"hsl("+n+",100%,50%)"}),o&&o.Observable&&n.dom&&!function(){var e=o.Observable.merge(o.Observable.fromEvent(n.dom,"mousedown"),o.Observable.fromEvent(n.dom,"touchstart")),r=o.Observable.merge(o.Observable.fromEvent(window,"mouseup"),o.Observable.fromEvent(window,"touchend")),i=o.Observable.merge(o.Observable.fromEvent(n.dom,"mousemove"),o.Observable.fromEvent(n.dom,"touchmove")),s=e.concatMap(function(){return i.startWith(null).takeUntil(r).map(function(t){return null===t?null:{x:c(t).clientX,y:c(t).clientY}})}),h=s.map(function(t){return null===t?Math.PI:u(t.x,t.y)}).distinctUntilChanged().pairwise().map(function(t){return Math.abs(t[0]-t[1])>1.5*Math.PI}).filter(function(t){return t}),l=!1,p=void 0,d=void 0;e.forEach(function(n){l=!1,p=a(t,c(n).clientX,c(n).clientY),d=u(c(n).clientX,c(n).clientY)}),h.forEach(function(){l=!l}),s.forEach(function(t){null!==t&&p(t.x,t.y,l)});var v=s.map(function(t){return null===t?null:u(t.x,t.y)}).distinctUntilChanged().map(function(t){return null===t?null:l?[Math.max(d,t)-2*Math.PI,Math.min(d,t)]:[Math.min(d,t),Math.max(d,t)]}).filter(function(t){return null!==t});v.forEach(function(t){f.selection(t),n.onSelectionChanged(t)}),n.selectionChangedObservable(v)}()},l=t(h,n);return Object.keys(n).forEach(function(t){h[t]=l(t)}),h}}(),n.d3Palette=i.palette},function(t,n,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},i=e(7).app,o=e(1),s=function(t){var n={dom:void 0,onsuccess:void 0,onfailed:void 0,onchange:void 0},e={},i=function(t,n){return function(){n.apply(e,arguments),void 0!==t&&t.apply(e,arguments)}},o=function(t){var e=function(t){return t.nodeName&&"INPUT"===t.nodeName},i={string:function(){n.dom=document.querySelector(t)},object:function(){e(t)?n.dom=t:i["default"]()},"default":function(){throw new Error("Not a valid input!")}};i["undefined"==typeof t?"undefined":r(t)]()},s=function(){if(void 0===n.dom||void 0===n.onsuccess)throw new Error("Regist failed!");n.dom.onchange=function(){var t=n.dom.files[0],e=new FileReader;n.onchange&&n.onchange(),e.onload=function(t){var e=new Image;e.src=t.target.result,e.onload=function(){n.onsuccess(e)},e.onerror=n.onfailed},e.readAsDataURL(t)}};return e.regist=s,e.dom=function(t){return o(t),e},e.onsuccess=function(t){return arguments.length?(n.onsuccess=i(n.onsuccess,t),e):n.onsuccess},e.onfailed=function(t){return arguments.length?(n.onfailed=i(n.onfailed,t),e):n.onfailed},e.onchange=function(t){return arguments.length?(n.onchange=i(n.onchange,t),e):n.onchange},e.dom(t),e},u=function(t){return function(n,e){var r=Math.max(n/t,1),i=Math.max(e/t,1);return Math.max(r,i)}},a=function(t,n){if(void 0===t.width||void 0===t.height)throw new Error("Invalid input parameter!");var e=document.createElement("canvas"),r=u(n||i.size)(t.width,t.height);return i.rotate.display(t,e,r),e},c=function(t){var n=new Image;return n.src=t.toDataURL("image/jpeg",.9),n},h=function(t,n){if(t){var e=document.createElement("canvas"),r=e.getContext("2d");return e.style.display="none",n?(e.width=n.ifRotate?t.height:t.width,e.height=n.ifRotate?t.width:t.height,r.translate(e.width/2,e.height/2),r.rotate(n.angle),r.drawImage(t,-t.width/2,-t.height/2,t.width,t.height)):(e.width=t.width,e.height=t.height,r.drawImage(t,0,0)),e}},l=function(t,n){var e=function(t){return n[0]<=t&&n[1]>=t};return e(t)||e(t-360)},f=function(t,n,e){var r=Math.max(t,n,e),i=Math.min(t,n,e);return r===i?0:r===t?60*(n-e)/(r-i)+(n>=e?0:360):r===n?60*(e-t)/(r-i)+120:60*(t-n)/(r-i)+240},p=function(t,n,e){return.299*t+.587*n+.114*e},d=function(t){var n={canvas:void 0,range:void 0,selection:void 0},e={},r=function(t){return t&&t.nodeName&&"CANVAS"===t.nodeName},i=function(t){return t&&void 0!==t[0]&&void 0!==t[1]},o=function(t){return l(t,n.range)},s=function(t){var e=Math.floor(t/4/n.canvas.width),r=Math.floor(t/4%n.canvas.width);return n.selection.x0<=r&&n.selection.x1>=r&&n.selection.y0<=e&&n.selection.y1>=e};return e.canvas=function(t){if(!r(t))throw new Error("Not canvas!");return n.canvas=t,n.selection={x0:0,y0:0,x1:t.width,y1:t.height},e},e.range=function(t){if(!i(t))throw new Error("Not Range!");return n.range=[],n.range[0]=t[0]/(2*Math.PI)*360,n.range[1]=t[1]/(2*Math.PI)*360,e},e.selection=function(t){if(void 0===t.x0||void 0===t.x1||void 0===t.y0||void 0===t.y1)throw new Error("Not Selection!");if(!n.canvas)throw new Error("Canvas need to be defined first!");return n.selection={x0:Math.max(Math.min(t.x0,n.canvas.width),0),y0:Math.max(Math.min(t.y0,n.canvas.height),0),x1:Math.min(Math.max(t.x1,0),n.canvas.width),y1:Math.min(Math.max(t.y1,0),n.canvas.height)},e},e.convert=function(){if(void 0===n.canvas||void 0===n.range)throw new Error("Not ready for convert!");for(var t=n.canvas.getContext("2d"),e=t.getImageData(0,0,n.canvas.width,n.canvas.height),r=e.data,i=0;i<r.length;i+=4)if(!s(i)||!o(f(r[i],r[i+1],r[i+2]))){var u=p(r[i],r[i+1],r[i+2]);r[i]=r[i+1]=r[i+2]=u}return t.putImageData(e,0,0),n.canvas},e.canvas(t),e},v=function(t,n,e,r,s){var a={canvas:void 0,preview:void 0,origin:void 0},c={},h=function(t){return t&&t.nodeName&&"CANVAS"===t.nodeName},d=function(t){return function(n){if(!h(n))throw new Error("Not Canvas!");return a[t]=n,c}};return c.start=function(){if(i.isMobile)return c;var t=200;a.canvas.subscription&&a.canvas.subscription.dispose();var n=a.canvas.move=a.canvas.move||o.Observable.fromEvent(a.canvas,"mousemove"),e=a.preview.getContext("2d"),r=a.origin.getContext("2d"),h=u(i.size)(a.origin.width,a.origin.height),d=function(t,n,e){return l(f(t,n,e),a.range)},v=function(n,e){var r=e.y*h-t/2+Math.floor(n/4/t),i=e.x*h-t/2+Math.floor(n/4%t);return a.selection.x0*h<=i&&a.selection.x1*h>=i&&a.selection.y0*h<=r&&a.selection.y1*h>=r;
};return a.preview.width=t,a.preview.height=t,a.preview.style.display="block",a.canvas.subscription=n.sample(50).map(function(t){return{x:t.clientX-a.rect.left,y:t.clientY-a.rect.top}}).subscribe(function(n){if(a.range&&a.selection){for(var i=r.getImageData(Math.floor(n.x*h-t/2),Math.floor(n.y*h-t/2),t,t),o=i.data,u=0;u<o.length;u+=4)v(u,n)&&d(o[u],o[u+1],o[u+2])||(o[u]=o[u+1]=o[u+2]=p(o[u],o[u+1],o[u+2]));e.putImageData(i,0,0),e.rotate(s.angle),e.drawImage(a.preview,0,0)}}),c},Object.keys(a).forEach(function(t){c[t]=d(t)}),c.range=function(t){return a.range=[],a.range[0]=t[0]/(2*Math.PI)*360,a.range[1]=t[1]/(2*Math.PI)*360,c},c.selection=function(t){if(void 0===t.x0||void 0===t.x1||void 0===t.y0||void 0===t.y1)throw new Error("Not Selection!");if(!a.canvas)throw new Error("Canvas need to be defined first!");return a.selection={x0:Math.max(Math.min(t.x0,a.canvas.width),0),y0:Math.max(Math.min(t.y0,a.canvas.height),0),x1:Math.min(Math.max(t.x1,0),a.canvas.width),y1:Math.min(Math.max(t.y1,0),a.canvas.height)},c},c.rect=function(t){return void 0!==t&&(a.rect=t),c},c.rect(n),c.canvas(t),c.origin(e),c.preview(r),c};n.imageConverter=d,n.image2Canvas=h,n.canvas2Image=c,n.previewGenerator=a,n.getRatio=u,n.imagePreviewer=v,n.imageLoader=s},function(t,n){"use strict";n.dragndrop=function(t,n,e){var r=n,i=e;t.addEventListener("dragenter",function(t){t.stopPropagation(),t.preventDefault(),r.style.display="block"}),t.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault(),r.innerText="Drop Here!",r.style.borderColor="blue",r.style.backgroundColor="rgba(255,255,255,.55)"},!1),t.addEventListener("dragleave",function(t){t.stopPropagation(),t.preventDefault(),r.innerText="",r.style.borderColor=r.style.backgroundColor="rgba(255,255,255,0)"}),t.addEventListener("drop",function(t){r.style.display="none",t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0&&/image/.test(t.dataTransfer.files[0].type)&&(i.files=t.dataTransfer.files)},!1)}},function(t,n){"use strict";n.rotateHelper=function(t){var n=6===t||8===t,e={1:0,6:Math.PI/2,3:Math.PI,8:-Math.PI/2,undefined:0}[t],r={1:"0deg",undefined:"0deg",3:"180deg",6:"90deg",8:"-90deg"}[t],i=function(t,r,i){var o=r,s=o.getContext("2d"),u=i||1;o.width=(n?t.height:t.width)/u,o.height=(n?t.width:t.height)/u,s.translate(o.width/2,o.height/2),s.rotate(e),n?s.drawImage(t,-o.height/2,-o.width/2,o.height,o.width):s.drawImage(t,-o.width/2,-o.height/2,o.width,o.height)};return{toString:function(t,e){return n?e+" x "+t:t+" x "+e},display:i,ifRotate:n,angle:e,angleDeg:r,position:function(n,e){return{1:n,undefined:n,3:{x:e.width-n.x,y:e.height-n.y},6:{x:n.y,y:e.width-n.x},8:{x:e.height-n.y,y:n.x}}[t]},index:function(n,e){return{1:n,undefined:n,3:e*e*4-n-4,6:e-Math.floor(n/e)+n%e*e,8:e*(e-n%e)+Math.floor(n/e)}[t]}}}}]);